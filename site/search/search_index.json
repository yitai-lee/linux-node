{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to MkDocs For full documentation visit mkdocs.org . Commands mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit. Project layout mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Welcome to MkDocs"},{"location":"#welcome-to-mkdocs","text":"For full documentation visit mkdocs.org .","title":"Welcome to MkDocs"},{"location":"#commands","text":"mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit.","title":"Commands"},{"location":"#project-layout","text":"mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Project layout"},{"location":"about/","text":"\u95dc\u65bc\u672c\u7ad9 \u9019\u88e1\u8a18\u9304\u4e86\u6211\u5728 Linux \u8207\u7cfb\u7d71\u904b\u7dad \u9818\u57df\u7684\u5b78\u7fd2\u7b46\u8a18\u8207\u5be6\u6230\u7d93\u9a57\uff0c\u900f\u904e\u6574\u7406\u8207\u5206\u4eab\uff0c\u4e0d\u50c5\u65b9\u4fbf\u81ea\u5df1\u8907\u7fd2\uff0c\u4e5f\u5e0c\u671b\u80fd\u8b93\u5176\u4ed6\u4eba\u5feb\u901f\u638c\u63e1\u91cd\u9ede\u3002 \u700f\u89bd\u65b9\u5f0f \u4f7f\u7528\u5de6\u5074\u9078\u55ae\u700f\u89bd\u4e0d\u540c\u5206\u985e\u6587\u7ae0 \u6216\u900f\u904e\u4e0a\u65b9\u641c\u5c0b\u529f\u80fd\u67e5\u8a62\u7279\u5b9a\u4e3b\u984c \u806f\u7e6b\u4ea4\u6d41 \u5982\u6709\u4efb\u4f55\u554f\u984c\u6216\u5efa\u8b70\uff0c\u6b61\u8fce\u900f\u904e GitHub Issue \u63d0\u51fa\u8a0e\u8ad6","title":"About"},{"location":"about/#_1","text":"\u9019\u88e1\u8a18\u9304\u4e86\u6211\u5728 Linux \u8207\u7cfb\u7d71\u904b\u7dad \u9818\u57df\u7684\u5b78\u7fd2\u7b46\u8a18\u8207\u5be6\u6230\u7d93\u9a57\uff0c\u900f\u904e\u6574\u7406\u8207\u5206\u4eab\uff0c\u4e0d\u50c5\u65b9\u4fbf\u81ea\u5df1\u8907\u7fd2\uff0c\u4e5f\u5e0c\u671b\u80fd\u8b93\u5176\u4ed6\u4eba\u5feb\u901f\u638c\u63e1\u91cd\u9ede\u3002","title":"\u95dc\u65bc\u672c\u7ad9"},{"location":"about/#_2","text":"\u4f7f\u7528\u5de6\u5074\u9078\u55ae\u700f\u89bd\u4e0d\u540c\u5206\u985e\u6587\u7ae0 \u6216\u900f\u904e\u4e0a\u65b9\u641c\u5c0b\u529f\u80fd\u67e5\u8a62\u7279\u5b9a\u4e3b\u984c","title":"\u700f\u89bd\u65b9\u5f0f"},{"location":"about/#_3","text":"\u5982\u6709\u4efb\u4f55\u554f\u984c\u6216\u5efa\u8b70\uff0c\u6b61\u8fce\u900f\u904e GitHub Issue \u63d0\u51fa\u8a0e\u8ad6","title":"\u806f\u7e6b\u4ea4\u6d41"},{"location":"ansible%E7%B0%A1%E4%BB%8B%E5%8F%8A%E7%94%A8%E6%B3%95/","text":"Ansible \u5b78\u7fd2\u7b46\u8a18 \u4ec0\u9ebc\u662f Ansible Ansible \u662f\u4e00\u500b\u57fa\u65bc Python \u7684\u81ea\u52d5\u5316\u5de5\u5177\uff0c\u7528\u4f86\u7ba1\u7406\u4f3a\u670d\u5668\u914d\u7f6e\u3001\u90e8\u7f72\u61c9\u7528\u7a0b\u5f0f\u53ca\u81ea\u52d5\u5316 IT \u4efb\u52d9\u3002\u5b83\u63a1\u7528 \u7121\u4ee3\u7406\uff08agentless\uff09\u67b6\u69cb \uff0c\u900f\u904e SSH \u9023\u7dda \u7ba1\u7406\u76ee\u6a19\u4e3b\u6a5f\uff0c\u4f7f\u7528\u7c21\u55ae\u6613\u8b80\u7684 YAML \u8a9e\u6cd5\u64b0\u5beb Playbook\u3002 \ud83d\udccc \u4ec0\u9ebc\u662f\u51aa\u7b49\u6027 (Idempotency) \u5728 \u81ea\u52d5\u5316\u914d\u7f6e\u7ba1\u7406 \u88e1\uff0c \u51aa\u7b49\u6027\u6307\u7684\u662f \u540c\u4e00\u500b\u64cd\u4f5c\u4e0d\u7ba1\u57f7\u884c\u591a\u5c11\u6b21\uff0c\u6700\u7d42\u7d50\u679c\u90fd\u6703\u662f\u4e00\u6a23\u7684 \u3002 \u63db\u53e5\u8a71\u8aaa\uff1a \u7b2c\u4e00\u6b21\u57f7\u884c\uff1a \u6703\u505a\u51fa\u9700\u8981\u7684\u6539\u8b8a \uff08\u4f8b\u5982\u5b89\u88dd\u5957\u4ef6\u3001\u4fee\u6539\u6a94\u6848\uff09\u3002 \u7b2c\u4e8c\u6b21\u3001\u7b2c\u4e09\u6b21\u518d\u57f7\u884c\uff1a\u5982\u679c\u7cfb\u7d71\u5df2\u7d93\u7b26\u5408\u9700\u6c42\uff0c\u5c31\u4e0d\u6703 \u518d\u91cd\u8907\u6539\u8b8a \u3002 \u8209\u4f8b\uff1a - name: \u5b89\u88dd httpd yum: name: httpd state: present \u5982\u679c\u7cfb\u7d71 \u9084\u6c92\u88dd httpd \u2192 Ansible \u5e6b\u4f60\u5b89\u88dd\u3002 \u5982\u679c\u7cfb\u7d71 \u5df2\u7d93\u6709 httpd \u2192 \u4e0d\u6703\u91cd\u8907\u5b89\u88dd\u3002 \u9019\u5c31\u662f \u51aa\u7b49\u6027\uff0c\u907f\u514d\u300c\u7121\u8b02\u7684\u52d5\u4f5c\u300d \u3002 \u540d\u8a5e\u8207\u751f\u6d3b\u6bd4\u55bb \u540d\u8a5e \u751f\u6d3b\u6bd4\u55bb Task \u505a\u4e00\u4ef6\u4e8b \u2192 \u6bd4\u5982\u716e\u4e00\u676f\u5496\u5561 Play \u4e00\u7d44\u4eba\u505a\u4e00\u7d44\u4efb\u52d9 \u2192 \u6bd4\u5982\u300c\u5abd\u5abd\u716e\u5496\u5561\u3001\u5f1f\u5f1f\u62ff\u9905\u4e7e\u300d Playbook \u6574\u672c\u6d3b\u52d5\u624b\u518a \u2192 \u300c\u65e9\u6668\u805a\u6703\u6d41\u7a0b\uff0c\u5f9e\u716e\u5496\u5561\u5230\u64fa\u684c\u5b50\u300d Variable \u53ef\u66ff\u63db\u7684\u8cc7\u8a0a \u2192 \u300c\u5496\u5561\u53e3\u5473\u300d\u53ef\u4ee5\u8b8a\u5316 Role \u6a21\u7d44\u5316\u55ae\u5143 \u2192 \u300c\u716e\u5496\u5561\u7684\u6d41\u7a0b\u300d\u53ef\u4ee5\u91cd\u8907\u7528\u5728\u4e0d\u540c\u5834\u5408 Inventory \u8207 Playbook \u95dc\u4fc2 Inventory \uff1a\u4e3b\u6a5f\u6e05\u55ae [helloworld] # \u7fa4\u7d44\u540d\u7a31 localhost ansible_connection=local # \u4e3b\u6a5f\u540d\u7a31 + \u9023\u7dda\u65b9\u5f0f Playbook \uff1a\u544a\u8a34 Ansible\"\u8981\u5c0d\u54ea\u4e9b\u4e3b\u6a5f\u505a\u4ec0\u9ebc\u4e8b\" - name: \u57f7\u884cHello world\u5217\u5370\u7684ansible # Play \u540d\u7a31 hosts: helloworld # \u64cd\u4f5c\u7684\u4e3b\u6a5f\u7fa4\u7d44 gather_facts: no # \u4e0d\u6536\u96c6\u7cfb\u7d71\u8cc7\u8a0a tasks: - name: \u9019\u662f\u7b2c\u4e00\u500btask\u4efb\u52d9 # Task \u540d\u7a31 debug: msg: \"Hello world\" # Module debug \u986f\u793a\u8a0a\u606f \u6ce8\u610f\uff1a - Playbook \u540d\u7a31\u53ef\u81ea\u8a02\uff0c\u4f46\u57f7\u884c\u6642\u8981\u6307\u5b9a\u6b63\u78ba\u8def\u5f91 - \u5982\u679c hosts: \u6307\u5411\u4e0d\u5b58\u5728\u7684\u7fa4\u7d44\uff0c\u6703\u51fa\u73fe skipping: no hosts matched \u5982\u4f55\u4f7f\u7528 Ansible \u5efa\u7acb Ansible \u914d\u7f6e\u6a94\u6848 ansible.cfg \uff08\u9019\u662f\u70ba\u4e86\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 ansible-playbook {playbook} \uff09 [defaults] inventory = ./inventory.ini \u5efa\u7acb Inventory \u6e05\u55ae inventory.ini [helloworld] localhost ansible_connection=local \u57f7\u884c Playbook # \u6307\u5b9a Inventory ansible-playbook -i inventory.ini playbook.yml # \u4f7f\u7528 ansible.cfg \u7684\u9810\u8a2d inventory ansible-playbook playbook.yml \u5efa\u7acb Role Ansible Role \u4ecb\u7d39 \u5728 Ansible \u88e1\uff0c Role \u662f\u4e00\u500b\u300c\u6a21\u7d44\u5316\u3001\u53ef\u91cd\u8907\u4f7f\u7528\u7684\u4efb\u52d9\u55ae\u5143\u300d\uff0c\u5b83\u628a\u76f8\u95dc\u7684\u4efb\u52d9\u3001\u8b8a\u6578\u3001\u6a21\u677f\u3001\u975c\u614b\u6a94\u6848\u3001Handler \u7b49\u90fd\u6574\u7406\u5728\u4e00\u8d77\uff0c\u65b9\u4fbf\u4f60\u5728\u4e0d\u540c Playbook \u6216\u5c08\u6848\u4e2d\u91cd\u8907\u4f7f\u7528\uff0c\u800c\u4e0d\u9700\u8981\u6bcf\u6b21\u90fd\u91cd\u5beb\u6574\u500b\u6d41\u7a0b\u3002 \u7c21\u55ae\u8aaa\uff0c Role \u5c31\u50cf\u4e00\u500b\u5c0f\u578b\u7a0b\u5f0f\u5eab\u6216\u529f\u80fd\u6a21\u7d44 \u3002 ansible-galaxy init roles/\u6a94\u540d \u751f\u6210\u7684 Role \u7d50\u69cb\u5982\u4e0b\uff1a roles/ \u2514\u2500\u2500 \u6a94\u540d/ \u251c\u2500\u2500 README.md # Role \u8aaa\u660e\u6587\u4ef6 \u251c\u2500\u2500 defaults/ \u2502 \u2514\u2500\u2500 main.yml # \u9810\u8a2d\u8b8a\u6578\uff08\u4f4e\u512a\u5148\u7d1a\uff09 \u251c\u2500\u2500 files/ # \u975c\u614b\u6a94\u6848\uff0c\u4f8b\u5982\u8a2d\u5b9a\u6a94\u3001\u5b89\u88dd\u5305 \u251c\u2500\u2500 handlers/ \u2502 \u2514\u2500\u2500 main.yml # \u901a\u77e5 Handler\uff0c\u4f8b\u5982\u91cd\u555f\u670d\u52d9 \u251c\u2500\u2500 meta/ \u2502 \u2514\u2500\u2500 main.yml # Role \u5143\u8cc7\u6599\uff0c\u4f8b\u5982\u4f9d\u8cf4\u5176\u4ed6 Role \u251c\u2500\u2500 tasks/ \u2502 \u2514\u2500\u2500 main.yml # \u4e3b\u8981\u4efb\u52d9\u6d41\u7a0b \u251c\u2500\u2500 templates/ # Jinja2 \u6a21\u677f\u6a94\u6848 \u2514\u2500\u2500 vars/ \u2514\u2500\u2500 main.yml # \u9ad8\u512a\u5148\u7d1a\u8b8a\u6578 Ansible \u5be6\u52d9\u932f\u8aa4\uff1a\u76ee\u9304\u547d\u540d\u932f\u8aa4 \u932f\u8aa4\u73fe\u8c61 \u57f7\u884c ansible-playbook \u6642\u51fa\u73fe\u4ee5\u4e0b\u932f\u8aa4\uff1a ERROR! the role 'hello' was not found in /path/to/roles/...","title":"Ansible\u7c21\u4ecb\u53ca\u7528\u6cd5"},{"location":"ansible%E7%B0%A1%E4%BB%8B%E5%8F%8A%E7%94%A8%E6%B3%95/#ansible","text":"","title":"Ansible \u5b78\u7fd2\u7b46\u8a18"},{"location":"ansible%E7%B0%A1%E4%BB%8B%E5%8F%8A%E7%94%A8%E6%B3%95/#ansible_1","text":"Ansible \u662f\u4e00\u500b\u57fa\u65bc Python \u7684\u81ea\u52d5\u5316\u5de5\u5177\uff0c\u7528\u4f86\u7ba1\u7406\u4f3a\u670d\u5668\u914d\u7f6e\u3001\u90e8\u7f72\u61c9\u7528\u7a0b\u5f0f\u53ca\u81ea\u52d5\u5316 IT \u4efb\u52d9\u3002\u5b83\u63a1\u7528 \u7121\u4ee3\u7406\uff08agentless\uff09\u67b6\u69cb \uff0c\u900f\u904e SSH \u9023\u7dda \u7ba1\u7406\u76ee\u6a19\u4e3b\u6a5f\uff0c\u4f7f\u7528\u7c21\u55ae\u6613\u8b80\u7684 YAML \u8a9e\u6cd5\u64b0\u5beb Playbook\u3002","title":"\u4ec0\u9ebc\u662f Ansible"},{"location":"ansible%E7%B0%A1%E4%BB%8B%E5%8F%8A%E7%94%A8%E6%B3%95/#idempotency","text":"\u5728 \u81ea\u52d5\u5316\u914d\u7f6e\u7ba1\u7406 \u88e1\uff0c \u51aa\u7b49\u6027\u6307\u7684\u662f \u540c\u4e00\u500b\u64cd\u4f5c\u4e0d\u7ba1\u57f7\u884c\u591a\u5c11\u6b21\uff0c\u6700\u7d42\u7d50\u679c\u90fd\u6703\u662f\u4e00\u6a23\u7684 \u3002 \u63db\u53e5\u8a71\u8aaa\uff1a \u7b2c\u4e00\u6b21\u57f7\u884c\uff1a \u6703\u505a\u51fa\u9700\u8981\u7684\u6539\u8b8a \uff08\u4f8b\u5982\u5b89\u88dd\u5957\u4ef6\u3001\u4fee\u6539\u6a94\u6848\uff09\u3002 \u7b2c\u4e8c\u6b21\u3001\u7b2c\u4e09\u6b21\u518d\u57f7\u884c\uff1a\u5982\u679c\u7cfb\u7d71\u5df2\u7d93\u7b26\u5408\u9700\u6c42\uff0c\u5c31\u4e0d\u6703 \u518d\u91cd\u8907\u6539\u8b8a \u3002 \u8209\u4f8b\uff1a - name: \u5b89\u88dd httpd yum: name: httpd state: present \u5982\u679c\u7cfb\u7d71 \u9084\u6c92\u88dd httpd \u2192 Ansible \u5e6b\u4f60\u5b89\u88dd\u3002 \u5982\u679c\u7cfb\u7d71 \u5df2\u7d93\u6709 httpd \u2192 \u4e0d\u6703\u91cd\u8907\u5b89\u88dd\u3002 \u9019\u5c31\u662f \u51aa\u7b49\u6027\uff0c\u907f\u514d\u300c\u7121\u8b02\u7684\u52d5\u4f5c\u300d \u3002","title":"\ud83d\udccc \u4ec0\u9ebc\u662f\u51aa\u7b49\u6027 (Idempotency)"},{"location":"ansible%E7%B0%A1%E4%BB%8B%E5%8F%8A%E7%94%A8%E6%B3%95/#_1","text":"\u540d\u8a5e \u751f\u6d3b\u6bd4\u55bb Task \u505a\u4e00\u4ef6\u4e8b \u2192 \u6bd4\u5982\u716e\u4e00\u676f\u5496\u5561 Play \u4e00\u7d44\u4eba\u505a\u4e00\u7d44\u4efb\u52d9 \u2192 \u6bd4\u5982\u300c\u5abd\u5abd\u716e\u5496\u5561\u3001\u5f1f\u5f1f\u62ff\u9905\u4e7e\u300d Playbook \u6574\u672c\u6d3b\u52d5\u624b\u518a \u2192 \u300c\u65e9\u6668\u805a\u6703\u6d41\u7a0b\uff0c\u5f9e\u716e\u5496\u5561\u5230\u64fa\u684c\u5b50\u300d Variable \u53ef\u66ff\u63db\u7684\u8cc7\u8a0a \u2192 \u300c\u5496\u5561\u53e3\u5473\u300d\u53ef\u4ee5\u8b8a\u5316 Role \u6a21\u7d44\u5316\u55ae\u5143 \u2192 \u300c\u716e\u5496\u5561\u7684\u6d41\u7a0b\u300d\u53ef\u4ee5\u91cd\u8907\u7528\u5728\u4e0d\u540c\u5834\u5408","title":"\u540d\u8a5e\u8207\u751f\u6d3b\u6bd4\u55bb"},{"location":"ansible%E7%B0%A1%E4%BB%8B%E5%8F%8A%E7%94%A8%E6%B3%95/#inventory-playbook","text":"Inventory \uff1a\u4e3b\u6a5f\u6e05\u55ae [helloworld] # \u7fa4\u7d44\u540d\u7a31 localhost ansible_connection=local # \u4e3b\u6a5f\u540d\u7a31 + \u9023\u7dda\u65b9\u5f0f Playbook \uff1a\u544a\u8a34 Ansible\"\u8981\u5c0d\u54ea\u4e9b\u4e3b\u6a5f\u505a\u4ec0\u9ebc\u4e8b\" - name: \u57f7\u884cHello world\u5217\u5370\u7684ansible # Play \u540d\u7a31 hosts: helloworld # \u64cd\u4f5c\u7684\u4e3b\u6a5f\u7fa4\u7d44 gather_facts: no # \u4e0d\u6536\u96c6\u7cfb\u7d71\u8cc7\u8a0a tasks: - name: \u9019\u662f\u7b2c\u4e00\u500btask\u4efb\u52d9 # Task \u540d\u7a31 debug: msg: \"Hello world\" # Module debug \u986f\u793a\u8a0a\u606f \u6ce8\u610f\uff1a - Playbook \u540d\u7a31\u53ef\u81ea\u8a02\uff0c\u4f46\u57f7\u884c\u6642\u8981\u6307\u5b9a\u6b63\u78ba\u8def\u5f91 - \u5982\u679c hosts: \u6307\u5411\u4e0d\u5b58\u5728\u7684\u7fa4\u7d44\uff0c\u6703\u51fa\u73fe skipping: no hosts matched","title":"Inventory \u8207 Playbook \u95dc\u4fc2"},{"location":"ansible%E7%B0%A1%E4%BB%8B%E5%8F%8A%E7%94%A8%E6%B3%95/#ansible_2","text":"\u5efa\u7acb Ansible \u914d\u7f6e\u6a94\u6848 ansible.cfg \uff08\u9019\u662f\u70ba\u4e86\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 ansible-playbook {playbook} \uff09 [defaults] inventory = ./inventory.ini \u5efa\u7acb Inventory \u6e05\u55ae inventory.ini [helloworld] localhost ansible_connection=local \u57f7\u884c Playbook # \u6307\u5b9a Inventory ansible-playbook -i inventory.ini playbook.yml # \u4f7f\u7528 ansible.cfg \u7684\u9810\u8a2d inventory ansible-playbook playbook.yml","title":"\u5982\u4f55\u4f7f\u7528 Ansible"},{"location":"ansible%E7%B0%A1%E4%BB%8B%E5%8F%8A%E7%94%A8%E6%B3%95/#role","text":"","title":"\u5efa\u7acb Role"},{"location":"ansible%E7%B0%A1%E4%BB%8B%E5%8F%8A%E7%94%A8%E6%B3%95/#ansible-role","text":"\u5728 Ansible \u88e1\uff0c Role \u662f\u4e00\u500b\u300c\u6a21\u7d44\u5316\u3001\u53ef\u91cd\u8907\u4f7f\u7528\u7684\u4efb\u52d9\u55ae\u5143\u300d\uff0c\u5b83\u628a\u76f8\u95dc\u7684\u4efb\u52d9\u3001\u8b8a\u6578\u3001\u6a21\u677f\u3001\u975c\u614b\u6a94\u6848\u3001Handler \u7b49\u90fd\u6574\u7406\u5728\u4e00\u8d77\uff0c\u65b9\u4fbf\u4f60\u5728\u4e0d\u540c Playbook \u6216\u5c08\u6848\u4e2d\u91cd\u8907\u4f7f\u7528\uff0c\u800c\u4e0d\u9700\u8981\u6bcf\u6b21\u90fd\u91cd\u5beb\u6574\u500b\u6d41\u7a0b\u3002 \u7c21\u55ae\u8aaa\uff0c Role \u5c31\u50cf\u4e00\u500b\u5c0f\u578b\u7a0b\u5f0f\u5eab\u6216\u529f\u80fd\u6a21\u7d44 \u3002 ansible-galaxy init roles/\u6a94\u540d \u751f\u6210\u7684 Role \u7d50\u69cb\u5982\u4e0b\uff1a roles/ \u2514\u2500\u2500 \u6a94\u540d/ \u251c\u2500\u2500 README.md # Role \u8aaa\u660e\u6587\u4ef6 \u251c\u2500\u2500 defaults/ \u2502 \u2514\u2500\u2500 main.yml # \u9810\u8a2d\u8b8a\u6578\uff08\u4f4e\u512a\u5148\u7d1a\uff09 \u251c\u2500\u2500 files/ # \u975c\u614b\u6a94\u6848\uff0c\u4f8b\u5982\u8a2d\u5b9a\u6a94\u3001\u5b89\u88dd\u5305 \u251c\u2500\u2500 handlers/ \u2502 \u2514\u2500\u2500 main.yml # \u901a\u77e5 Handler\uff0c\u4f8b\u5982\u91cd\u555f\u670d\u52d9 \u251c\u2500\u2500 meta/ \u2502 \u2514\u2500\u2500 main.yml # Role \u5143\u8cc7\u6599\uff0c\u4f8b\u5982\u4f9d\u8cf4\u5176\u4ed6 Role \u251c\u2500\u2500 tasks/ \u2502 \u2514\u2500\u2500 main.yml # \u4e3b\u8981\u4efb\u52d9\u6d41\u7a0b \u251c\u2500\u2500 templates/ # Jinja2 \u6a21\u677f\u6a94\u6848 \u2514\u2500\u2500 vars/ \u2514\u2500\u2500 main.yml # \u9ad8\u512a\u5148\u7d1a\u8b8a\u6578","title":"Ansible Role \u4ecb\u7d39"},{"location":"ansible%E7%B0%A1%E4%BB%8B%E5%8F%8A%E7%94%A8%E6%B3%95/#ansible_3","text":"","title":"Ansible \u5be6\u52d9\u932f\u8aa4\uff1a\u76ee\u9304\u547d\u540d\u932f\u8aa4"},{"location":"ansible%E7%B0%A1%E4%BB%8B%E5%8F%8A%E7%94%A8%E6%B3%95/#_2","text":"\u57f7\u884c ansible-playbook \u6642\u51fa\u73fe\u4ee5\u4e0b\u932f\u8aa4\uff1a ERROR! the role 'hello' was not found in /path/to/roles/...","title":"\u932f\u8aa4\u73fe\u8c61"},{"location":"docker_commands/","text":"Docker \u5e38\u7528\u547d\u4ee4\u6574\u7406 1. \u6620\u50cf\u6a94\u64cd\u4f5c (Image) # \u641c\u5c0b\u6620\u50cf\u6a94 docker search <image> # \u4e0b\u8f09\u6620\u50cf\u6a94 docker pull <image>[:tag] # \u5217\u51fa\u672c\u5730\u6620\u50cf\u6a94 docker images # \u522a\u9664\u6620\u50cf\u6a94 docker rmi <image_id> # \u6aa2\u8996\u6620\u50cf\u6a94\u8a73\u7d30\u8cc7\u8a0a docker inspect <image_id> # \u70ba\u6620\u50cf\u6a94\u52a0\u4e0a\u6a19\u7c64 docker tag <image_id> <repo>:<tag> # \u532f\u51fa\u6620\u50cf\u6a94\u70ba tar docker save -o <file>.tar <image> # \u532f\u5165\u6620\u50cf\u6a94 docker load -i <file>.tar 2. \u5bb9\u5668\u64cd\u4f5c (Container) # \u5efa\u7acb\u4e26\u57f7\u884c\u5bb9\u5668 (\u4e92\u52d5\u5f0f) docker run -it <image> /bin/bash # \u5efa\u7acb\u4e26\u57f7\u884c\u5bb9\u5668 (\u80cc\u666f\u57f7\u884c) docker run -d --name <container_name> <image> # \u5217\u51fa\u6b63\u5728\u57f7\u884c\u7684\u5bb9\u5668 docker ps # \u5217\u51fa\u6240\u6709\u5bb9\u5668 (\u5305\u542b\u505c\u6b62) docker ps -a # \u505c\u6b62\u5bb9\u5668 docker stop <container_id> # \u555f\u52d5\u5bb9\u5668 docker start <container_id> # \u91cd\u555f\u5bb9\u5668 docker restart <container_id> # \u522a\u9664\u5bb9\u5668 docker rm <container_id> # \u6aa2\u8996\u5bb9\u5668\u8a73\u7d30\u8cc7\u8a0a docker inspect <container_id> # \u6aa2\u8996\u5bb9\u5668\u8cc7\u6e90\u4f7f\u7528 docker stats 3. \u5bb9\u5668\u5167\u64cd\u4f5c # \u9032\u5165\u5bb9\u5668 docker exec -it <container_id> /bin/bash # \u67e5\u770b\u5bb9\u5668\u65e5\u8a8c docker logs <container_id> # \u5be6\u6642\u67e5\u770b\u5bb9\u5668\u65e5\u8a8c docker logs -f <container_id> # \u8907\u88fd\u6a94\u6848\uff1a\u5bb9\u5668 -> \u4e3b\u6a5f docker cp <container_id>:/path/in/container /host/path # \u8907\u88fd\u6a94\u6848\uff1a\u4e3b\u6a5f -> \u5bb9\u5668 docker cp /host/path <container_id>:/path/in/container # \u6aa2\u8996\u5bb9\u5668\u5167\u7a0b\u5e8f docker top <container_id> 4. \u7db2\u8def\u8207\u57e0\u53e3 # \u5efa\u7acb\u5bb9\u5668\u4e26\u6620\u5c04\u57e0\u53e3 docker run -d -p 8080:80 <image> # \u6aa2\u8996\u7db2\u8def docker network ls # \u5efa\u7acb\u81ea\u8a02\u7db2\u8def docker network create <network_name> # \u52a0\u5165\u5bb9\u5668\u5230\u7db2\u8def docker network connect <network_name> <container_id> # \u5f9e\u7db2\u8def\u79fb\u9664\u5bb9\u5668 docker network disconnect <network_name> <container_id> # \u6aa2\u8996\u7db2\u8def\u8a73\u7d30\u8cc7\u8a0a docker network inspect <network_name> 5. Volume (\u8cc7\u6599\u5377) # \u5efa\u7acb Volume docker volume create <volume_name> # \u6aa2\u8996 Volume \u5217\u8868 docker volume ls # \u6aa2\u8996 Volume \u8a73\u7d30\u8cc7\u8a0a docker volume inspect <volume_name> # \u522a\u9664 Volume docker volume rm <volume_name> # \u5efa\u7acb\u5bb9\u5668\u4e26\u639b\u8f09 Volume docker run -d -v <volume_name>:/path/in/container <image> 6. Docker Compose # \u555f\u52d5 docker-compose up -d # \u505c\u6b62 docker-compose down # \u67e5\u770b\u670d\u52d9\u72c0\u614b docker-compose ps # \u67e5\u770b\u65e5\u8a8c docker-compose logs -f # \u91cd\u65b0\u555f\u52d5 docker-compose restart 7. \u7cfb\u7d71\u7ba1\u7406 # \u6aa2\u8996 Docker \u7cfb\u7d71\u8cc7\u8a0a docker info # \u6e05\u7406\u672a\u4f7f\u7528\u7684\u8cc7\u6e90 docker system prune -a # \u6aa2\u8996\u78c1\u789f\u4f7f\u7528\u60c5\u6cc1 docker system df","title":"Docker\u5e38\u7528\u547d\u4ee4"},{"location":"docker_commands/#docker","text":"","title":"Docker \u5e38\u7528\u547d\u4ee4\u6574\u7406"},{"location":"docker_commands/#1-image","text":"# \u641c\u5c0b\u6620\u50cf\u6a94 docker search <image> # \u4e0b\u8f09\u6620\u50cf\u6a94 docker pull <image>[:tag] # \u5217\u51fa\u672c\u5730\u6620\u50cf\u6a94 docker images # \u522a\u9664\u6620\u50cf\u6a94 docker rmi <image_id> # \u6aa2\u8996\u6620\u50cf\u6a94\u8a73\u7d30\u8cc7\u8a0a docker inspect <image_id> # \u70ba\u6620\u50cf\u6a94\u52a0\u4e0a\u6a19\u7c64 docker tag <image_id> <repo>:<tag> # \u532f\u51fa\u6620\u50cf\u6a94\u70ba tar docker save -o <file>.tar <image> # \u532f\u5165\u6620\u50cf\u6a94 docker load -i <file>.tar","title":"1. \u6620\u50cf\u6a94\u64cd\u4f5c (Image)"},{"location":"docker_commands/#2-container","text":"# \u5efa\u7acb\u4e26\u57f7\u884c\u5bb9\u5668 (\u4e92\u52d5\u5f0f) docker run -it <image> /bin/bash # \u5efa\u7acb\u4e26\u57f7\u884c\u5bb9\u5668 (\u80cc\u666f\u57f7\u884c) docker run -d --name <container_name> <image> # \u5217\u51fa\u6b63\u5728\u57f7\u884c\u7684\u5bb9\u5668 docker ps # \u5217\u51fa\u6240\u6709\u5bb9\u5668 (\u5305\u542b\u505c\u6b62) docker ps -a # \u505c\u6b62\u5bb9\u5668 docker stop <container_id> # \u555f\u52d5\u5bb9\u5668 docker start <container_id> # \u91cd\u555f\u5bb9\u5668 docker restart <container_id> # \u522a\u9664\u5bb9\u5668 docker rm <container_id> # \u6aa2\u8996\u5bb9\u5668\u8a73\u7d30\u8cc7\u8a0a docker inspect <container_id> # \u6aa2\u8996\u5bb9\u5668\u8cc7\u6e90\u4f7f\u7528 docker stats","title":"2. \u5bb9\u5668\u64cd\u4f5c (Container)"},{"location":"docker_commands/#3","text":"# \u9032\u5165\u5bb9\u5668 docker exec -it <container_id> /bin/bash # \u67e5\u770b\u5bb9\u5668\u65e5\u8a8c docker logs <container_id> # \u5be6\u6642\u67e5\u770b\u5bb9\u5668\u65e5\u8a8c docker logs -f <container_id> # \u8907\u88fd\u6a94\u6848\uff1a\u5bb9\u5668 -> \u4e3b\u6a5f docker cp <container_id>:/path/in/container /host/path # \u8907\u88fd\u6a94\u6848\uff1a\u4e3b\u6a5f -> \u5bb9\u5668 docker cp /host/path <container_id>:/path/in/container # \u6aa2\u8996\u5bb9\u5668\u5167\u7a0b\u5e8f docker top <container_id>","title":"3. \u5bb9\u5668\u5167\u64cd\u4f5c"},{"location":"docker_commands/#4","text":"# \u5efa\u7acb\u5bb9\u5668\u4e26\u6620\u5c04\u57e0\u53e3 docker run -d -p 8080:80 <image> # \u6aa2\u8996\u7db2\u8def docker network ls # \u5efa\u7acb\u81ea\u8a02\u7db2\u8def docker network create <network_name> # \u52a0\u5165\u5bb9\u5668\u5230\u7db2\u8def docker network connect <network_name> <container_id> # \u5f9e\u7db2\u8def\u79fb\u9664\u5bb9\u5668 docker network disconnect <network_name> <container_id> # \u6aa2\u8996\u7db2\u8def\u8a73\u7d30\u8cc7\u8a0a docker network inspect <network_name>","title":"4. \u7db2\u8def\u8207\u57e0\u53e3"},{"location":"docker_commands/#5-volume","text":"# \u5efa\u7acb Volume docker volume create <volume_name> # \u6aa2\u8996 Volume \u5217\u8868 docker volume ls # \u6aa2\u8996 Volume \u8a73\u7d30\u8cc7\u8a0a docker volume inspect <volume_name> # \u522a\u9664 Volume docker volume rm <volume_name> # \u5efa\u7acb\u5bb9\u5668\u4e26\u639b\u8f09 Volume docker run -d -v <volume_name>:/path/in/container <image>","title":"5. Volume (\u8cc7\u6599\u5377)"},{"location":"docker_commands/#6-docker-compose","text":"# \u555f\u52d5 docker-compose up -d # \u505c\u6b62 docker-compose down # \u67e5\u770b\u670d\u52d9\u72c0\u614b docker-compose ps # \u67e5\u770b\u65e5\u8a8c docker-compose logs -f # \u91cd\u65b0\u555f\u52d5 docker-compose restart","title":"6. Docker Compose"},{"location":"docker_commands/#7","text":"# \u6aa2\u8996 Docker \u7cfb\u7d71\u8cc7\u8a0a docker info # \u6e05\u7406\u672a\u4f7f\u7528\u7684\u8cc7\u6e90 docker system prune -a # \u6aa2\u8996\u78c1\u789f\u4f7f\u7528\u60c5\u6cc1 docker system df","title":"7. \u7cfb\u7d71\u7ba1\u7406"},{"location":"note/","text":"\ud83d\udcd8 \u4f7f\u7528 MkDocs \u5efa\u7acb\u6587\u4ef6\u7db2\u7ad9\u6559\u5b78\u7b46\u8a18 \u4ee5\u4e0b\u70ba MkDocs \u642d\u5efa\u7db2\u7ad9\u7684\u5b8c\u6574\u6b65\u9a5f\u8207\u6307\u4ee4\uff0c\u9069\u7528\u65bc Windows / macOS / Linux\u3002 \ud83d\udccc \u6b65\u9a5f\u4e00\uff1a\u5b89\u88dd MkDocs \u2705 \u5b89\u88dd Python\uff08\u82e5\u5c1a\u672a\u5b89\u88dd\uff09 MkDocs \u662f Python \u64b0\u5beb\u7684\u5de5\u5177\uff0c\u8acb\u5148\u5b89\u88dd Python 3.7+ \u53ef\u4ee5\u5230\u5b98\u65b9\u4e0b\u8f09\uff1ahttps://www.python.org/downloads/ \u5b89\u88dd\u5f8c\u8acb\u78ba\u8a8d\u7248\u672c\uff1a python --version \u6216 python3 --version \u2705 \u5b89\u88dd MkDocs \u672c\u9ad4 pip install mkdocs \u2705 \u78ba\u8a8d\u5b89\u88dd\u6210\u529f mkdocs --version \ud83d\udccc \u6b65\u9a5f\u4e8c\uff1a\u5efa\u7acb\u65b0\u5c08\u6848 \u2705 \u5efa\u7acb\u4e00\u500b\u65b0\u7684 MkDocs \u5c08\u6848 mkdocs new my-docs cd my-docs \u9019\u6703\u7522\u751f\u4e00\u500b\u5c08\u6848\u7d50\u69cb\u5982\u4e0b\uff1a my-docs/ \u251c\u2500\u2500 docs/ \u2502 \u2514\u2500\u2500 index.md \u2190 \u9810\u8a2d\u9996\u9801\u5167\u5bb9 \u2514\u2500\u2500 mkdocs.yml \u2190 \u8a2d\u5b9a\u6a94 \ud83d\udccc \u6b65\u9a5f\u4e09\uff1a\u555f\u52d5\u672c\u5730\u9810\u89bd\u4f3a\u670d\u5668 mkdocs serve \u63a5\u8457\u6253\u958b\u700f\u89bd\u5668\u8f38\u5165\u7db2\u5740\uff1a http://127.0.0.1:8000/ \u5c31\u80fd\u5373\u6642\u9810\u89bd\u4f60\u64b0\u5beb\u7684 Markdown \u6587\u4ef6\u3002 \ud83d\udccc \u6b65\u9a5f\u56db\uff1a\u7de8\u8f2f\u5167\u5bb9 \u4f60\u53ef\u4ee5\u5728 docs/ \u76ee\u9304\u4e0b\u65b0\u589e\u4f60\u7684 Markdown \u6587\u4ef6\uff0c\u4f8b\u5982\uff1a docs/ \u251c\u2500\u2500 index.md \u251c\u2500\u2500 about/ \u2502 \u2514\u2500\u2500 license.md \u251c\u2500\u2500 user-guide/ \u2502 \u251c\u2500\u2500 writing-your-docs.md \u2502 \u2514\u2500\u2500 styling-your-docs.md \ud83d\udccc \u6b65\u9a5f\u4e94\uff1a\u8a2d\u5b9a\u5c0e\u89bd\u5217\uff08 mkdocs.yml \uff09 \u6253\u958b mkdocs.yml \uff0c\u8a2d\u5b9a\u5c0e\u89bd\u5217\u5982\u4e0b\uff1a site_name: \u6211\u7684\u6587\u4ef6\u7db2\u7ad9 nav: - Home: index.md - User Guide: - Writing your docs: user-guide/writing-your-docs.md - Styling your docs: user-guide/styling-your-docs.md - About: - License: about/license.md \ud83d\udccc \u6b65\u9a5f\u516d\uff1a\u5efa\u7f6e\u975c\u614b\u7db2\u7ad9 \u7576\u4f60\u64b0\u5beb\u5b8c\u6210\u5f8c\uff0c\u4f7f\u7528\u4e0b\u5217\u6307\u4ee4\u751f\u6210\u975c\u614b HTML \u7db2\u7ad9\uff1a mkdocs build \u9019\u6703\u5728\u76ee\u9304\u4e2d\u7522\u751f site/ \u8cc7\u6599\u593e\uff0c\u88e1\u9762\u5c31\u662f\u53ef\u4e0a\u50b3\u5230 Web \u4e3b\u6a5f\u7684 HTML \u975c\u614b\u7db2\u7ad9\u3002 \ud83d\udccc \u6b65\u9a5f\u4e03\uff1a\u90e8\u7f72\u5230 GitHub Pages\uff08\u53ef\u9078\uff09 \u5982\u679c\u4f60\u60f3\u628a\u7db2\u7ad9\u90e8\u7f72\u5230 GitHub Pages\uff1a \u6b65\u9a5f 1\uff1a\u521d\u59cb\u5316 Git \u5009\u5eab\uff08\u5982\u679c\u5c1a\u672a init\uff09 git init git remote add origin https://github.com/\u4f60\u7684\u5e33\u865f/\u4f60\u7684repo.git \u6b65\u9a5f 2\uff1a\u90e8\u7f72\u81f3 GitHub Pages mkdocs gh-deploy \u9019\u6703\u81ea\u52d5\u5c07 site/ \u8cc7\u6599\u593e\u5167\u5bb9\u90e8\u7f72\u5230 GitHub Pages \u7684 gh-pages \u5206\u652f\u3002 \u2705 \u5b8c\u6210\uff01 \u73fe\u5728\u4f60\u5df2\u7d93\u5b8c\u6210 MkDocs \u7db2\u7ad9\u7684\u642d\u5efa\u8207\u90e8\u7f72\uff0c\u53ef\u4ee5\u5c07\u9019\u4efd\u7b46\u8a18\u52a0\u5165\u5230\u4f60\u7684\u6587\u4ef6\u4e2d\uff01","title":"\u4f7f\u7528 MkDocs \u5efa\u7acb\u6587\u4ef6\u7db2\u7ad9\u6559\u5b78\u7b46\u8a18"},{"location":"note/#mkdocs","text":"\u4ee5\u4e0b\u70ba MkDocs \u642d\u5efa\u7db2\u7ad9\u7684\u5b8c\u6574\u6b65\u9a5f\u8207\u6307\u4ee4\uff0c\u9069\u7528\u65bc Windows / macOS / Linux\u3002","title":"\ud83d\udcd8 \u4f7f\u7528 MkDocs \u5efa\u7acb\u6587\u4ef6\u7db2\u7ad9\u6559\u5b78\u7b46\u8a18"},{"location":"note/#mkdocs_1","text":"","title":"\ud83d\udccc \u6b65\u9a5f\u4e00\uff1a\u5b89\u88dd MkDocs"},{"location":"note/#python","text":"MkDocs \u662f Python \u64b0\u5beb\u7684\u5de5\u5177\uff0c\u8acb\u5148\u5b89\u88dd Python 3.7+ \u53ef\u4ee5\u5230\u5b98\u65b9\u4e0b\u8f09\uff1ahttps://www.python.org/downloads/ \u5b89\u88dd\u5f8c\u8acb\u78ba\u8a8d\u7248\u672c\uff1a python --version \u6216 python3 --version","title":"\u2705 \u5b89\u88dd Python\uff08\u82e5\u5c1a\u672a\u5b89\u88dd\uff09"},{"location":"note/#mkdocs_2","text":"pip install mkdocs","title":"\u2705 \u5b89\u88dd MkDocs \u672c\u9ad4"},{"location":"note/#_1","text":"mkdocs --version","title":"\u2705 \u78ba\u8a8d\u5b89\u88dd\u6210\u529f"},{"location":"note/#_2","text":"","title":"\ud83d\udccc \u6b65\u9a5f\u4e8c\uff1a\u5efa\u7acb\u65b0\u5c08\u6848"},{"location":"note/#mkdocs_3","text":"mkdocs new my-docs cd my-docs \u9019\u6703\u7522\u751f\u4e00\u500b\u5c08\u6848\u7d50\u69cb\u5982\u4e0b\uff1a my-docs/ \u251c\u2500\u2500 docs/ \u2502 \u2514\u2500\u2500 index.md \u2190 \u9810\u8a2d\u9996\u9801\u5167\u5bb9 \u2514\u2500\u2500 mkdocs.yml \u2190 \u8a2d\u5b9a\u6a94","title":"\u2705 \u5efa\u7acb\u4e00\u500b\u65b0\u7684 MkDocs \u5c08\u6848"},{"location":"note/#_3","text":"mkdocs serve \u63a5\u8457\u6253\u958b\u700f\u89bd\u5668\u8f38\u5165\u7db2\u5740\uff1a http://127.0.0.1:8000/ \u5c31\u80fd\u5373\u6642\u9810\u89bd\u4f60\u64b0\u5beb\u7684 Markdown \u6587\u4ef6\u3002","title":"\ud83d\udccc \u6b65\u9a5f\u4e09\uff1a\u555f\u52d5\u672c\u5730\u9810\u89bd\u4f3a\u670d\u5668"},{"location":"note/#_4","text":"\u4f60\u53ef\u4ee5\u5728 docs/ \u76ee\u9304\u4e0b\u65b0\u589e\u4f60\u7684 Markdown \u6587\u4ef6\uff0c\u4f8b\u5982\uff1a docs/ \u251c\u2500\u2500 index.md \u251c\u2500\u2500 about/ \u2502 \u2514\u2500\u2500 license.md \u251c\u2500\u2500 user-guide/ \u2502 \u251c\u2500\u2500 writing-your-docs.md \u2502 \u2514\u2500\u2500 styling-your-docs.md","title":"\ud83d\udccc \u6b65\u9a5f\u56db\uff1a\u7de8\u8f2f\u5167\u5bb9"},{"location":"note/#mkdocsyml","text":"\u6253\u958b mkdocs.yml \uff0c\u8a2d\u5b9a\u5c0e\u89bd\u5217\u5982\u4e0b\uff1a site_name: \u6211\u7684\u6587\u4ef6\u7db2\u7ad9 nav: - Home: index.md - User Guide: - Writing your docs: user-guide/writing-your-docs.md - Styling your docs: user-guide/styling-your-docs.md - About: - License: about/license.md","title":"\ud83d\udccc \u6b65\u9a5f\u4e94\uff1a\u8a2d\u5b9a\u5c0e\u89bd\u5217\uff08mkdocs.yml\uff09"},{"location":"note/#_5","text":"\u7576\u4f60\u64b0\u5beb\u5b8c\u6210\u5f8c\uff0c\u4f7f\u7528\u4e0b\u5217\u6307\u4ee4\u751f\u6210\u975c\u614b HTML \u7db2\u7ad9\uff1a mkdocs build \u9019\u6703\u5728\u76ee\u9304\u4e2d\u7522\u751f site/ \u8cc7\u6599\u593e\uff0c\u88e1\u9762\u5c31\u662f\u53ef\u4e0a\u50b3\u5230 Web \u4e3b\u6a5f\u7684 HTML \u975c\u614b\u7db2\u7ad9\u3002","title":"\ud83d\udccc \u6b65\u9a5f\u516d\uff1a\u5efa\u7f6e\u975c\u614b\u7db2\u7ad9"},{"location":"note/#github-pages","text":"\u5982\u679c\u4f60\u60f3\u628a\u7db2\u7ad9\u90e8\u7f72\u5230 GitHub Pages\uff1a","title":"\ud83d\udccc \u6b65\u9a5f\u4e03\uff1a\u90e8\u7f72\u5230 GitHub Pages\uff08\u53ef\u9078\uff09"},{"location":"note/#1-git-init","text":"git init git remote add origin https://github.com/\u4f60\u7684\u5e33\u865f/\u4f60\u7684repo.git","title":"\u6b65\u9a5f 1\uff1a\u521d\u59cb\u5316 Git \u5009\u5eab\uff08\u5982\u679c\u5c1a\u672a init\uff09"},{"location":"note/#2-github-pages","text":"mkdocs gh-deploy \u9019\u6703\u81ea\u52d5\u5c07 site/ \u8cc7\u6599\u593e\u5167\u5bb9\u90e8\u7f72\u5230 GitHub Pages \u7684 gh-pages \u5206\u652f\u3002","title":"\u6b65\u9a5f 2\uff1a\u90e8\u7f72\u81f3 GitHub Pages"},{"location":"note/#_6","text":"\u73fe\u5728\u4f60\u5df2\u7d93\u5b8c\u6210 MkDocs \u7db2\u7ad9\u7684\u642d\u5efa\u8207\u90e8\u7f72\uff0c\u53ef\u4ee5\u5c07\u9019\u4efd\u7b46\u8a18\u52a0\u5165\u5230\u4f60\u7684\u6587\u4ef6\u4e2d\uff01","title":"\u2705 \u5b8c\u6210\uff01"},{"location":"ocp%E5%91%BD%E4%BB%A4/","text":"\ud83e\uddf0 OpenShift CLI \u5e38\u7528\u547d\u4ee4\u7b46\u8a18 \ud83d\udfe9 \u57fa\u672c\u547d\u4ee4 \u547d\u4ee4 \u8aaa\u660e oc project \u986f\u793a\u76ee\u524d\u4f5c\u7528\u4e2d\u7684\u5c08\u6848\uff08Namespace\uff09\u8207\u9023\u7dda\u4f3a\u670d\u5668 oc project -q \u50c5\u986f\u793a\u76ee\u524d\u5c08\u6848\u540d\u7a31 oc project <project-name> \u5207\u63db\u5230\u6307\u5b9a\u5c08\u6848 oc get project \u5217\u51fa\u53e2\u96c6\u4e2d\u6240\u6709\u5c08\u6848\uff08\u5c0d\u61c9 Kubernetes \u7684 Namespace\uff09 oc whoami \u986f\u793a\u76ee\u524d\u767b\u5165\u4f7f\u7528\u8005 oc version \u986f\u793a CLI \u8207\u4f3a\u670d\u5668\u7248\u672c oc login \u767b\u5165 OpenShift \u53e2\u96c6 oc logout \u767b\u51fa\u76ee\u524d\u9023\u7dda \ud83d\udfe6 \u6aa2\u8996\u8cc7\u6e90\u72c0\u614b \u547d\u4ee4 \u8aaa\u660e oc get pods -n <namespace> \u5217\u51fa\u6307\u5b9a Namespace \u4e2d\u6240\u6709 Pod \u72c0\u614b oc get pods -n <namespace> -o wide \u986f\u793a\u5b8c\u6574\u6b04\u4f4d\uff08\u5305\u542b IP\u3001\u7bc0\u9ede\uff09 oc get pods -A \u6216 oc get pods --all-namespaces \u67e5\u770b\u6240\u6709\u547d\u540d\u7a7a\u9593\u7684 Pod oc get pods -l <label>=<value> \u4ee5 label \u7be9\u9078 Pod oc describe pod <pod-name> -n <namespace> \u67e5\u770b\u55ae\u4e00 Pod \u8a73\u7d30\u8cc7\u8a0a\uff08\u4e8b\u4ef6\u3001\u5bb9\u5668\u72c0\u614b\uff09 oc get all -n <namespace> \u67e5\u770b\u547d\u540d\u7a7a\u9593\u5167\u6240\u6709\u4e3b\u8981\u8cc7\u6e90\uff08Pod\u3001Service\u3001Deployment\u3001ReplicaSet\uff09 oc describe <type> <name> -n <namespace> \u6aa2\u8996\u4efb\u4f55\u8cc7\u6e90\u7684\u8a73\u7d30\u4e8b\u4ef6\u8207\u8a2d\u5b9a oc get co \u67e5\u770b\u53e2\u96c6\u5c64\u7d1a Cluster Operators \u72c0\u614b\uff08\u7cfb\u7d71\u6838\u5fc3\u5143\u4ef6\uff09 oc get csv -A \u67e5\u770b\u6240\u6709\u547d\u540d\u7a7a\u9593\u7684 Operator\uff08OLM \u7ba1\u7406\uff09\u7248\u672c\u8207\u72c0\u614b oc get events -A --sort-by=.metadata.creationTimestamp \u67e5\u770b\u6240\u6709\u4e8b\u4ef6\uff08\u4f9d\u6642\u9593\u6392\u5e8f\uff09 oc get pods -w -n <namespace> \u76e3\u770b Pod \u72c0\u614b\u5373\u6642\u8b8a\u5316 -A \uff08All Namespaces\uff09\u4f7f\u7528\u8aaa\u660e \u6307\u4ee4 \u529f\u80fd \u662f\u5426\u5141\u8a31 oc get pods -A \u67e5\u6240\u6709\u547d\u540d\u7a7a\u9593\u7684\u6240\u6709 Pod \u2705 \u5141\u8a31 oc get pod <pod-name> -A \u67e5\u55ae\u4e00 Pod \u8de8\u547d\u540d\u7a7a\u9593 \u274c \u4e0d\u5141\u8a31 oc describe pod <pod-name> -A \u67e5\u55ae\u4e00 Pod \u8a73\u7d30\u8cc7\u8a0a\u8de8\u547d\u540d\u7a7a\u9593 \u274c \u4e0d\u5141\u8a31 oc get pod <pod-name> -n <namespace> \u67e5\u55ae\u4e00\u547d\u540d\u7a7a\u9593\u5167 Pod \u2705 \u5141\u8a31 \ud83d\udcd8 Pod \u540d\u7a31\u4e0d\u662f\u5168\u57df\u552f\u4e00\uff0c\u4e0d\u540c Namespace \u53ef\u80fd\u5b58\u5728\u76f8\u540c Pod \u540d\uff0c\u56e0\u6b64\u7981\u6b62\u4ee5\u540d\u7a31\u8de8\u547d\u540d\u7a7a\u9593\u67e5\u8a62\u3002 \u67e5\u8a62 Pod \u6240\u5c6c Namespace oc get pods -A | grep <pod-name> \ud83d\udd0d \u5e38\u7528\u67e5\u8a62\u6307\u4ee4\u5feb\u901f\u8868 \u64cd\u4f5c \u6307\u4ee4 \u67e5 Pod \u8a73\u7d30\u8cc7\u8a0a oc get pod nginx-6f8565f9fc-8hb79 -n nginx-lab -o wide \u67e5\u4e8b\u4ef6\u8207\u5bb9\u5668\u72c0\u614b oc describe pod nginx-6f8565f9fc-8hb79 -n nginx-lab \ud83e\udde0 \u88dc\u5145\u8aaa\u660e \u6307\u4ee4 \u529f\u80fd oc get co \u6aa2\u67e5 OpenShift \u7cfb\u7d71\u5c64\u6838\u5fc3\u7d44\u4ef6\uff08\u5982 etcd\u3001kube-apiserver\u3001network\u3001machine-config\uff09 oc get csv \u67e5\u770b Operator Lifecycle Manager\uff08OLM\uff09\u7ba1\u7406\u7684\u61c9\u7528\u5c64 Operator\uff08\u5982 VPA\u3001PackageServer\uff09 \ud83d\udfe8 \u65e5\u8a8c\u8207\u5bb9\u5668\u4e92\u52d5 \u547d\u4ee4 \u8aaa\u660e oc logs pod/<pod-name> -n <namespace> \u986f\u793a Pod \u9810\u8a2d\u5bb9\u5668\u65e5\u8a8c oc logs pod/<pod-name> -c <container-name> -n <namespace> \u986f\u793a\u7279\u5b9a\u5bb9\u5668\u65e5\u8a8c\uff08\u591a\u5bb9\u5668 Pod \u4f7f\u7528\uff09 oc logs -f pod/<pod-name> -n <namespace> \u8ffd\u8e64\u5373\u6642\u8f38\u51fa\u65e5\u8a8c oc exec -it pod/<pod-name> -n <namespace> -- /bin/sh \u9032\u5165\u5bb9\u5668 Shell oc rsh pod/<pod-name> -n <namespace> \u4f7f\u7528\u9060\u7aef Shell \u767b\u5165 Pod oc cp <namespace>/<pod-name>:<path> <local-path> \u5f9e Pod \u8907\u88fd\u6a94\u6848\u81f3\u672c\u5730 oc cp <local-path> <namespace>/<pod-name>:<path> \u5f9e\u672c\u5730\u8907\u88fd\u6a94\u6848\u81f3 Pod \ud83d\udfe5 \u7bc0\u9ede\u8207\u53e2\u96c6\u6aa2\u67e5 \u547d\u4ee4 \u8aaa\u660e oc get nodes \u5217\u51fa\u6240\u6709\u7bc0\u9ede oc describe node <node-name> \u67e5\u770b\u7bc0\u9ede\u8a73\u60c5\uff08\u689d\u4ef6\u3001taints\u3001\u5bb9\u91cf\u7b49\uff09 oc adm top nodes \u67e5\u770b\u7bc0\u9ede CPU\uff0f\u8a18\u61b6\u9ad4\u4f7f\u7528\u91cf oc adm top pods -n <namespace> \u67e5\u770b\u547d\u540d\u7a7a\u9593\u4e2d Pod \u7684\u8cc7\u6e90\u4f7f\u7528\u60c5\u6cc1 oc get clusteroperators \u7b49\u540c oc get co \uff0c\u6aa2\u67e5\u7cfb\u7d71\u6838\u5fc3 Operator \u72c0\u614b oc get clusterversion \u67e5\u770b\u6574\u9ad4 OpenShift \u7248\u672c\u8207\u5347\u7d1a\u72c0\u614b oc get mcp \u67e5\u770b MachineConfigPool \u72c0\u614b oc get mcd -A \u67e5\u770b MachineConfigDaemon \u72c0\u614b oc adm node-logs --role=<master|worker> -u <systemd_unit> \u6293\u53d6\u7bc0\u9ede systemd \u55ae\u5143\u65e5\u8a8c oc adm node-logs --role=master --path=<path_under_/var/log> \u6307\u5b9a\u8def\u5f91\u6293\u53d6\u7bc0\u9ede\u65e5\u8a8c \ud83d\udfea \u9032\u968e\uff0f\u5de5\u5177\u6027\u547d\u4ee4 \u547d\u4ee4 \u8aaa\u660e oc api-resources \u5217\u51fa\u53e2\u96c6\u652f\u63f4\u7684\u6240\u6709 API \u8cc7\u6e90\u7a2e\u985e oc api-versions \u986f\u793a\u53e2\u96c6\u652f\u63f4\u7684 API \u7248\u672c oc explain <resource> \u67e5\u770b\u8cc7\u6e90\u7d50\u69cb\u8207\u6b04\u4f4d\u8aaa\u660e oc explain deployment.spec.template.spec.containers \u67e5\u770b Deployment \u4e2d\u5bb9\u5668\u8a2d\u5b9a\u7684\u8a73\u7d30\u7d50\u69cb oc get pods -o custom-columns=POD:.metadata.name,NODE:.spec.nodeName \u81ea\u8a02\u8f38\u51fa\u6b04\u4f4d\u986f\u793a Pod \u8207\u6240\u5c6c\u7bc0\u9ede oc adm release info \u986f\u793a\u76ee\u524d OpenShift \u767c\u884c\u7248\u672c\u8cc7\u8a0a oc adm release extract --tools \u63d0\u53d6 release \u7248\u672c\u4e2d\u5305\u542b\u7684 CLI \u5de5\u5177 \ud83e\udde9 \u5e38\u898b\u64cd\u4f5c\u6574\u5408 \u64cd\u4f5c\u76ee\u7684 \u5c0d\u61c9\u6307\u4ee4 \u67e5\u770b\u7cfb\u7d71\u6838\u5fc3\u5143\u4ef6\u72c0\u614b oc get co \u67e5\u770b Operator \u72c0\u614b oc get csv -A \u67e5\u770b\u7bc0\u9ede\u4f7f\u7528\u7387 oc adm top nodes \u6aa2\u67e5\u5347\u7d1a\u72c0\u614b oc get clusterversion \u67e5\u770b\u7bc0\u9ede\u65e5\u8a8c oc adm node-logs --role=master -u crio \u8ffd\u8e64 Pod \u555f\u52d5\u65e5\u8a8c oc logs -f pod/<pod-name> -n <namespace> OpenShift / Kubernetes \u5e38\u898b\u8cc7\u6e90\u7e2e\u5beb\u5c0d\u7167\u8868 \u5b8c\u6574\u540d\u7a31 (Full Name) \u53ef\u7528\u7e2e\u5beb (Short Name) Pod po Service svc ConfigMap cm Secret sec Deployment (\u7121\uff0c\u9700\u5b8c\u6574\u5beb) ReplicaSet rs Namespace ns PersistentVolumeClaim (PVC) pvc Node no Job (\u7121\uff0c\u9700\u5b8c\u6574\u5beb) DaemonSet ds \ud83d\udcd8 \u4f7f\u7528\u7bc4\u4f8b # \u67e5\u770b Pod oc get po # \u67e5\u770b Service oc get svc # \u67e5\u770b ConfigMap oc get cm # \u67e5\u770b Deployment\uff08\u7121\u7e2e\u5beb\uff09 oc get deployment k8s\u547d\u4ee4 kubectl apply --dry-run \u7528\u6cd5 \u6307\u4ee4\u8207\u884c\u70ba\u4e00\u6b21\u770b\u61c2 \u6307\u4ee4 \u884c\u70ba\u63cf\u8ff0 \u662f\u5426\u9001\u5230 API Server \u662f\u5426\u8dd1 Webhook\uff08Mutating/Validating\uff09 \u662f\u5426\u9700\u8981 CRD \u5df2\u5b58\u5728 \u662f\u5426\u5beb\u5165 etcd kubectl apply -f x.yaml --dry-run=client \u672c\u5730\u7aef\u6aa2\u67e5 YAML \uff0c\u53ea\u505a\u8a9e\u6cd5\u8207\u57fa\u672c\u6b04\u4f4d\u9a57\u8b49 \u5426 \u5426 \u5426\uff08\u4f46\u4e0d\u8a8d\u8b58 CRD \u6703\u76f4\u63a5\u5831\u932f\uff09 \u5426 kubectl apply -f x.yaml --dry-run=server \u9001 API Server \u505a\u5b8c\u6574\u9a57\u8b49 \uff08schema\u3001CRD\u3001RBAC\uff09 \u662f \u662f \u662f \u5426 kubectl apply -f x.yaml --dry-run=server -o yaml \u9001 API Server \u6a21\u64ec\u5efa\u7acb\uff0c\u8f38\u51fa mutate \u5f8c\u6700\u7d42\u7269\u4ef6 \u662f \u662f \u662f \u5426","title":"ocp\u547d\u4ee4"},{"location":"ocp%E5%91%BD%E4%BB%A4/#openshift-cli","text":"","title":"\ud83e\uddf0 OpenShift CLI \u5e38\u7528\u547d\u4ee4\u7b46\u8a18"},{"location":"ocp%E5%91%BD%E4%BB%A4/#_1","text":"\u547d\u4ee4 \u8aaa\u660e oc project \u986f\u793a\u76ee\u524d\u4f5c\u7528\u4e2d\u7684\u5c08\u6848\uff08Namespace\uff09\u8207\u9023\u7dda\u4f3a\u670d\u5668 oc project -q \u50c5\u986f\u793a\u76ee\u524d\u5c08\u6848\u540d\u7a31 oc project <project-name> \u5207\u63db\u5230\u6307\u5b9a\u5c08\u6848 oc get project \u5217\u51fa\u53e2\u96c6\u4e2d\u6240\u6709\u5c08\u6848\uff08\u5c0d\u61c9 Kubernetes \u7684 Namespace\uff09 oc whoami \u986f\u793a\u76ee\u524d\u767b\u5165\u4f7f\u7528\u8005 oc version \u986f\u793a CLI \u8207\u4f3a\u670d\u5668\u7248\u672c oc login \u767b\u5165 OpenShift \u53e2\u96c6 oc logout \u767b\u51fa\u76ee\u524d\u9023\u7dda","title":"\ud83d\udfe9 \u57fa\u672c\u547d\u4ee4"},{"location":"ocp%E5%91%BD%E4%BB%A4/#_2","text":"\u547d\u4ee4 \u8aaa\u660e oc get pods -n <namespace> \u5217\u51fa\u6307\u5b9a Namespace \u4e2d\u6240\u6709 Pod \u72c0\u614b oc get pods -n <namespace> -o wide \u986f\u793a\u5b8c\u6574\u6b04\u4f4d\uff08\u5305\u542b IP\u3001\u7bc0\u9ede\uff09 oc get pods -A \u6216 oc get pods --all-namespaces \u67e5\u770b\u6240\u6709\u547d\u540d\u7a7a\u9593\u7684 Pod oc get pods -l <label>=<value> \u4ee5 label \u7be9\u9078 Pod oc describe pod <pod-name> -n <namespace> \u67e5\u770b\u55ae\u4e00 Pod \u8a73\u7d30\u8cc7\u8a0a\uff08\u4e8b\u4ef6\u3001\u5bb9\u5668\u72c0\u614b\uff09 oc get all -n <namespace> \u67e5\u770b\u547d\u540d\u7a7a\u9593\u5167\u6240\u6709\u4e3b\u8981\u8cc7\u6e90\uff08Pod\u3001Service\u3001Deployment\u3001ReplicaSet\uff09 oc describe <type> <name> -n <namespace> \u6aa2\u8996\u4efb\u4f55\u8cc7\u6e90\u7684\u8a73\u7d30\u4e8b\u4ef6\u8207\u8a2d\u5b9a oc get co \u67e5\u770b\u53e2\u96c6\u5c64\u7d1a Cluster Operators \u72c0\u614b\uff08\u7cfb\u7d71\u6838\u5fc3\u5143\u4ef6\uff09 oc get csv -A \u67e5\u770b\u6240\u6709\u547d\u540d\u7a7a\u9593\u7684 Operator\uff08OLM \u7ba1\u7406\uff09\u7248\u672c\u8207\u72c0\u614b oc get events -A --sort-by=.metadata.creationTimestamp \u67e5\u770b\u6240\u6709\u4e8b\u4ef6\uff08\u4f9d\u6642\u9593\u6392\u5e8f\uff09 oc get pods -w -n <namespace> \u76e3\u770b Pod \u72c0\u614b\u5373\u6642\u8b8a\u5316","title":"\ud83d\udfe6 \u6aa2\u8996\u8cc7\u6e90\u72c0\u614b"},{"location":"ocp%E5%91%BD%E4%BB%A4/#-aall-namespaces","text":"\u6307\u4ee4 \u529f\u80fd \u662f\u5426\u5141\u8a31 oc get pods -A \u67e5\u6240\u6709\u547d\u540d\u7a7a\u9593\u7684\u6240\u6709 Pod \u2705 \u5141\u8a31 oc get pod <pod-name> -A \u67e5\u55ae\u4e00 Pod \u8de8\u547d\u540d\u7a7a\u9593 \u274c \u4e0d\u5141\u8a31 oc describe pod <pod-name> -A \u67e5\u55ae\u4e00 Pod \u8a73\u7d30\u8cc7\u8a0a\u8de8\u547d\u540d\u7a7a\u9593 \u274c \u4e0d\u5141\u8a31 oc get pod <pod-name> -n <namespace> \u67e5\u55ae\u4e00\u547d\u540d\u7a7a\u9593\u5167 Pod \u2705 \u5141\u8a31 \ud83d\udcd8 Pod \u540d\u7a31\u4e0d\u662f\u5168\u57df\u552f\u4e00\uff0c\u4e0d\u540c Namespace \u53ef\u80fd\u5b58\u5728\u76f8\u540c Pod \u540d\uff0c\u56e0\u6b64\u7981\u6b62\u4ee5\u540d\u7a31\u8de8\u547d\u540d\u7a7a\u9593\u67e5\u8a62\u3002","title":"-A\uff08All Namespaces\uff09\u4f7f\u7528\u8aaa\u660e"},{"location":"ocp%E5%91%BD%E4%BB%A4/#pod-namespace","text":"oc get pods -A | grep <pod-name>","title":"\u67e5\u8a62 Pod \u6240\u5c6c Namespace"},{"location":"ocp%E5%91%BD%E4%BB%A4/#_3","text":"\u64cd\u4f5c \u6307\u4ee4 \u67e5 Pod \u8a73\u7d30\u8cc7\u8a0a oc get pod nginx-6f8565f9fc-8hb79 -n nginx-lab -o wide \u67e5\u4e8b\u4ef6\u8207\u5bb9\u5668\u72c0\u614b oc describe pod nginx-6f8565f9fc-8hb79 -n nginx-lab","title":"\ud83d\udd0d \u5e38\u7528\u67e5\u8a62\u6307\u4ee4\u5feb\u901f\u8868"},{"location":"ocp%E5%91%BD%E4%BB%A4/#_4","text":"\u6307\u4ee4 \u529f\u80fd oc get co \u6aa2\u67e5 OpenShift \u7cfb\u7d71\u5c64\u6838\u5fc3\u7d44\u4ef6\uff08\u5982 etcd\u3001kube-apiserver\u3001network\u3001machine-config\uff09 oc get csv \u67e5\u770b Operator Lifecycle Manager\uff08OLM\uff09\u7ba1\u7406\u7684\u61c9\u7528\u5c64 Operator\uff08\u5982 VPA\u3001PackageServer\uff09","title":"\ud83e\udde0 \u88dc\u5145\u8aaa\u660e"},{"location":"ocp%E5%91%BD%E4%BB%A4/#_5","text":"\u547d\u4ee4 \u8aaa\u660e oc logs pod/<pod-name> -n <namespace> \u986f\u793a Pod \u9810\u8a2d\u5bb9\u5668\u65e5\u8a8c oc logs pod/<pod-name> -c <container-name> -n <namespace> \u986f\u793a\u7279\u5b9a\u5bb9\u5668\u65e5\u8a8c\uff08\u591a\u5bb9\u5668 Pod \u4f7f\u7528\uff09 oc logs -f pod/<pod-name> -n <namespace> \u8ffd\u8e64\u5373\u6642\u8f38\u51fa\u65e5\u8a8c oc exec -it pod/<pod-name> -n <namespace> -- /bin/sh \u9032\u5165\u5bb9\u5668 Shell oc rsh pod/<pod-name> -n <namespace> \u4f7f\u7528\u9060\u7aef Shell \u767b\u5165 Pod oc cp <namespace>/<pod-name>:<path> <local-path> \u5f9e Pod \u8907\u88fd\u6a94\u6848\u81f3\u672c\u5730 oc cp <local-path> <namespace>/<pod-name>:<path> \u5f9e\u672c\u5730\u8907\u88fd\u6a94\u6848\u81f3 Pod","title":"\ud83d\udfe8 \u65e5\u8a8c\u8207\u5bb9\u5668\u4e92\u52d5"},{"location":"ocp%E5%91%BD%E4%BB%A4/#_6","text":"\u547d\u4ee4 \u8aaa\u660e oc get nodes \u5217\u51fa\u6240\u6709\u7bc0\u9ede oc describe node <node-name> \u67e5\u770b\u7bc0\u9ede\u8a73\u60c5\uff08\u689d\u4ef6\u3001taints\u3001\u5bb9\u91cf\u7b49\uff09 oc adm top nodes \u67e5\u770b\u7bc0\u9ede CPU\uff0f\u8a18\u61b6\u9ad4\u4f7f\u7528\u91cf oc adm top pods -n <namespace> \u67e5\u770b\u547d\u540d\u7a7a\u9593\u4e2d Pod \u7684\u8cc7\u6e90\u4f7f\u7528\u60c5\u6cc1 oc get clusteroperators \u7b49\u540c oc get co \uff0c\u6aa2\u67e5\u7cfb\u7d71\u6838\u5fc3 Operator \u72c0\u614b oc get clusterversion \u67e5\u770b\u6574\u9ad4 OpenShift \u7248\u672c\u8207\u5347\u7d1a\u72c0\u614b oc get mcp \u67e5\u770b MachineConfigPool \u72c0\u614b oc get mcd -A \u67e5\u770b MachineConfigDaemon \u72c0\u614b oc adm node-logs --role=<master|worker> -u <systemd_unit> \u6293\u53d6\u7bc0\u9ede systemd \u55ae\u5143\u65e5\u8a8c oc adm node-logs --role=master --path=<path_under_/var/log> \u6307\u5b9a\u8def\u5f91\u6293\u53d6\u7bc0\u9ede\u65e5\u8a8c","title":"\ud83d\udfe5 \u7bc0\u9ede\u8207\u53e2\u96c6\u6aa2\u67e5"},{"location":"ocp%E5%91%BD%E4%BB%A4/#_7","text":"\u547d\u4ee4 \u8aaa\u660e oc api-resources \u5217\u51fa\u53e2\u96c6\u652f\u63f4\u7684\u6240\u6709 API \u8cc7\u6e90\u7a2e\u985e oc api-versions \u986f\u793a\u53e2\u96c6\u652f\u63f4\u7684 API \u7248\u672c oc explain <resource> \u67e5\u770b\u8cc7\u6e90\u7d50\u69cb\u8207\u6b04\u4f4d\u8aaa\u660e oc explain deployment.spec.template.spec.containers \u67e5\u770b Deployment \u4e2d\u5bb9\u5668\u8a2d\u5b9a\u7684\u8a73\u7d30\u7d50\u69cb oc get pods -o custom-columns=POD:.metadata.name,NODE:.spec.nodeName \u81ea\u8a02\u8f38\u51fa\u6b04\u4f4d\u986f\u793a Pod \u8207\u6240\u5c6c\u7bc0\u9ede oc adm release info \u986f\u793a\u76ee\u524d OpenShift \u767c\u884c\u7248\u672c\u8cc7\u8a0a oc adm release extract --tools \u63d0\u53d6 release \u7248\u672c\u4e2d\u5305\u542b\u7684 CLI \u5de5\u5177","title":"\ud83d\udfea \u9032\u968e\uff0f\u5de5\u5177\u6027\u547d\u4ee4"},{"location":"ocp%E5%91%BD%E4%BB%A4/#_8","text":"\u64cd\u4f5c\u76ee\u7684 \u5c0d\u61c9\u6307\u4ee4 \u67e5\u770b\u7cfb\u7d71\u6838\u5fc3\u5143\u4ef6\u72c0\u614b oc get co \u67e5\u770b Operator \u72c0\u614b oc get csv -A \u67e5\u770b\u7bc0\u9ede\u4f7f\u7528\u7387 oc adm top nodes \u6aa2\u67e5\u5347\u7d1a\u72c0\u614b oc get clusterversion \u67e5\u770b\u7bc0\u9ede\u65e5\u8a8c oc adm node-logs --role=master -u crio \u8ffd\u8e64 Pod \u555f\u52d5\u65e5\u8a8c oc logs -f pod/<pod-name> -n <namespace>","title":"\ud83e\udde9 \u5e38\u898b\u64cd\u4f5c\u6574\u5408"},{"location":"ocp%E5%91%BD%E4%BB%A4/#openshift-kubernetes","text":"\u5b8c\u6574\u540d\u7a31 (Full Name) \u53ef\u7528\u7e2e\u5beb (Short Name) Pod po Service svc ConfigMap cm Secret sec Deployment (\u7121\uff0c\u9700\u5b8c\u6574\u5beb) ReplicaSet rs Namespace ns PersistentVolumeClaim (PVC) pvc Node no Job (\u7121\uff0c\u9700\u5b8c\u6574\u5beb) DaemonSet ds","title":"OpenShift / Kubernetes \u5e38\u898b\u8cc7\u6e90\u7e2e\u5beb\u5c0d\u7167\u8868"},{"location":"ocp%E5%91%BD%E4%BB%A4/#_9","text":"# \u67e5\u770b Pod oc get po # \u67e5\u770b Service oc get svc # \u67e5\u770b ConfigMap oc get cm # \u67e5\u770b Deployment\uff08\u7121\u7e2e\u5beb\uff09 oc get deployment","title":"\ud83d\udcd8 \u4f7f\u7528\u7bc4\u4f8b"},{"location":"ocp%E5%91%BD%E4%BB%A4/#k8s","text":"","title":"k8s\u547d\u4ee4"},{"location":"ocp%E5%91%BD%E4%BB%A4/#kubectl-apply-dry-run","text":"","title":"kubectl apply --dry-run \u7528\u6cd5"},{"location":"ocp%E5%91%BD%E4%BB%A4/#_10","text":"\u6307\u4ee4 \u884c\u70ba\u63cf\u8ff0 \u662f\u5426\u9001\u5230 API Server \u662f\u5426\u8dd1 Webhook\uff08Mutating/Validating\uff09 \u662f\u5426\u9700\u8981 CRD \u5df2\u5b58\u5728 \u662f\u5426\u5beb\u5165 etcd kubectl apply -f x.yaml --dry-run=client \u672c\u5730\u7aef\u6aa2\u67e5 YAML \uff0c\u53ea\u505a\u8a9e\u6cd5\u8207\u57fa\u672c\u6b04\u4f4d\u9a57\u8b49 \u5426 \u5426 \u5426\uff08\u4f46\u4e0d\u8a8d\u8b58 CRD \u6703\u76f4\u63a5\u5831\u932f\uff09 \u5426 kubectl apply -f x.yaml --dry-run=server \u9001 API Server \u505a\u5b8c\u6574\u9a57\u8b49 \uff08schema\u3001CRD\u3001RBAC\uff09 \u662f \u662f \u662f \u5426 kubectl apply -f x.yaml --dry-run=server -o yaml \u9001 API Server \u6a21\u64ec\u5efa\u7acb\uff0c\u8f38\u51fa mutate \u5f8c\u6700\u7d42\u7269\u4ef6 \u662f \u662f \u662f \u5426","title":"\u6307\u4ee4\u8207\u884c\u70ba\u4e00\u6b21\u770b\u61c2"},{"location":"operator%E4%BB%8B%E7%B4%B9/","text":"\ud83e\uddf1 Operator Framework \u67b6\u69cb\u8207 OLM \u5b89\u88dd\u6d41\u7a0b\uff08\u5b8c\u6574 Markdown \u6a94\u6848\uff09 \u4e00\u3001Operator Framework \u67b6\u69cb\u6982\u89c0 Operator Framework \u662f Red Hat \u8207\u793e\u7fa4\u5171\u540c\u7dad\u8b77\u7684\u4e00\u5957\u958b\u6e90\u5de5\u5177\u96c6\uff0c \u76ee\u7684\u662f\u8b93\u958b\u767c\u8005\u80fd\u4ee5\u4e00\u81f4\u65b9\u5f0f \u958b\u767c\u3001\u5c01\u88dd\u3001\u767c\u4f48\u3001\u5b89\u88dd\u8207\u7ba1\u7406 Operator \u3002 \u6574\u9ad4\u7d50\u69cb\u5982\u4e0b\uff1a \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Operator Framework \u2502 \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Operator SDK \u2502\u2192 \u2502 Operator Image\u2502 \u2502 \u2502 \u5efa\u7acb\u8207\u6253\u5305 \u2502 \u2502 (bundle.csv) \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u25bc \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Operator Registry \u2502 \u2502 \u2502 (Catalog Image) \u2502 \u2502 \u2502 \u5b58\u653e CSV\u3001CRD \u8cc7\u8a0a \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u25bc \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Operator Lifecycle Manager \u2502 \u2502 \u2502 \u63a7\u5236\u5b89\u88dd\u3001\u5347\u7d1a\u3001\u6388\u6b0a\u3001\u4f9d\u8cf4 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u25bc \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 OperatorHub \u2502 \u2502 \u2502 Web UI \u2192 \u5b89\u88dd/\u67e5\u8a62 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u6a21\u7d44\u8aaa\u660e \u5143\u4ef6 \u529f\u80fd\u8aaa\u660e Operator SDK \u63d0\u4f9b\u958b\u767c\u6846\u67b6\u8207\u5de5\u5177\uff08\u652f\u63f4 Go\u3001Ansible\u3001Helm\uff09\uff0c\u7528\u4f86\u64b0\u5beb Operator \u7a0b\u5f0f\u8207\u6253\u5305\u6210 Bundle Image\u3002 Operator Registry \u5c07\u591a\u500b Bundle Image \u5f59\u6574\u70ba Catalog Image\uff0c\u4e26\u63d0\u4f9b\u7d66\u53e2\u96c6\u4e2d\u7684 OLM \u67e5\u8a62\u4f7f\u7528\u3002 Operator Lifecycle Manager\uff08OLM\uff09 \u6838\u5fc3\u63a7\u5236\u5668\uff0c\u8ca0\u8cac Operator \u7684\u5b89\u88dd\u3001\u5347\u7d1a\u3001\u6388\u6b0a\u8207\u4f9d\u8cf4\u7ba1\u7406\u3002 OperatorHub Web \u4ecb\u9762\uff0c\u8b93\u4f7f\u7528\u8005\u5728 OCP Console \u4e0a\u53ef\u8996\u5316\u5730\u641c\u5c0b\u3001\u5b89\u88dd Operator\u3002 \u4e8c\u3001OpenShift Operator \u5b89\u88dd\u6d41\u7a0b\uff08\u5be6\u52d9\u908f\u8f2f\uff09 \u6838\u5fc3\u6982\u5ff5\uff1a OpenShift \u4e0d\u76f4\u63a5\u5e6b\u4f60\u5b89\u88dd App\u3002 \u5b83\u900f\u904e Operator\uff08\u5c0f\u5e6b\u624b\uff09 \u53bb\u5e6b\u4f60\u81ea\u52d5\u5b89\u88dd\u3001\u76e3\u63a7\u8207\u7dad\u8b77 App\u3002 \u6574\u689d\u93c8\u8def\u662f\uff1a \u4f60\uff08\u7ba1\u7406\u54e1\uff09 \u2192 OLM\uff08\u63a7\u5236\u5c64\uff09 \u2192 Operator\uff08\u5c0f\u5e6b\u624b\uff09 \u2192 App\uff08\u6700\u7d42\u61c9\u7528\uff09 \u2460 CatalogSource\uff08\u6e05\u55ae\u4f86\u6e90\uff09 \u4f5c\u7528 - \u63d0\u4f9b OLM \u4e00\u500b\u67e5\u8a62\u4f86\u6e90\uff0c\u8b93\u5b83\u77e5\u9053\u6709\u54ea\u4e9b\u53ef\u7528\u7684 Operator\u3001\u7248\u672c\u8207\u63cf\u8ff0\u8cc7\u8a0a\u3002 - CatalogSource \u6307\u5411\u4e00\u500b\u300cCatalog Image\u300d\uff08index image\uff09\uff0cOCP \u6703\u5728 openshift-marketplace \u555f\u52d5\u4e00\u500b Pod \u63d0\u4f9b gRPC \u670d\u52d9\u3002 \u5be6\u52d9\u8a2d\u5b9a harbor.com/darren-lab/olm-redhat-operator-index:v4.12 \u7d50\u679c - \u7cfb\u7d71\u555f\u52d5\u4e00\u500b Pod\uff0cOLM \u53ef\u900f\u904e\u5b83\u67e5\u8a62 Operator \u6e05\u55ae\u8207\u7248\u672c\u3002 \u4e00\u53e5\u8a71 CatalogSource = Operator \u7684\u300cApp \u5546\u5e97\u4f3a\u670d\u5668\u300d\u3002 \u2461 Subscription\uff08\u4e0b\u55ae\uff09 \u4f5c\u7528 - \u544a\u8a34 OLM\uff1a\u300c\u6211\u8981\u54ea\u500b Operator\u3001\u5f9e\u54ea\u500b Catalog \u5b89\u88dd\u3001\u8981\u4e0d\u8981\u81ea\u52d5\u66f4\u65b0\u3002\u300d \u5167\u5bb9\u5305\u542b - Operator \u540d\u7a31\uff08name\uff09 - \u4f86\u6e90 Catalog\uff08source\u3001sourceNamespace\uff09 - \u983b\u9053\uff08channel\uff09 - \u5b89\u88dd\u6279\u51c6\u6a21\u5f0f\uff08installPlanApproval: Automatic / Manual\uff09 \u7bc4\u4f8b apiVersion: operators.coreos.com/v1alpha1 kind: Subscription metadata: name: vertical-pod-autoscaler namespace: vertical-pod-autoscaler spec: channel: stable name: vertical-pod-autoscaler source: olm-redhat-operator-index sourceNamespace: openshift-marketplace installPlanApproval: Automatic \u4e00\u53e5\u8a71 Subscription = \u4f60\u6309\u4e0b\u300c\u6211\u8981\u88dd\u9019\u500b Operator\u300d\u7684\u8a02\u55ae\u3002 \u2462 InstallPlan\uff08\u65bd\u5de5\u85cd\u5716\uff09 \u4f5c\u7528 - \u7576 Subscription \u88ab\u5efa\u7acb\u5f8c\uff0cOLM \u6703\u81ea\u52d5\u7522\u751f\u4e00\u500b InstallPlan\u3002 - InstallPlan \u662f\u4e00\u4efd\u300c\u5b89\u88dd\u85cd\u5716\u300d\uff0c\u5217\u51fa\u8981\u5efa\u7acb\u7684\u6240\u6709\u7269\u4ef6\uff08CRD\u3001RBAC\u3001Deployment\u3001CSV\uff09\u3002 \u81ea\u52d5\u8207\u624b\u52d5\u5dee\u7570 - \u82e5 Subscription \u8a2d\u70ba Automatic \u2192 InstallPlan \u6703\u81ea\u52d5\u6279\u51c6\u4e26\u57f7\u884c\u3002 - \u82e5\u8a2d\u70ba Manual \u2192 \u9700\u8981\u624b\u52d5 Approve\u3002 \u67e5\u8a62\u65b9\u5f0f oc get installplan -n <namespace> oc describe installplan <installplan-name> -n <namespace> \u7bc4\u4f8b\u8f38\u51fa Name: install-vpa-abcde Namespace: vertical-pod-autoscaler Approval: Automatic Phase: Complete CSV: verticalpodautoscaler.4.12.x \u4e00\u53e5\u8a71 InstallPlan = OLM \u81ea\u52d5\u7522\u751f\u7684\u5b89\u88dd\u8173\u672c\uff0c\u6c7a\u5b9a\u8981\u88dd\u4ec0\u9ebc\u3001\u600e\u9ebc\u88dd\u3002 \u2463 ClusterServiceVersion\uff08CSV\uff0c\u8aaa\u660e\u66f8\uff09 \u4f5c\u7528 - \u5b9a\u7fa9\u6b64\u7248\u672c Operator \u7684\u5168\u90e8\u5167\u5bb9\uff0c\u5305\u62ec\uff1a - \u8981\u555f\u52d5\u54ea\u4e9b Deployment\uff08Pod\uff09 - \u8981\u5efa\u7acb\u54ea\u4e9b CRD\uff08\u529f\u80fd\uff09 - \u8981\u54ea\u4e9b RBAC \u6b0a\u9650 - Operator \u7684\u7248\u672c\u8cc7\u8a0a\u8207\u63cf\u8ff0 CSV \u72c0\u614b\u8f49\u63db - Pending \u2192 Installing \u2192 Succeeded \u7576 CSV \u8b8a\u6210 Succeeded \uff0c\u4ee3\u8868 Operator \u5df2\u6210\u529f\u90e8\u7f72\u4e26\u555f\u52d5\u3002 \u4e00\u53e5\u8a71 CSV = Operator \u7684\u300c\u7248\u672c\u8aaa\u660e\u66f8\u300d\uff0cOLM \u7167\u5b83\u555f\u52d5\u670d\u52d9\u3002 \u2464 Operator Ready\uff08\u53ef\u7528\uff09 \u7d50\u679c - \u7576 CSV \u70ba Succeeded \uff0cOperator \u5df2\u555f\u52d5\u4e26\u904b\u4f5c\u3002 - \u7cfb\u7d71\u4e2d\u6703\u65b0\u589e\u65b0\u7684 CRD\uff0c\u53ef\u5efa\u7acb\u5c0d\u61c9 CR \u7269\u4ef6\u4f7f\u7528\u529f\u80fd\u3002 \u4f8b\u5b50 oc get VerticalPodAutoscaler \u4e00\u53e5\u8a71 Operator Ready = \u5c0f\u5e6b\u624b\u6b63\u5f0f\u4e0a\u73ed\uff0c\u958b\u59cb\u5e6b\u4f60\u7ba1\u7406\u61c9\u7528\u3002 \u4e09\u3001\u751f\u6d3b\u6bd4\u55bb\u5c0d\u7167\u8868 \u968e\u6bb5 \u6bd4\u55bb \u4ee3\u8868\u610f\u7fa9 CatalogSource App \u5546\u5e97\u6e05\u55ae \u544a\u8a34\u7cfb\u7d71\u6709\u54ea\u4e9b Operator \u53ef\u5b89\u88dd Subscription \u4f60\u5728\u5546\u5e97\u6309\u4e0b\u300c\u5b89\u88dd\u300d \u6307\u5b9a\u8981\u5b89\u88dd\u54ea\u500b Operator InstallPlan \u80cc\u666f\u5b89\u88dd\u6d41\u7a0b \u5217\u51fa\u4e26\u57f7\u884c\u5b89\u88dd\u6b65\u9a5f CSV \u5b89\u88dd\u8aaa\u660e\u66f8 Operator \u7684\u7248\u672c\u8207\u904b\u4f5c\u898f\u683c Operator Ready App \u53ef\u4f7f\u7528 Operator \u904b\u4f5c\u4e2d\uff0c\u53ef\u5efa\u7acb CR \u4f7f\u7528\u529f\u80fd \u56db\u3001\u5b8c\u6574\u6d41\u7a0b\u7e3d\u7d50 CatalogSource \uff1a\u63d0\u4f9b OLM \u53ef\u67e5\u8a62\u7684 Operator \u6e05\u55ae\u4f86\u6e90\u3002 Subscription \uff1a\u4f7f\u7528\u8005\u9078\u64c7\u8981\u5b89\u88dd\u7684 Operator\uff0c\u4e26\u8a2d\u5b9a\u66f4\u65b0\u65b9\u5f0f\u3002 InstallPlan \uff1aOLM \u6839\u64da Subscription \u81ea\u52d5\u7522\u751f\u7684\u5b89\u88dd\u8a08\u756b\u3002 CSV \uff1a\u63cf\u8ff0 Operator \u7684\u7248\u672c\u8207\u884c\u70ba\uff0cOLM \u4f9d\u6b64\u555f\u52d5\u670d\u52d9\u3002 Operator Ready \uff1aOperator \u555f\u52d5\u5b8c\u6210\uff0c\u53ef\u63d0\u4f9b CRD \u529f\u80fd\u3002 \u4e94\u300110 \u79d2\u8a18\u61b6\u53e3\u8a23 \u6e05\u55ae \u2192 \u4e0b\u55ae \u2192 \u65bd\u5de5 \u2192 \u8aaa\u660e\u66f8 \u2192 \u53ef\u7528 \uff08CatalogSource \u2192 Subscription \u2192 InstallPlan \u2192 CSV \u2192 Ready\uff09 \u516d\u3001\u91cd\u9ede\u88dc\u5145\uff08\u6280\u8853\u5c64\u9762\uff09 \u540d\u7a31 \u5efa\u7acb\u8005 Namespace \u662f\u5426\u624b\u52d5 \u529f\u80fd CatalogSource \u7ba1\u7406\u54e1 openshift-marketplace \u624b\u52d5\u5efa\u7acb \u63d0\u4f9b Catalog Image \u4f86\u6e90 Subscription \u7ba1\u7406\u54e1 \u61c9\u7528 Namespace \u624b\u52d5\u5efa\u7acb \u6307\u5b9a\u8981\u5b89\u88dd\u54ea\u500b Operator InstallPlan OLM \u81ea\u52d5\u7522\u751f \u540c Subscription \u81ea\u52d5\u6216\u624b\u52d5\u6279\u51c6 \u5be6\u969b\u57f7\u884c\u5b89\u88dd\u4efb\u52d9 CSV OLM \u81ea\u52d5\u7522\u751f \u540c Subscription \u81ea\u52d5 Operator \u7684\u7248\u672c\u63a7\u5236\u8207\u8aaa\u660e Operator Pod OLM \u5efa\u7acb \u540c Namespace \u81ea\u52d5 \u771f\u6b63\u57f7\u884c Operator \u7a0b\u5f0f \u4e03\u3001\u5b8c\u6574\u6d41\u7a0b\u5716\uff08\u908f\u8f2f\u95dc\u4fc2\uff09 CatalogSource (index image) \u2502 \u25bc Subscription (\u4f60\u4e0b\u55ae) \u2502 \u25bc InstallPlan (OLM \u81ea\u52d5\u7522\u751f) \u2502 \u25bc CSV (\u8aaa\u660e\u66f8) \u2502 \u25bc Operator Pod \u555f\u52d5 \u2502 \u25bc App / CR \u53ef\u7528 \u7e3d\u7d50\u4e00\u53e5\u8a71\uff1a \u4f60\u53ea\u9700\u8981\u624b\u52d5\u5efa\u7acb CatalogSource \u8207 Subscription\uff0c \u5176\u9918 InstallPlan\u3001CSV\u3001Operator Pod \u7686\u7531 OLM \u81ea\u52d5\u63a5\u624b\u5b8c\u6210\u5b89\u88dd\u8207\u555f\u52d5\u3002\u3002","title":"operator\u4ecb\u7d39"},{"location":"operator%E4%BB%8B%E7%B4%B9/#operator-framework-olm-markdown","text":"","title":"\ud83e\uddf1 Operator Framework \u67b6\u69cb\u8207 OLM \u5b89\u88dd\u6d41\u7a0b\uff08\u5b8c\u6574 Markdown \u6a94\u6848\uff09"},{"location":"operator%E4%BB%8B%E7%B4%B9/#operator-framework","text":"Operator Framework \u662f Red Hat \u8207\u793e\u7fa4\u5171\u540c\u7dad\u8b77\u7684\u4e00\u5957\u958b\u6e90\u5de5\u5177\u96c6\uff0c \u76ee\u7684\u662f\u8b93\u958b\u767c\u8005\u80fd\u4ee5\u4e00\u81f4\u65b9\u5f0f \u958b\u767c\u3001\u5c01\u88dd\u3001\u767c\u4f48\u3001\u5b89\u88dd\u8207\u7ba1\u7406 Operator \u3002 \u6574\u9ad4\u7d50\u69cb\u5982\u4e0b\uff1a \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Operator Framework \u2502 \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Operator SDK \u2502\u2192 \u2502 Operator Image\u2502 \u2502 \u2502 \u5efa\u7acb\u8207\u6253\u5305 \u2502 \u2502 (bundle.csv) \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u25bc \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Operator Registry \u2502 \u2502 \u2502 (Catalog Image) \u2502 \u2502 \u2502 \u5b58\u653e CSV\u3001CRD \u8cc7\u8a0a \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u25bc \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Operator Lifecycle Manager \u2502 \u2502 \u2502 \u63a7\u5236\u5b89\u88dd\u3001\u5347\u7d1a\u3001\u6388\u6b0a\u3001\u4f9d\u8cf4 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u25bc \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 OperatorHub \u2502 \u2502 \u2502 Web UI \u2192 \u5b89\u88dd/\u67e5\u8a62 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518","title":"\u4e00\u3001Operator Framework \u67b6\u69cb\u6982\u89c0"},{"location":"operator%E4%BB%8B%E7%B4%B9/#_1","text":"\u5143\u4ef6 \u529f\u80fd\u8aaa\u660e Operator SDK \u63d0\u4f9b\u958b\u767c\u6846\u67b6\u8207\u5de5\u5177\uff08\u652f\u63f4 Go\u3001Ansible\u3001Helm\uff09\uff0c\u7528\u4f86\u64b0\u5beb Operator \u7a0b\u5f0f\u8207\u6253\u5305\u6210 Bundle Image\u3002 Operator Registry \u5c07\u591a\u500b Bundle Image \u5f59\u6574\u70ba Catalog Image\uff0c\u4e26\u63d0\u4f9b\u7d66\u53e2\u96c6\u4e2d\u7684 OLM \u67e5\u8a62\u4f7f\u7528\u3002 Operator Lifecycle Manager\uff08OLM\uff09 \u6838\u5fc3\u63a7\u5236\u5668\uff0c\u8ca0\u8cac Operator \u7684\u5b89\u88dd\u3001\u5347\u7d1a\u3001\u6388\u6b0a\u8207\u4f9d\u8cf4\u7ba1\u7406\u3002 OperatorHub Web \u4ecb\u9762\uff0c\u8b93\u4f7f\u7528\u8005\u5728 OCP Console \u4e0a\u53ef\u8996\u5316\u5730\u641c\u5c0b\u3001\u5b89\u88dd Operator\u3002","title":"\u6a21\u7d44\u8aaa\u660e"},{"location":"operator%E4%BB%8B%E7%B4%B9/#openshift-operator","text":"\u6838\u5fc3\u6982\u5ff5\uff1a OpenShift \u4e0d\u76f4\u63a5\u5e6b\u4f60\u5b89\u88dd App\u3002 \u5b83\u900f\u904e Operator\uff08\u5c0f\u5e6b\u624b\uff09 \u53bb\u5e6b\u4f60\u81ea\u52d5\u5b89\u88dd\u3001\u76e3\u63a7\u8207\u7dad\u8b77 App\u3002 \u6574\u689d\u93c8\u8def\u662f\uff1a \u4f60\uff08\u7ba1\u7406\u54e1\uff09 \u2192 OLM\uff08\u63a7\u5236\u5c64\uff09 \u2192 Operator\uff08\u5c0f\u5e6b\u624b\uff09 \u2192 App\uff08\u6700\u7d42\u61c9\u7528\uff09","title":"\u4e8c\u3001OpenShift Operator \u5b89\u88dd\u6d41\u7a0b\uff08\u5be6\u52d9\u908f\u8f2f\uff09"},{"location":"operator%E4%BB%8B%E7%B4%B9/#1-catalogsource","text":"\u4f5c\u7528 - \u63d0\u4f9b OLM \u4e00\u500b\u67e5\u8a62\u4f86\u6e90\uff0c\u8b93\u5b83\u77e5\u9053\u6709\u54ea\u4e9b\u53ef\u7528\u7684 Operator\u3001\u7248\u672c\u8207\u63cf\u8ff0\u8cc7\u8a0a\u3002 - CatalogSource \u6307\u5411\u4e00\u500b\u300cCatalog Image\u300d\uff08index image\uff09\uff0cOCP \u6703\u5728 openshift-marketplace \u555f\u52d5\u4e00\u500b Pod \u63d0\u4f9b gRPC \u670d\u52d9\u3002 \u5be6\u52d9\u8a2d\u5b9a harbor.com/darren-lab/olm-redhat-operator-index:v4.12 \u7d50\u679c - \u7cfb\u7d71\u555f\u52d5\u4e00\u500b Pod\uff0cOLM \u53ef\u900f\u904e\u5b83\u67e5\u8a62 Operator \u6e05\u55ae\u8207\u7248\u672c\u3002 \u4e00\u53e5\u8a71 CatalogSource = Operator \u7684\u300cApp \u5546\u5e97\u4f3a\u670d\u5668\u300d\u3002","title":"\u2460 CatalogSource\uff08\u6e05\u55ae\u4f86\u6e90\uff09"},{"location":"operator%E4%BB%8B%E7%B4%B9/#2-subscription","text":"\u4f5c\u7528 - \u544a\u8a34 OLM\uff1a\u300c\u6211\u8981\u54ea\u500b Operator\u3001\u5f9e\u54ea\u500b Catalog \u5b89\u88dd\u3001\u8981\u4e0d\u8981\u81ea\u52d5\u66f4\u65b0\u3002\u300d \u5167\u5bb9\u5305\u542b - Operator \u540d\u7a31\uff08name\uff09 - \u4f86\u6e90 Catalog\uff08source\u3001sourceNamespace\uff09 - \u983b\u9053\uff08channel\uff09 - \u5b89\u88dd\u6279\u51c6\u6a21\u5f0f\uff08installPlanApproval: Automatic / Manual\uff09 \u7bc4\u4f8b apiVersion: operators.coreos.com/v1alpha1 kind: Subscription metadata: name: vertical-pod-autoscaler namespace: vertical-pod-autoscaler spec: channel: stable name: vertical-pod-autoscaler source: olm-redhat-operator-index sourceNamespace: openshift-marketplace installPlanApproval: Automatic \u4e00\u53e5\u8a71 Subscription = \u4f60\u6309\u4e0b\u300c\u6211\u8981\u88dd\u9019\u500b Operator\u300d\u7684\u8a02\u55ae\u3002","title":"\u2461 Subscription\uff08\u4e0b\u55ae\uff09"},{"location":"operator%E4%BB%8B%E7%B4%B9/#3-installplan","text":"\u4f5c\u7528 - \u7576 Subscription \u88ab\u5efa\u7acb\u5f8c\uff0cOLM \u6703\u81ea\u52d5\u7522\u751f\u4e00\u500b InstallPlan\u3002 - InstallPlan \u662f\u4e00\u4efd\u300c\u5b89\u88dd\u85cd\u5716\u300d\uff0c\u5217\u51fa\u8981\u5efa\u7acb\u7684\u6240\u6709\u7269\u4ef6\uff08CRD\u3001RBAC\u3001Deployment\u3001CSV\uff09\u3002 \u81ea\u52d5\u8207\u624b\u52d5\u5dee\u7570 - \u82e5 Subscription \u8a2d\u70ba Automatic \u2192 InstallPlan \u6703\u81ea\u52d5\u6279\u51c6\u4e26\u57f7\u884c\u3002 - \u82e5\u8a2d\u70ba Manual \u2192 \u9700\u8981\u624b\u52d5 Approve\u3002 \u67e5\u8a62\u65b9\u5f0f oc get installplan -n <namespace> oc describe installplan <installplan-name> -n <namespace> \u7bc4\u4f8b\u8f38\u51fa Name: install-vpa-abcde Namespace: vertical-pod-autoscaler Approval: Automatic Phase: Complete CSV: verticalpodautoscaler.4.12.x \u4e00\u53e5\u8a71 InstallPlan = OLM \u81ea\u52d5\u7522\u751f\u7684\u5b89\u88dd\u8173\u672c\uff0c\u6c7a\u5b9a\u8981\u88dd\u4ec0\u9ebc\u3001\u600e\u9ebc\u88dd\u3002","title":"\u2462 InstallPlan\uff08\u65bd\u5de5\u85cd\u5716\uff09"},{"location":"operator%E4%BB%8B%E7%B4%B9/#4-clusterserviceversioncsv","text":"\u4f5c\u7528 - \u5b9a\u7fa9\u6b64\u7248\u672c Operator \u7684\u5168\u90e8\u5167\u5bb9\uff0c\u5305\u62ec\uff1a - \u8981\u555f\u52d5\u54ea\u4e9b Deployment\uff08Pod\uff09 - \u8981\u5efa\u7acb\u54ea\u4e9b CRD\uff08\u529f\u80fd\uff09 - \u8981\u54ea\u4e9b RBAC \u6b0a\u9650 - Operator \u7684\u7248\u672c\u8cc7\u8a0a\u8207\u63cf\u8ff0 CSV \u72c0\u614b\u8f49\u63db - Pending \u2192 Installing \u2192 Succeeded \u7576 CSV \u8b8a\u6210 Succeeded \uff0c\u4ee3\u8868 Operator \u5df2\u6210\u529f\u90e8\u7f72\u4e26\u555f\u52d5\u3002 \u4e00\u53e5\u8a71 CSV = Operator \u7684\u300c\u7248\u672c\u8aaa\u660e\u66f8\u300d\uff0cOLM \u7167\u5b83\u555f\u52d5\u670d\u52d9\u3002","title":"\u2463 ClusterServiceVersion\uff08CSV\uff0c\u8aaa\u660e\u66f8\uff09"},{"location":"operator%E4%BB%8B%E7%B4%B9/#5-operator-ready","text":"\u7d50\u679c - \u7576 CSV \u70ba Succeeded \uff0cOperator \u5df2\u555f\u52d5\u4e26\u904b\u4f5c\u3002 - \u7cfb\u7d71\u4e2d\u6703\u65b0\u589e\u65b0\u7684 CRD\uff0c\u53ef\u5efa\u7acb\u5c0d\u61c9 CR \u7269\u4ef6\u4f7f\u7528\u529f\u80fd\u3002 \u4f8b\u5b50 oc get VerticalPodAutoscaler \u4e00\u53e5\u8a71 Operator Ready = \u5c0f\u5e6b\u624b\u6b63\u5f0f\u4e0a\u73ed\uff0c\u958b\u59cb\u5e6b\u4f60\u7ba1\u7406\u61c9\u7528\u3002","title":"\u2464 Operator Ready\uff08\u53ef\u7528\uff09"},{"location":"operator%E4%BB%8B%E7%B4%B9/#_2","text":"\u968e\u6bb5 \u6bd4\u55bb \u4ee3\u8868\u610f\u7fa9 CatalogSource App \u5546\u5e97\u6e05\u55ae \u544a\u8a34\u7cfb\u7d71\u6709\u54ea\u4e9b Operator \u53ef\u5b89\u88dd Subscription \u4f60\u5728\u5546\u5e97\u6309\u4e0b\u300c\u5b89\u88dd\u300d \u6307\u5b9a\u8981\u5b89\u88dd\u54ea\u500b Operator InstallPlan \u80cc\u666f\u5b89\u88dd\u6d41\u7a0b \u5217\u51fa\u4e26\u57f7\u884c\u5b89\u88dd\u6b65\u9a5f CSV \u5b89\u88dd\u8aaa\u660e\u66f8 Operator \u7684\u7248\u672c\u8207\u904b\u4f5c\u898f\u683c Operator Ready App \u53ef\u4f7f\u7528 Operator \u904b\u4f5c\u4e2d\uff0c\u53ef\u5efa\u7acb CR \u4f7f\u7528\u529f\u80fd","title":"\u4e09\u3001\u751f\u6d3b\u6bd4\u55bb\u5c0d\u7167\u8868"},{"location":"operator%E4%BB%8B%E7%B4%B9/#_3","text":"CatalogSource \uff1a\u63d0\u4f9b OLM \u53ef\u67e5\u8a62\u7684 Operator \u6e05\u55ae\u4f86\u6e90\u3002 Subscription \uff1a\u4f7f\u7528\u8005\u9078\u64c7\u8981\u5b89\u88dd\u7684 Operator\uff0c\u4e26\u8a2d\u5b9a\u66f4\u65b0\u65b9\u5f0f\u3002 InstallPlan \uff1aOLM \u6839\u64da Subscription \u81ea\u52d5\u7522\u751f\u7684\u5b89\u88dd\u8a08\u756b\u3002 CSV \uff1a\u63cf\u8ff0 Operator \u7684\u7248\u672c\u8207\u884c\u70ba\uff0cOLM \u4f9d\u6b64\u555f\u52d5\u670d\u52d9\u3002 Operator Ready \uff1aOperator \u555f\u52d5\u5b8c\u6210\uff0c\u53ef\u63d0\u4f9b CRD \u529f\u80fd\u3002","title":"\u56db\u3001\u5b8c\u6574\u6d41\u7a0b\u7e3d\u7d50"},{"location":"operator%E4%BB%8B%E7%B4%B9/#10","text":"\u6e05\u55ae \u2192 \u4e0b\u55ae \u2192 \u65bd\u5de5 \u2192 \u8aaa\u660e\u66f8 \u2192 \u53ef\u7528 \uff08CatalogSource \u2192 Subscription \u2192 InstallPlan \u2192 CSV \u2192 Ready\uff09","title":"\u4e94\u300110 \u79d2\u8a18\u61b6\u53e3\u8a23"},{"location":"operator%E4%BB%8B%E7%B4%B9/#_4","text":"\u540d\u7a31 \u5efa\u7acb\u8005 Namespace \u662f\u5426\u624b\u52d5 \u529f\u80fd CatalogSource \u7ba1\u7406\u54e1 openshift-marketplace \u624b\u52d5\u5efa\u7acb \u63d0\u4f9b Catalog Image \u4f86\u6e90 Subscription \u7ba1\u7406\u54e1 \u61c9\u7528 Namespace \u624b\u52d5\u5efa\u7acb \u6307\u5b9a\u8981\u5b89\u88dd\u54ea\u500b Operator InstallPlan OLM \u81ea\u52d5\u7522\u751f \u540c Subscription \u81ea\u52d5\u6216\u624b\u52d5\u6279\u51c6 \u5be6\u969b\u57f7\u884c\u5b89\u88dd\u4efb\u52d9 CSV OLM \u81ea\u52d5\u7522\u751f \u540c Subscription \u81ea\u52d5 Operator \u7684\u7248\u672c\u63a7\u5236\u8207\u8aaa\u660e Operator Pod OLM \u5efa\u7acb \u540c Namespace \u81ea\u52d5 \u771f\u6b63\u57f7\u884c Operator \u7a0b\u5f0f","title":"\u516d\u3001\u91cd\u9ede\u88dc\u5145\uff08\u6280\u8853\u5c64\u9762\uff09"},{"location":"operator%E4%BB%8B%E7%B4%B9/#_5","text":"CatalogSource (index image) \u2502 \u25bc Subscription (\u4f60\u4e0b\u55ae) \u2502 \u25bc InstallPlan (OLM \u81ea\u52d5\u7522\u751f) \u2502 \u25bc CSV (\u8aaa\u660e\u66f8) \u2502 \u25bc Operator Pod \u555f\u52d5 \u2502 \u25bc App / CR \u53ef\u7528 \u7e3d\u7d50\u4e00\u53e5\u8a71\uff1a \u4f60\u53ea\u9700\u8981\u624b\u52d5\u5efa\u7acb CatalogSource \u8207 Subscription\uff0c \u5176\u9918 InstallPlan\u3001CSV\u3001Operator Pod \u7686\u7531 OLM \u81ea\u52d5\u63a5\u624b\u5b8c\u6210\u5b89\u88dd\u8207\u555f\u52d5\u3002\u3002","title":"\u4e03\u3001\u5b8c\u6574\u6d41\u7a0b\u5716\uff08\u908f\u8f2f\u95dc\u4fc2\uff09"},{"location":"test/","text":"\u6e2c\u8a66 Markdown \u6587\u4ef6 \u9019\u662f\u4e00\u500b\u7528\u4f86\u6e2c\u8a66\u7684 Markdown \u6a94\u6848 \u3002 \u6a19\u984c\u5c64\u7d1a\u6e2c\u8a66 H1 \u6a19\u984c H2 \u6a19\u984c H3 \u6a19\u984c H4 \u6a19\u984css \u6e05\u55ae\u6e2c\u8a66 \u7121\u5e8f\u6e05\u55ae\u9805\u76ee 1 \u7121\u5e8f\u6e05\u55ae\u9805\u76ee 2 \u5b50\u9805\u76ee 2.1 \u5b50\u9805\u76ee 2.2 \u6709\u5e8f\u6e05\u55ae\u9805\u76ee 1 \u6709\u5e8f\u6e05\u55ae\u9805\u76ee 2 \u6709\u5e8f\u6e05\u55ae\u9805\u76ee 3 \u8868\u683c\u6e2c\u8a66 \u540d\u5b57 \u5e74\u9f61 \u57ce\u5e02 \u5c0f\u660e 25 \u53f0\u5317 \u5c0f\u83ef 30 \u53f0\u4e2d \u5c0f\u7f8e 28 \u9ad8\u96c4 \u7a0b\u5f0f\u78bc\u5340\u584a\u6e2c\u8a66 \u884c\u5167\u7a0b\u5f0f\u78bc\uff1a echo \"Hello World\" \u7a0b\u5f0f\u78bc\u5340\u584a\uff1a #!/bin/bash echo \"\u9019\u662f\u6e2c\u8a66\u7528\u7684 Shell Script\" def hello(): print(\"Hello, Markdown!\") hello() \u5f15\u7528\u6587\u5b57 \u9019\u662f\u4e00\u6bb5\u5f15\u7528\u7684\u6587\u5b57\u3002\\ \u53ef\u4ee5\u7528\u4f86\u6e2c\u8a66 Markdown \u7684\u5f15\u7528\u683c\u5f0f\u3002 \u5716\u7247\u8207\u9023\u7d50 \u524d\u5f80 Google","title":"\u6e2c\u8a66 Markdown \u6587\u4ef6"},{"location":"test/#markdown","text":"\u9019\u662f\u4e00\u500b\u7528\u4f86\u6e2c\u8a66\u7684 Markdown \u6a94\u6848 \u3002","title":"\u6e2c\u8a66 Markdown \u6587\u4ef6"},{"location":"test/#_1","text":"","title":"\u6a19\u984c\u5c64\u7d1a\u6e2c\u8a66"},{"location":"test/#h1","text":"","title":"H1 \u6a19\u984c"},{"location":"test/#h2","text":"","title":"H2 \u6a19\u984c"},{"location":"test/#h3","text":"","title":"H3 \u6a19\u984c"},{"location":"test/#h4-ss","text":"","title":"H4 \u6a19\u984css"},{"location":"test/#_2","text":"\u7121\u5e8f\u6e05\u55ae\u9805\u76ee 1 \u7121\u5e8f\u6e05\u55ae\u9805\u76ee 2 \u5b50\u9805\u76ee 2.1 \u5b50\u9805\u76ee 2.2 \u6709\u5e8f\u6e05\u55ae\u9805\u76ee 1 \u6709\u5e8f\u6e05\u55ae\u9805\u76ee 2 \u6709\u5e8f\u6e05\u55ae\u9805\u76ee 3","title":"\u6e05\u55ae\u6e2c\u8a66"},{"location":"test/#_3","text":"\u540d\u5b57 \u5e74\u9f61 \u57ce\u5e02 \u5c0f\u660e 25 \u53f0\u5317 \u5c0f\u83ef 30 \u53f0\u4e2d \u5c0f\u7f8e 28 \u9ad8\u96c4","title":"\u8868\u683c\u6e2c\u8a66"},{"location":"test/#_4","text":"\u884c\u5167\u7a0b\u5f0f\u78bc\uff1a echo \"Hello World\" \u7a0b\u5f0f\u78bc\u5340\u584a\uff1a #!/bin/bash echo \"\u9019\u662f\u6e2c\u8a66\u7528\u7684 Shell Script\" def hello(): print(\"Hello, Markdown!\") hello()","title":"\u7a0b\u5f0f\u78bc\u5340\u584a\u6e2c\u8a66"},{"location":"test/#_5","text":"\u9019\u662f\u4e00\u6bb5\u5f15\u7528\u7684\u6587\u5b57\u3002\\ \u53ef\u4ee5\u7528\u4f86\u6e2c\u8a66 Markdown \u7684\u5f15\u7528\u683c\u5f0f\u3002","title":"\u5f15\u7528\u6587\u5b57"},{"location":"test/#_6","text":"\u524d\u5f80 Google","title":"\u5716\u7247\u8207\u9023\u7d50"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/","text":"Linux \u5bb9\u5668\u8207\u865b\u64ec\u5316\u76f8\u95dc\u6280\u8853\u7b46\u8a18 \u4e00\u3001Linux \u4f7f\u7528 Namespace \u9694\u96e2\u8207 cgroups \u9650\u5236\u505a\u8cc7\u6e90\u7ba1\u7406 Namespace\uff08\u547d\u540d\u7a7a\u9593\uff09 \u63d0\u4f9b\u8cc7\u6e90\u7684\u300c\u8996\u89d2 \u9694\u96e2 \u300d\uff0c\u8b93\u6bcf\u500b\u5bb9\u5668\u6216\u7a0b\u5e8f\u6709\u7368\u7acb\u7684\u8cc7\u6e90\u89c0\u5bdf\u7bc4\u570d\uff0c\u5982\u7368\u7acb\u7684\u9032\u7a0b\u865f\uff08PID\uff09\u3001\u7db2\u8def\u4ecb\u9762\uff08NET\uff09\u3001\u639b\u8f09\u9ede\uff08MNT\uff09\u7b49\uff0c\u4e92\u76f8\u9694\u96e2\u770b\u4e0d\u5230\u5c0d\u65b9\u3002 cgroups\uff08\u63a7\u5236\u7fa4\u7d44\uff09 \u7528\u65bc \u9650\u5236 \u548c\u7ba1\u7406\u7cfb\u7d71\u8cc7\u6e90\uff08CPU\u3001\u8a18\u61b6\u9ad4\u3001\u78c1\u789f I/O \u7b49\uff09\u4f7f\u7528\u91cf\uff0c\u78ba\u4fdd\u5bb9\u5668\u6216\u7a0b\u5e8f\u4e0d\u6703\u5360\u7528\u8d85\u904e\u914d\u7f6e\u7684\u8cc7\u6e90\uff0c\u907f\u514d\u55ae\u4e00\u5bb9\u5668\u8cc7\u6e90\u66b4\u8d70\u5f71\u97ff\u6574\u9ad4\u7cfb\u7d71\u3002 \u4e8c\u3001VM\uff08\u865b\u64ec\u6a5f\uff09\u8207\u5bb9\u5668\u5dee\u7570 \u9805\u76ee VM (\u865b\u64ec\u6a5f) \u5bb9\u5668 \u6838\u5fc3\u6982\u5ff5 \u6a21\u64ec\u5b8c\u6574\u786c\u9ad4\u74b0\u5883 \uff0c\u5305\u542b CPU\u3001\u8a18\u61b6\u9ad4\u7b49 \u5171\u7528\u5bbf\u4e3b\u6a5f OS \u6838\u5fc3 \uff0c\u53ea\u9694\u96e2\u4f7f\u7528\u8005\u7a7a\u9593\u8207\u8cc7\u6e90 \u7cfb\u7d71\u7d44\u6210 \u5b8c\u6574\u5ba2\u6236\u4f5c\u696d\u7cfb\u7d71\uff08\u542b Kernel\uff09 \u53ea\u6709\u4f7f\u7528\u8005\u7a7a\u9593\uff0cKernel \u8207\u5bbf\u4e3b\u5171\u7528 \u5b89\u5168\u6027 \u9ad8 \uff0c\u56e0\u7368\u7acb Kernel \u8f03 \u4f4e \uff0cKernel \u6f0f\u6d1e\u53ef\u80fd\u5c0e\u81f4\u5bb9\u5668\u9003\u9038 \u8cc7\u6e90\u6d88\u8017 \u5927 \u8f15\u91cf\uff0c\u5feb\u901f\u555f\u52d5 root \u6b0a\u9650\u5f71\u97ff \u5bb9\u5668 \u5167 root \u5f71\u97ff\u9650\u65bc VM \u5bb9\u5668\u5167 root \u6b0a\u9650\u53ef\u80fd\u76f4\u63a5\u5371\u5bb3\u5bbf\u4e3b\u6a5f\u5b89\u5168 \u4e09\u3001Docker \u8207 Podman \u5dee\u7570 \u9805\u76ee Docker Podman \u67b6\u69cb \u6709\u5e38\u99d0\u5b88\u8b77\u9032\u7a0b\uff08dockerd\uff09 \u7121\u5b88\u8b77\u9032\u7a0b\uff0cdaemonless \u5bb9\u5668\u7ba1\u7406 \u900f\u904e dockerd \u7ba1\u7406\u5bb9\u5668 \u6bcf\u500b\u5bb9\u5668\u7368\u7acb\u904b\u884c \u9810\u8a2d\u6b0a\u9650 \u9810\u8a2d\u4ee5 root \u8eab\u4efd\u57f7\u884c \u652f\u63f4 rootless \u6a21\u5f0f \u91cd\u555f\u6a5f\u5236 \u652f\u63f4 --restart \u81ea\u52d5\u91cd\u555f \u6709\u9810\u8a2d\u5b88\u8b77\u9032\u7a0b\u53ef\u4ee5\u958b\u555fpodman-restart.service \uff0c\u4e5f\u53ef\u4ee5\u53e6\u5916\u642d\u914d systemd restart \u5b89\u5168\u6027 root \u6b0a\u9650\u8f03\u9ad8 rootless \u6e1b\u5c11\u653b\u64ca\u9762\uff0c\u8f03\u5b89\u5168 \u56db\u3001Docker \u8207 Podman \u5bb9\u5668\u91cd\u555f\u5dee\u7570 Docker \uff1a\u5b88\u8b77\u9032\u7a0b dockerd \u652f\u63f4 --restart \u53c3\u6578\uff0cdaemon \u91cd\u555f\u6216\u5bbf\u4e3b\u6a5f\u91cd\u555f\u6703\u81ea\u52d5\u91cd\u555f\u5bb9\u5668\u3002 Podman \uff1a\u53ef\u4ee5\u958b\u555fpodman-restart.service \u3002\u6216\u662f\u53ef\u7528 podman generate systemd \u751f\u6210 systemd \u670d\u52d9\u55ae\u5143\uff0c\u4ea4\u7531 systemd \u7ba1\u7406\u3002 \u4e94\u3001Kubernetes\uff08K8s\uff09\u4e2d Root \u6b0a\u9650\u8207 User Namespace \u9694\u96e2 \u9810\u8a2d\u5bb9\u5668\u4ee5 root \u8eab\u4efd\u904b\u884c\uff0c\u98a8\u96aa\u8f03\u9ad8\u3002 K8s 1.33 \u8d77\uff0c\u9810\u8a2d\u555f\u7528 User Namespace \u9694\u96e2\uff08 hostUsers: false \uff09\uff0c\u5c07\u5bb9\u5668 root UID \u6620\u5c04\u6210\u5bbf\u4e3b\u6a5f\u975e root \u7528\u6236\uff0c\u964d\u4f4e\u98a8\u96aa\u3002 \u9700 Linux Kernel \u22656.3\uff0c\u5bb9\u5668 runtime \u8207\u6a94\u6848\u7cfb\u7d71\u652f\u63f4\u3002 Reference: Securing Kubernetes 1.33 Pods: The Impact of User Namespace Isolation \u7e3d\u7d50 \u4e3b\u984c \u6838\u5fc3\u91cd\u9ede Namespace + cgroups Namespace \u9694\u96e2\u8cc7\u6e90\u8996\u89d2\uff0ccgroups \u9650\u5236\u8cc7\u6e90\u91cf VM vs \u5bb9\u5668 VM \u7368\u7acb kernel \u9ad8\u5b89\u5168\u4f46\u91cd\u8cc7\u6e90\uff0c\u5bb9\u5668\u8f15\u91cf\u4f46\u98a8\u96aa\u9ad8 Docker vs Podman Docker \u6709\u5b88\u8b77\u9032\u7a0b\uff0cPodman \u7121\u5b88\u8b77\u9032\u7a0b\u4e14\u652f\u63f4 rootless \u5bb9\u5668\u91cd\u555f Docker \u652f\u63f4\u81ea\u52d5\u91cd\u555f\uff0cPodman \u8981\u958b\u555fpodman-restart.service\u6216systemd \u7ba1\u7406 K8s rootless 1.33 \u7248\u8d77\u9810\u8a2d User Namespace \u9694\u96e2\u964d\u4f4e root \u98a8\u96aa Podman \u8207 systemd / Quadlet systemd \u7ba1\u7406\u751f\u547d\u9031\u671f\uff0cQuadlet \u7528 YAML \u7c21\u5316\u914d\u7f6e \u516d Docker Overlay \u7db2\u8def\u5b8c\u6574\u7b46\u8a18 \u4e00\u3001Overlay \u662f\u4ec0\u9ebc Overlay \u662f Docker \u6216 Kubernetes \u7528\u4f86\u8b93\u300c\u4e0d\u540c\u4e3b\u6a5f\u7684\u5bb9\u5668\u80fd\u4e92\u901a\u300d\u7684\u865b\u64ec\u7db2\u8def\u3002 \u5b83\u6703\u5728\u591a\u53f0\u4e3b\u6a5f\u4e4b\u9593\u5efa\u7acb VXLAN\uff08\u6216 Geneve\uff09\u96a7\u9053\uff0c\u628a\u5bb9\u5668\u5c01\u5305\u5c01\u8d77\u4f86\u518d\u9001\u5230\u5c0d\u65b9\u4e3b\u6a5f\uff0c \u8b93\u4e0d\u540c\u4e3b\u6a5f\u7684\u5bb9\u5668\u770b\u8d77\u4f86\u50cf\u5728\u540c\u4e00\u500b\u5167\u7db2\u3002 \u4e8c\u3001\u5bb9\u5668\u5167\u7684\u7db2\u8def\u4ecb\u9762\u8207 IP \u5728 Overlay \u7db2\u8def\u4e2d\uff0c\u6bcf\u500b\u5bb9\u5668\u901a\u5e38\u6703\u6709\u5169\u5f35\u865b\u64ec\u7db2\u5361\uff08eth0\u3001eth1\uff09\uff1a \u4ecb\u9762\u540d\u7a31 \u7db2\u6bb5\u7bc4\u4f8b \u4f86\u6e90\u7db2\u8def \u529f\u80fd\u8aaa\u660e eth0 10.0.x.x overlay\uff08\u5982 elk-net\uff09 \u7528\u65bc\u8de8\u4e3b\u6a5f\u5bb9\u5668\u4e4b\u9593\u7684\u5167\u90e8\u901a\u8a0a eth1 172.18.x.x docker_gwbridge \u7528\u65bc\u5c0d\u5916\u9023\u7dda\uff08\u4e0a\u7db2\u6216\u8207\u4e3b\u6a5f\u4e92\u901a\uff09 \u4e09\u3001Overlay \u8207 Bridge \u7684\u5dee\u5225\u8207\u95dc\u4fc2 \u985e\u578b \u7bc4\u570d \u529f\u80fd \u662f\u5426\u8de8\u4e3b\u6a5f Bridge \u55ae\u4e00\u4e3b\u6a5f \u5bb9\u5668\u5171\u4eab\u4e3b\u6a5f\u7684\u865b\u64ec\u4ea4\u63db\u5668\uff08docker0\uff09 \u5426 Overlay \u591a\u4e3b\u6a5f \u5efa\u7acb\u8de8\u4e3b\u6a5f\u865b\u64ec\u7db2\u8def\uff08VXLAN \u5c01\u88dd\uff09 \u662f docker_gwbridge \u55ae\u4e00\u4e3b\u6a5f\u51fa\u53e3 \u8b93 overlay \u5bb9\u5668\u80fd\u9023\u5916 \u5426 \u91cd\u9ede\uff1a - Overlay\uff1a\u8ca0\u8cac\u300c\u5bb9\u5668 \u2194 \u5bb9\u5668\uff08\u8de8\u4e3b\u6a5f\uff09\u300d\u7684\u5167\u90e8\u5c01\u5305\u3002 - Bridge / gwbridge\uff1a\u8ca0\u8cac\u300c\u5bb9\u5668 \u2194 \u5916\u90e8\u4e16\u754c\u300d\u7684\u51fa\u53e3\u5c01\u5305\u3002 \u56db\u3001\u5c01\u5305\u5be6\u969b\u8def\u5f91\u89e3\u6790 1\ufe0f\u20e3 \u5bb9\u5668\u8207\u5bb9\u5668\u4e4b\u9593\uff08\u8de8\u4e3b\u6a5f\uff09 [\u5bb9\u5668A eth0:10.0.2.8] \u2193 Overlay VXLAN \u5c01\u88dd (eth0) \u2193 [Node1 \u5be6\u9ad4\u7db2\u5361] \u2193 [Node2 \u5be6\u9ad4\u7db2\u5361] \u2193 Overlay VXLAN \u89e3\u5c01 \u2193 [\u5bb9\u5668B eth0:10.0.2.9] \u6b64\u6642\u5c01\u5305\u53ea\u5728 overlay \u7db2\u8def\u5167\u90e8\u50b3\u905e\uff0c\u4e0d\u6703\u7d93\u904e\u5916\u90e8\u7db2\u8def\u3002 2\ufe0f\u20e3 \u5bb9\u5668\u5c0d\u5916\u9023\u7dda\uff08\u4e0a\u7db2\u6216\u9023\u4e3b\u6a5f\uff09 [\u5bb9\u5668 eth1:172.18.0.3] \u2193 docker_gwbridge\uff08\u4e3b\u6a5f\u5167 bridge\uff09 \u2193 \u4e3b\u6a5f\u5be6\u9ad4\u7db2\u5361 (eth0) \u2193 \u5916\u90e8\u7db2\u8def / Internet \u3001\u6574\u9ad4\u7d50\u69cb\u793a\u610f\u5716 Overlay Network (VXLAN) \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 10.0.2.0/24 \u2502 \u2502 \u2502 \u2502 [Node1] [Node2] \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502\u5bb9\u5668A eth0\u219210.0.2.8 \u2500\u2500\u2500 eth0\u219010.0.2.9 \u5bb9\u5668B\u2502 \u2502 \u2502\u5bb9\u5668A eth1\u2192172.18.0.3 eth1\u2192172.18.0.4 \u5bb9\u5668B\u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u2502 docker_gwbridge docker_gwbridge \u2502 \u2502 \u2502 \u2502 \u4e3b\u6a5f\u7db2\u5361 \u4e3b\u6a5f\u7db2\u5361 \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Internet \u2500\u2500\u2500\u2500\u2500\u2518 \u516d\u3001\u53e3\u8a9e\u5316\u7406\u89e3 \u6bcf\u53f0\u4e3b\u6a5f\u50cf\u4e00\u68df\u5927\u6a13\uff0c\u88e1\u9762\u7684\u5bb9\u5668\u7528 bridge \u4e92\u901a\uff08\u540c\u68df\u6a13\u4f4f\u6236\uff09\u3002 Overlay \u5c31\u50cf\u5728\u4e0d\u540c\u5927\u6a13\u4e4b\u9593\u62c9\u5149\u7e96\uff08VXLAN\uff09\uff0c\u8b93\u4f4f\u6236\u80fd\u8de8\u6a13\u901a\u8a71\u3002 docker_gwbridge \u662f\u5927\u6a13\u7684\u7db2\u8def\u51fa\u53e3\uff0c\u8b93\u4eba\u80fd\u4e0a\u7db2\u6216\u6253\u5916\u7dda\u96fb\u8a71\u3002 \u4e03\u3001\u91cd\u9ede\u6574\u7406 Overlay\uff1a\u8b93\u5bb9\u5668\u8de8\u4e3b\u6a5f\u4e92\u901a\u3002 gwbridge\uff1a\u8b93 overlay \u5bb9\u5668\u80fd\u9023\u5916\u3002 \u5bb9\u5668\u540c\u6642\u6703\u6709\u5169\u5f35\u7db2\u5361\uff1a eth0 \u2192 Overlay\uff08\u5167\u90e8\u4e92\u901a\uff09 eth1 \u2192 gwbridge\uff08\u5916\u90e8\u9023\u7dda\uff09 Overlay \u662f\u5167\u90e8\u865b\u64ec\u7db2\u8def\uff0c\u4e0d\u4ee3\u8868\u80fd\u76f4\u63a5\u4e0a\u7db2\uff0c \u8981\u9023\u5916\u9700\u900f\u904e bridge\uff08docker_gwbridge\uff09\u51fa\u53e3\u3002 bridge\uff1a\u540c\u4e3b\u6a5f\u5bb9\u5668\u4e92\u901a overlay\uff1a\u8de8\u4e3b\u6a5f\u5bb9\u5668\u4e92\u901a docker_gwbridge\uff1a\u5bb9\u5668\u5c0d\u5916\u901a\u8a0a\u51fa\u53e3 ```","title":"Linux \u5bb9\u5668\u7b46\u8a18"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#linux","text":"","title":"Linux \u5bb9\u5668\u8207\u865b\u64ec\u5316\u76f8\u95dc\u6280\u8853\u7b46\u8a18"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#linux-namespace-cgroups","text":"","title":"\u4e00\u3001Linux \u4f7f\u7528 Namespace \u9694\u96e2\u8207 cgroups \u9650\u5236\u505a\u8cc7\u6e90\u7ba1\u7406"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#namespace","text":"\u63d0\u4f9b\u8cc7\u6e90\u7684\u300c\u8996\u89d2 \u9694\u96e2 \u300d\uff0c\u8b93\u6bcf\u500b\u5bb9\u5668\u6216\u7a0b\u5e8f\u6709\u7368\u7acb\u7684\u8cc7\u6e90\u89c0\u5bdf\u7bc4\u570d\uff0c\u5982\u7368\u7acb\u7684\u9032\u7a0b\u865f\uff08PID\uff09\u3001\u7db2\u8def\u4ecb\u9762\uff08NET\uff09\u3001\u639b\u8f09\u9ede\uff08MNT\uff09\u7b49\uff0c\u4e92\u76f8\u9694\u96e2\u770b\u4e0d\u5230\u5c0d\u65b9\u3002","title":"Namespace\uff08\u547d\u540d\u7a7a\u9593\uff09"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#cgroups","text":"\u7528\u65bc \u9650\u5236 \u548c\u7ba1\u7406\u7cfb\u7d71\u8cc7\u6e90\uff08CPU\u3001\u8a18\u61b6\u9ad4\u3001\u78c1\u789f I/O \u7b49\uff09\u4f7f\u7528\u91cf\uff0c\u78ba\u4fdd\u5bb9\u5668\u6216\u7a0b\u5e8f\u4e0d\u6703\u5360\u7528\u8d85\u904e\u914d\u7f6e\u7684\u8cc7\u6e90\uff0c\u907f\u514d\u55ae\u4e00\u5bb9\u5668\u8cc7\u6e90\u66b4\u8d70\u5f71\u97ff\u6574\u9ad4\u7cfb\u7d71\u3002","title":"cgroups\uff08\u63a7\u5236\u7fa4\u7d44\uff09"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#vm","text":"\u9805\u76ee VM (\u865b\u64ec\u6a5f) \u5bb9\u5668 \u6838\u5fc3\u6982\u5ff5 \u6a21\u64ec\u5b8c\u6574\u786c\u9ad4\u74b0\u5883 \uff0c\u5305\u542b CPU\u3001\u8a18\u61b6\u9ad4\u7b49 \u5171\u7528\u5bbf\u4e3b\u6a5f OS \u6838\u5fc3 \uff0c\u53ea\u9694\u96e2\u4f7f\u7528\u8005\u7a7a\u9593\u8207\u8cc7\u6e90 \u7cfb\u7d71\u7d44\u6210 \u5b8c\u6574\u5ba2\u6236\u4f5c\u696d\u7cfb\u7d71\uff08\u542b Kernel\uff09 \u53ea\u6709\u4f7f\u7528\u8005\u7a7a\u9593\uff0cKernel \u8207\u5bbf\u4e3b\u5171\u7528 \u5b89\u5168\u6027 \u9ad8 \uff0c\u56e0\u7368\u7acb Kernel \u8f03 \u4f4e \uff0cKernel \u6f0f\u6d1e\u53ef\u80fd\u5c0e\u81f4\u5bb9\u5668\u9003\u9038 \u8cc7\u6e90\u6d88\u8017 \u5927 \u8f15\u91cf\uff0c\u5feb\u901f\u555f\u52d5 root \u6b0a\u9650\u5f71\u97ff \u5bb9\u5668 \u5167 root \u5f71\u97ff\u9650\u65bc VM \u5bb9\u5668\u5167 root \u6b0a\u9650\u53ef\u80fd\u76f4\u63a5\u5371\u5bb3\u5bbf\u4e3b\u6a5f\u5b89\u5168","title":"\u4e8c\u3001VM\uff08\u865b\u64ec\u6a5f\uff09\u8207\u5bb9\u5668\u5dee\u7570"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#docker-podman","text":"\u9805\u76ee Docker Podman \u67b6\u69cb \u6709\u5e38\u99d0\u5b88\u8b77\u9032\u7a0b\uff08dockerd\uff09 \u7121\u5b88\u8b77\u9032\u7a0b\uff0cdaemonless \u5bb9\u5668\u7ba1\u7406 \u900f\u904e dockerd \u7ba1\u7406\u5bb9\u5668 \u6bcf\u500b\u5bb9\u5668\u7368\u7acb\u904b\u884c \u9810\u8a2d\u6b0a\u9650 \u9810\u8a2d\u4ee5 root \u8eab\u4efd\u57f7\u884c \u652f\u63f4 rootless \u6a21\u5f0f \u91cd\u555f\u6a5f\u5236 \u652f\u63f4 --restart \u81ea\u52d5\u91cd\u555f \u6709\u9810\u8a2d\u5b88\u8b77\u9032\u7a0b\u53ef\u4ee5\u958b\u555fpodman-restart.service \uff0c\u4e5f\u53ef\u4ee5\u53e6\u5916\u642d\u914d systemd restart \u5b89\u5168\u6027 root \u6b0a\u9650\u8f03\u9ad8 rootless \u6e1b\u5c11\u653b\u64ca\u9762\uff0c\u8f03\u5b89\u5168","title":"\u4e09\u3001Docker \u8207 Podman \u5dee\u7570"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#docker-podman_1","text":"Docker \uff1a\u5b88\u8b77\u9032\u7a0b dockerd \u652f\u63f4 --restart \u53c3\u6578\uff0cdaemon \u91cd\u555f\u6216\u5bbf\u4e3b\u6a5f\u91cd\u555f\u6703\u81ea\u52d5\u91cd\u555f\u5bb9\u5668\u3002 Podman \uff1a\u53ef\u4ee5\u958b\u555fpodman-restart.service \u3002\u6216\u662f\u53ef\u7528 podman generate systemd \u751f\u6210 systemd \u670d\u52d9\u55ae\u5143\uff0c\u4ea4\u7531 systemd \u7ba1\u7406\u3002","title":"\u56db\u3001Docker \u8207 Podman \u5bb9\u5668\u91cd\u555f\u5dee\u7570"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#kubernetesk8s-root-user-namespace","text":"\u9810\u8a2d\u5bb9\u5668\u4ee5 root \u8eab\u4efd\u904b\u884c\uff0c\u98a8\u96aa\u8f03\u9ad8\u3002 K8s 1.33 \u8d77\uff0c\u9810\u8a2d\u555f\u7528 User Namespace \u9694\u96e2\uff08 hostUsers: false \uff09\uff0c\u5c07\u5bb9\u5668 root UID \u6620\u5c04\u6210\u5bbf\u4e3b\u6a5f\u975e root \u7528\u6236\uff0c\u964d\u4f4e\u98a8\u96aa\u3002 \u9700 Linux Kernel \u22656.3\uff0c\u5bb9\u5668 runtime \u8207\u6a94\u6848\u7cfb\u7d71\u652f\u63f4\u3002 Reference: Securing Kubernetes 1.33 Pods: The Impact of User Namespace Isolation","title":"\u4e94\u3001Kubernetes\uff08K8s\uff09\u4e2d Root \u6b0a\u9650\u8207 User Namespace \u9694\u96e2"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#_1","text":"\u4e3b\u984c \u6838\u5fc3\u91cd\u9ede Namespace + cgroups Namespace \u9694\u96e2\u8cc7\u6e90\u8996\u89d2\uff0ccgroups \u9650\u5236\u8cc7\u6e90\u91cf VM vs \u5bb9\u5668 VM \u7368\u7acb kernel \u9ad8\u5b89\u5168\u4f46\u91cd\u8cc7\u6e90\uff0c\u5bb9\u5668\u8f15\u91cf\u4f46\u98a8\u96aa\u9ad8 Docker vs Podman Docker \u6709\u5b88\u8b77\u9032\u7a0b\uff0cPodman \u7121\u5b88\u8b77\u9032\u7a0b\u4e14\u652f\u63f4 rootless \u5bb9\u5668\u91cd\u555f Docker \u652f\u63f4\u81ea\u52d5\u91cd\u555f\uff0cPodman \u8981\u958b\u555fpodman-restart.service\u6216systemd \u7ba1\u7406 K8s rootless 1.33 \u7248\u8d77\u9810\u8a2d User Namespace \u9694\u96e2\u964d\u4f4e root \u98a8\u96aa Podman \u8207 systemd / Quadlet systemd \u7ba1\u7406\u751f\u547d\u9031\u671f\uff0cQuadlet \u7528 YAML \u7c21\u5316\u914d\u7f6e","title":"\u7e3d\u7d50"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#docker-overlay","text":"","title":"\u516d Docker Overlay \u7db2\u8def\u5b8c\u6574\u7b46\u8a18"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#overlay","text":"Overlay \u662f Docker \u6216 Kubernetes \u7528\u4f86\u8b93\u300c\u4e0d\u540c\u4e3b\u6a5f\u7684\u5bb9\u5668\u80fd\u4e92\u901a\u300d\u7684\u865b\u64ec\u7db2\u8def\u3002 \u5b83\u6703\u5728\u591a\u53f0\u4e3b\u6a5f\u4e4b\u9593\u5efa\u7acb VXLAN\uff08\u6216 Geneve\uff09\u96a7\u9053\uff0c\u628a\u5bb9\u5668\u5c01\u5305\u5c01\u8d77\u4f86\u518d\u9001\u5230\u5c0d\u65b9\u4e3b\u6a5f\uff0c \u8b93\u4e0d\u540c\u4e3b\u6a5f\u7684\u5bb9\u5668\u770b\u8d77\u4f86\u50cf\u5728\u540c\u4e00\u500b\u5167\u7db2\u3002","title":"\u4e00\u3001Overlay \u662f\u4ec0\u9ebc"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#ip","text":"\u5728 Overlay \u7db2\u8def\u4e2d\uff0c\u6bcf\u500b\u5bb9\u5668\u901a\u5e38\u6703\u6709\u5169\u5f35\u865b\u64ec\u7db2\u5361\uff08eth0\u3001eth1\uff09\uff1a \u4ecb\u9762\u540d\u7a31 \u7db2\u6bb5\u7bc4\u4f8b \u4f86\u6e90\u7db2\u8def \u529f\u80fd\u8aaa\u660e eth0 10.0.x.x overlay\uff08\u5982 elk-net\uff09 \u7528\u65bc\u8de8\u4e3b\u6a5f\u5bb9\u5668\u4e4b\u9593\u7684\u5167\u90e8\u901a\u8a0a eth1 172.18.x.x docker_gwbridge \u7528\u65bc\u5c0d\u5916\u9023\u7dda\uff08\u4e0a\u7db2\u6216\u8207\u4e3b\u6a5f\u4e92\u901a\uff09","title":"\u4e8c\u3001\u5bb9\u5668\u5167\u7684\u7db2\u8def\u4ecb\u9762\u8207 IP"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#overlay-bridge","text":"\u985e\u578b \u7bc4\u570d \u529f\u80fd \u662f\u5426\u8de8\u4e3b\u6a5f Bridge \u55ae\u4e00\u4e3b\u6a5f \u5bb9\u5668\u5171\u4eab\u4e3b\u6a5f\u7684\u865b\u64ec\u4ea4\u63db\u5668\uff08docker0\uff09 \u5426 Overlay \u591a\u4e3b\u6a5f \u5efa\u7acb\u8de8\u4e3b\u6a5f\u865b\u64ec\u7db2\u8def\uff08VXLAN \u5c01\u88dd\uff09 \u662f docker_gwbridge \u55ae\u4e00\u4e3b\u6a5f\u51fa\u53e3 \u8b93 overlay \u5bb9\u5668\u80fd\u9023\u5916 \u5426 \u91cd\u9ede\uff1a - Overlay\uff1a\u8ca0\u8cac\u300c\u5bb9\u5668 \u2194 \u5bb9\u5668\uff08\u8de8\u4e3b\u6a5f\uff09\u300d\u7684\u5167\u90e8\u5c01\u5305\u3002 - Bridge / gwbridge\uff1a\u8ca0\u8cac\u300c\u5bb9\u5668 \u2194 \u5916\u90e8\u4e16\u754c\u300d\u7684\u51fa\u53e3\u5c01\u5305\u3002","title":"\u4e09\u3001Overlay \u8207 Bridge \u7684\u5dee\u5225\u8207\u95dc\u4fc2"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#_2","text":"","title":"\u56db\u3001\u5c01\u5305\u5be6\u969b\u8def\u5f91\u89e3\u6790"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#1","text":"[\u5bb9\u5668A eth0:10.0.2.8] \u2193 Overlay VXLAN \u5c01\u88dd (eth0) \u2193 [Node1 \u5be6\u9ad4\u7db2\u5361] \u2193 [Node2 \u5be6\u9ad4\u7db2\u5361] \u2193 Overlay VXLAN \u89e3\u5c01 \u2193 [\u5bb9\u5668B eth0:10.0.2.9] \u6b64\u6642\u5c01\u5305\u53ea\u5728 overlay \u7db2\u8def\u5167\u90e8\u50b3\u905e\uff0c\u4e0d\u6703\u7d93\u904e\u5916\u90e8\u7db2\u8def\u3002","title":"1\ufe0f\u20e3 \u5bb9\u5668\u8207\u5bb9\u5668\u4e4b\u9593\uff08\u8de8\u4e3b\u6a5f\uff09"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#2","text":"[\u5bb9\u5668 eth1:172.18.0.3] \u2193 docker_gwbridge\uff08\u4e3b\u6a5f\u5167 bridge\uff09 \u2193 \u4e3b\u6a5f\u5be6\u9ad4\u7db2\u5361 (eth0) \u2193 \u5916\u90e8\u7db2\u8def / Internet","title":"2\ufe0f\u20e3 \u5bb9\u5668\u5c0d\u5916\u9023\u7dda\uff08\u4e0a\u7db2\u6216\u9023\u4e3b\u6a5f\uff09"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#_3","text":"Overlay Network (VXLAN) \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 10.0.2.0/24 \u2502 \u2502 \u2502 \u2502 [Node1] [Node2] \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502\u5bb9\u5668A eth0\u219210.0.2.8 \u2500\u2500\u2500 eth0\u219010.0.2.9 \u5bb9\u5668B\u2502 \u2502 \u2502\u5bb9\u5668A eth1\u2192172.18.0.3 eth1\u2192172.18.0.4 \u5bb9\u5668B\u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u2502 docker_gwbridge docker_gwbridge \u2502 \u2502 \u2502 \u2502 \u4e3b\u6a5f\u7db2\u5361 \u4e3b\u6a5f\u7db2\u5361 \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Internet \u2500\u2500\u2500\u2500\u2500\u2518","title":"\u3001\u6574\u9ad4\u7d50\u69cb\u793a\u610f\u5716"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#_4","text":"\u6bcf\u53f0\u4e3b\u6a5f\u50cf\u4e00\u68df\u5927\u6a13\uff0c\u88e1\u9762\u7684\u5bb9\u5668\u7528 bridge \u4e92\u901a\uff08\u540c\u68df\u6a13\u4f4f\u6236\uff09\u3002 Overlay \u5c31\u50cf\u5728\u4e0d\u540c\u5927\u6a13\u4e4b\u9593\u62c9\u5149\u7e96\uff08VXLAN\uff09\uff0c\u8b93\u4f4f\u6236\u80fd\u8de8\u6a13\u901a\u8a71\u3002 docker_gwbridge \u662f\u5927\u6a13\u7684\u7db2\u8def\u51fa\u53e3\uff0c\u8b93\u4eba\u80fd\u4e0a\u7db2\u6216\u6253\u5916\u7dda\u96fb\u8a71\u3002","title":"\u516d\u3001\u53e3\u8a9e\u5316\u7406\u89e3"},{"location":"%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/#_5","text":"Overlay\uff1a\u8b93\u5bb9\u5668\u8de8\u4e3b\u6a5f\u4e92\u901a\u3002 gwbridge\uff1a\u8b93 overlay \u5bb9\u5668\u80fd\u9023\u5916\u3002 \u5bb9\u5668\u540c\u6642\u6703\u6709\u5169\u5f35\u7db2\u5361\uff1a eth0 \u2192 Overlay\uff08\u5167\u90e8\u4e92\u901a\uff09 eth1 \u2192 gwbridge\uff08\u5916\u90e8\u9023\u7dda\uff09 Overlay \u662f\u5167\u90e8\u865b\u64ec\u7db2\u8def\uff0c\u4e0d\u4ee3\u8868\u80fd\u76f4\u63a5\u4e0a\u7db2\uff0c \u8981\u9023\u5916\u9700\u900f\u904e bridge\uff08docker_gwbridge\uff09\u51fa\u53e3\u3002 bridge\uff1a\u540c\u4e3b\u6a5f\u5bb9\u5668\u4e92\u901a overlay\uff1a\u8de8\u4e3b\u6a5f\u5bb9\u5668\u4e92\u901a docker_gwbridge\uff1a\u5bb9\u5668\u5c0d\u5916\u901a\u8a0a\u51fa\u53e3 ```","title":"\u4e03\u3001\u91cd\u9ede\u6574\u7406"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/","text":"RHCOS \u8207 RHEL \u5dee\u7570\u6574\u7406 1. \u5b9a\u4f4d\u8207\u7528\u9014 RHEL (Red Hat Enterprise Linux) : \u901a\u7528\u578b\u4f5c\u696d\u7cfb\u7d71\uff0c\u9069\u7528\u65bc\u5404\u7a2e\u4f3a\u670d\u5668\u8207\u61c9\u7528\u3002 RHCOS (Red Hat CoreOS) : \u70ba OpenShift/Kubernetes \u8a2d\u8a08\u7684\u5c08\u7528 OS\uff0c\u53ea\u80fd\u4f5c\u70ba Node \u4f7f\u7528\u3002 2. \u5957\u4ef6\u8207\u7ba1\u7406\u65b9\u5f0f RHEL : \u63d0\u4f9b yum/dnf\uff0c\u53ef\u81ea\u7531\u5b89\u88dd\u8207\u4fee\u6539\u3002 RHCOS : \u4e0d\u63d0\u4f9b\u5b8c\u6574\u5957\u4ef6\u7ba1\u7406\uff0c\u900f\u904e MachineConfig Operator (MCO) \u8207 rpm-ostree \u66f4\u65b0\u3002 3. \u7dad\u8b77\u8207\u66f4\u65b0 RHEL : \u50b3\u7d71 patch/update \u6a21\u578b\uff0c\u9700\u7ba1\u7406\u54e1\u6c7a\u5b9a\u3002 RHCOS : \u539f\u5b50\u6027\u66f4\u65b0\uff0c\u7531 OpenShift Operator \u81ea\u52d5\u63a7\u5236\u3002 4. \u4f7f\u7528\u60c5\u5883 RHEL : \u8cc7\u6599\u5eab\u3001\u61c9\u7528\u4f3a\u670d\u5668\u3001\u865b\u64ec\u5316\u3001\u4e00\u822c\u4f3a\u670d\u5668\u3002 RHCOS : \u5c08\u7528\u65bc OpenShift Master/Worker \u7bc0\u9ede\u3002 5. \u5b89\u5168\u8207\u4e00\u81f4\u6027 RHEL : \u9ad8\u5ea6\u53ef\u81ea\u8a02\uff0c\u5b89\u5168\u6027\u4f9d\u8cf4\u7ba1\u7406\u54e1\u7dad\u8b77\u3002 RHCOS : \u4e0d\u53ef\u8b8a\u8a2d\u8a08\uff0c\u7bc0\u9ede\u4e00\u81f4\u6027\u9ad8\uff0c\u7531 Operator \u63a7\u5236\u3002 \u7e3d\u7d50\u8868\u683c \u7279\u6027 RHEL RHCOS \u5b9a\u4f4d \u901a\u7528\u578b OS Kubernetes/OpenShift \u5c08\u7528 OS \u5957\u4ef6\u7ba1\u7406 yum/dnf \u53ef\u81ea\u7531\u5b89\u88dd \u4e0d\u53ef\u624b\u52d5\u5b89\u88dd\uff0c\u900f\u904e MCO \u7ba1\u7406 \u7cfb\u7d71\u5f48\u6027 \u9ad8\uff0c\u81ea\u7531\u4fee\u6539 \u4f4e\uff0c\u5e7e\u4e4e\u552f\u8b80 \u66f4\u65b0\u65b9\u5f0f \u50b3\u7d71 patch/update \u539f\u5b50\u6027 ostree \u66f4\u65b0 \u9069\u7528\u5834\u666f DB\u3001\u61c9\u7528\u4f3a\u670d\u5668\u3001VM\u3001\u4e00\u822c\u4f3a\u670d\u5668 OpenShift Master/Worker \u7bc0\u9ede \u7ba1\u7406\u65b9\u5f0f \u7cfb\u7d71\u7ba1\u7406\u54e1 OpenShift Operator \u81ea\u52d5\u5316 --- 1. Ignition \u662f\u4ec0\u9ebc\uff1f Ignition \u662f\u5c08\u70ba Immutable Linux \u7cfb\u7d71\uff08\u5982 CoreOS \u5bb6\u65cf\uff09 \u8a2d\u8a08\u7684 \u958b\u6a5f\u521d\u59cb\u5316\u5de5\u5177 \u3002 \u5b83\u5728 \u7b2c\u4e00\u6b21\u958b\u6a5f\uff08first boot\uff09 \u6642\u8b80\u53d6 .ign \u914d\u7f6e\u6a94\uff0c\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c\uff1a \u78c1\u789f\u5206\u5272\u8207\u683c\u5f0f\u5316 \u6a94\u6848\u5beb\u5165\uff08\u4f8b\u5982 ssh key\u3001\u914d\u7f6e\u6a94\uff09 \u4f7f\u7528\u8005\u5efa\u7acb systemd \u670d\u52d9\u8a2d\u5b9a \u7279\u9ede \uff1a \u50c5\u4f5c\u7528\u65bc \u7b2c\u4e00\u6b21\u958b\u6a5f \uff0c\u4e4b\u5f8c\u4e0d\u6703\u518d\u57f7\u884c \u4fdd\u8b49\u7cfb\u7d71\u5f9e\u4e00\u958b\u59cb\u5c31\u9054\u5230 \u4e00\u81f4\u7684\u72c0\u614b \u9069\u5408\u81ea\u52d5\u5316\u3001\u7121\u4eba\u503c\u5b88\u90e8\u7f72\u5927\u898f\u6a21\u53e2\u96c6 \u7c21\u55ae\u7406\u89e3 \uff1a\u5c08\u6ce8\u65bc \u5e95\u5c64\u521d\u59cb\u5316\u8207\u4e0d\u53ef\u8b8a\u7cfb\u7d71\u8a2d\u5b9a \uff0c\u800c\u975e\u5957\u4ef6\u5b89\u88dd\u6216\u65e5\u5f8c\u4fee\u6539\u3002 2. \u70ba\u4ec0\u9ebc RHCOS \u53ef\u4ee5\u7528 Ignition\uff0c\u4f46 RHEL \u4e0d\u80fd\uff1f RHCOS / FCOS (Fedora) \uff1a Immutable OS \uff1a\u7cfb\u7d71\u4e0d\u53ef\u8b8a\uff0c\u6838\u5fc3\u8207\u5957\u4ef6\u7531\u6620\u50cf\u7ba1\u7406\uff0c\u521d\u59cb\u72c0\u614b\u5fc5\u9808\u5728\u7b2c\u4e00\u6b21\u958b\u6a5f\u5c31\u5beb\u597d \u539f\u751f\u652f\u63f4 Ignition \uff1a\u958b\u6a5f\u524d\u8b80\u53d6 .ign \uff0c\u5b8c\u6210\u78c1\u789f\u3001\u4f7f\u7528\u8005\u3001network\u3001systemd \u8a2d\u5b9a RHEL / Rocky Linux / RHCL \uff1a Mutable OS \uff1a\u7cfb\u7d71\u53ef\u81ea\u7531\u4fee\u6539\uff0c\u5957\u4ef6\u548c\u8a2d\u5b9a\u53ef\u96a8\u6642\u8b8a\u66f4 \u4e0d\u652f\u63f4 Ignition \uff1a\u4f7f\u7528 Kickstart \u6216 cloud-init \u9032\u884c\u81ea\u52d5\u5316\u5b89\u88dd \u6838\u5fc3\u5dee\u7570\uff1aRHEL \u7684\u64cd\u4f5c\u5c64\u8207\u6587\u4ef6\u7cfb\u7d71\u67b6\u69cb\u4e0d\u517c\u5bb9 .ign JSON \u914d\u7f6e \u7d50\u8ad6 \uff1aRHCOS/FCOS \u8a2d\u8a08\u5c31\u662f\u70ba\u4e86 \u521d\u59cb\u958b\u6a5f\u5373\u8a2d\u5b9a\u5b8c\u6574\u72c0\u614b \uff0c\u56e0\u6b64\u652f\u6301 Ignition\uff1bRHEL \u662f\u50b3\u7d71\u53ef\u8b8a\u7cfb\u7d71\uff0c\u521d\u59cb\u5b89\u88dd\u5f8c\u518d\u4fee\u6539\u8a2d\u5b9a\uff0c\u7121\u6cd5\u4f7f\u7528 Ignition\u3002 3. Immutable Linux \u7cfb\u5217\u6574\u7406 3.1 RHCOS\uff08Red Hat CoreOS\uff09 \u7528\u9014 : \u5c08\u70ba OpenShift Kubernetes \u5e73\u53f0\u8a2d\u8a08 \u7279\u6027 : Immutable OS \u81ea\u52d5\u5316\u66f4\u65b0\uff08OSTree \u6620\u50cf\uff09 \u5167\u5efa\u5bb9\u5668\u5316\uff0c\u9810\u8a2d\u652f\u63f4 Kubernetes Ignition \u652f\u63f4\uff08bootstrap\u3001networking\u3001\u4f7f\u7528\u8005\u3001ssh key\uff09 \u7121\u4eba\u503c\u5b88\u5b89\u88dd 3.2 Fedora CoreOS (FCOS) \u958b\u767c\u8005 : Red Hat \u793e\u7fa4\u7248\uff08RHCOS \u4e0a\u6e38\uff09 \u7279\u9ede : Immutable OS \u81ea\u52d5\u66f4\u65b0\uff0c\u53ef\u6efe\u52d5\u6216\u66ab\u505c \u5167\u5efa Podman\u3001container tools \u4f7f\u7528 Ignition \u4f5c\u521d\u59cb\u5316\u8a2d\u5b9a \u7528\u9014 : Kubernetes \u7bc0\u9ede \u81ea\u5efa K8s \u6216 OpenShift \u793e\u7fa4\u7248 3.3 Ubuntu Core \u958b\u767c\u8005 : Canonical \u7279\u9ede : Snaps \u7ba1\u7406\u61c9\u7528\u8207\u7cfb\u7d71 Immutable \u7cfb\u7d71\u6838\u5fc3 \u5f37\u8abf IoT \u8207\u908a\u7de3\u904b\u7b97 \u7528\u9014 : IoT \u88dd\u7f6e Kubernetes \u7bc0\u9ede\uff08\u9700 MicroK8s \u6216 kubeadm\uff09 3.4 Fedora Silverblue \u6027\u8cea : Immutable Desktop Linux \u958b\u767c\u8005 : Fedora Project \u793e\u7fa4\uff08Red Hat \u652f\u6301\uff09 \u6838\u5fc3\u6982\u5ff5 : \u4e0d\u53ef\u8b8a\u7cfb\u7d71\uff0c\u6838\u5fc3\u8207\u5957\u4ef6\u56fa\u5b9a \u539f\u5b50\u66f4\u65b0\uff0c\u53ef\u56de\u6efe \u9f13\u52f5\u5bb9\u5668\u5316\u61c9\u7528\uff08Flatpak\uff09 \u5b9a\u4f4d : Silverblue = Immutable Desktop Fedora CoreOS = Immutable Server / K8s \u7bc0\u9ede RHCOS = \u4f01\u696d\u7d1a CoreOS\uff0c\u5c08\u70ba OpenShift Vagrant \u6d41\u6d6a\u6f22\u6559\u5b78 (\u4f7f\u7528 VMware Provider) \u672c\u6587\u5b8c\u6574\u6574\u7406\u4e86 Vagrant \u4f7f\u7528 VMware Provider \u7684\u6d41\u7a0b\uff0c\u5305\u62ec\u74b0\u5883\u78ba\u8a8d\u3001\u5efa\u7acb\u5c08\u6848\u3001Vagrantfile \u914d\u7f6e\u3001\u555f\u52d5 VM\u3001SSH \u9023\u7dda\u8207\u5e38\u7528\u6307\u4ee4\uff0c\u4e26\u4fdd\u7559\u539f\u6587\u8aaa\u660e\u8207\u63d0\u793a\u3002 1\ufe0f\u20e3 \u4ecb\u7d39 Vagrant \u8207\u7528\u9014 Vagrant \u662f HashiCorp \u958b\u767c\u7684\u4e00\u500b\u5de5\u5177\uff0c\u7528\u4f86\u5efa\u7acb\u548c\u7ba1\u7406\u865b\u64ec\u6a5f\u74b0\u5883\u3002\u5b83\u53ef\u4ee5\u900f\u904e\u4e0d\u540c\u865b\u64ec\u5316\u63d0\u4f9b\u8005 (VirtualBox\u3001VMware \u7b49) \u5efa\u7acb\u7d71\u4e00\u7684\u958b\u767c\u74b0\u5883\uff0c\u4f7f\u5718\u968a\u958b\u767c\u3001\u6e2c\u8a66\u548c\u90e8\u7f72\u66f4\u4e00\u81f4\u3002\u4e3b\u8981\u7279\u9ede\uff1a \u81ea\u52d5\u5316\u74b0\u5883\u914d\u7f6e \uff1a\u900f\u904e Vagrantfile \u5b9a\u7fa9 VM \u914d\u7f6e\uff0c\u5305\u62ec OS\u3001\u7db2\u8def\u3001CPU\u3001RAM\u3002 \u8de8\u5e73\u53f0 \uff1a\u652f\u63f4 Windows\u3001Linux\u3001macOS\u3002 \u6574\u5408 Provisioner \uff1a\u53ef\u4f7f\u7528 Ansible\u3001Chef\u3001Puppet \u6216 Shell script \u81ea\u52d5\u5b89\u88dd\u8edf\u9ad4\u3002 \u6613\u65bc\u7248\u672c\u63a7\u5236 \uff1aVagrantfile \u53ef\u653e\u5165 git\uff0c\u8b93\u5718\u968a\u5171\u7528\u540c\u4e00\u74b0\u5883\u914d\u7f6e\u3002 \u7528\u9014\u8209\u4f8b\uff1a \u958b\u767c\u8005\u5feb\u901f\u642d\u5efa\u6e2c\u8a66\u74b0\u5883\u3002 \u6e2c\u8a66\u591a OS \u6216\u591a\u7db2\u8def\u914d\u7f6e\u3002 \u81ea\u52d5\u5316\u90e8\u7f72\u8edf\u9ad4\u6216\u670d\u52d9\u3002 2\ufe0f\u20e3 \u78ba\u8a8d\u74b0\u5883 \u5728 PowerShell \u6216 CMD \u8f38\u5165\uff1a vagrant --version \u8aaa\u660e\uff1a \u82e5\u986f\u793a\u7248\u672c\u865f\uff0c\u4f8b\u5982 Vagrant 2.x.x\uff0c\u4ee3\u8868 Vagrant \u5df2\u6210\u529f\u5b89\u88dd\u3002 VMware \u4e5f\u5b89\u88dd\u5b8c\u6210\u5f8c\uff0c\u78ba\u4fdd Vagrant \u80fd\u4f7f\u7528 VMware provider\uff1a vagrant plugin list \u4f60\u61c9\u8a72\u770b\u5230\uff1a vagrant-vmware-desktop \u82e5\u6c92\u6709\uff0c\u8acb\u5148\u5b89\u88dd\u63d2\u4ef6\uff1a vagrant plugin install vagrant-vmware-desktop 2.1 \u932f\u8aa4\u8a0a\u606f\u89e3\u91cb \u82e5\u555f\u52d5 VM \u6642\u51fa\u73fe\uff1a Vagrant encountered an error while attempting to load the utility service key file. This error can occur if the Vagrant VMware Utility has not yet been installed, or if it was installed incorrectly. ... Path: C:/ProgramData/hashicorp/vagrant-vmware-desktop/certificates/vagrant-utility.client.crt Error: No such file or directory \u610f\u601d\u662f\uff1a \u4f60\u6709\u5b89\u88dd vagrant-vmware-desktop \u63d2\u4ef6\uff0c\u4f46\u7f3a\u5c11 Vagrant VMware Utility \u9019\u500b\u5916\u639b\u7a0b\u5f0f\u9700\u8981\u7684\u300c\u5f8c\u7aef\u670d\u52d9\u300d\u3002 \u89e3\u6c7a\u65b9\u5f0f\uff1a \u5b89\u88dd Vagrant VMware Utility \u5230 HashiCorp \u5b98\u65b9\u4e0b\u8f09\u5de5\u5177\uff1a Vagrant VMware Utility Download \u4e0b\u8f09 Windows \u7248 MSI \u5b89\u88dd\u6a94\uff0c\u57f7\u884c\u5b89\u88dd\u3002 3\ufe0f\u20e3 \u5efa\u7acb Vagrant \u5c08\u6848\u8cc7\u6599\u593e \u8f38\u5165\uff1a vagrant init \u8aaa\u660e\uff1a \u9019\u6703\u5efa\u7acb\u4e00\u500b Vagrantfile\u3002 \u6b64\u76ee\u9304\u4e2d\u5df2\u5132\u5b58\u4e00\u500b Vagrantfile \u3002 \u73fe\u5728\uff0c\u60a8\u53ef\u4ee5 vagrant up \u60a8\u7684\u7b2c\u4e00\u500b\u865b\u64ec\u74b0\u5883\u4e86\uff01 \u8acb\u95b1\u8b80 Vagrantfile \u4e2d\u7684\u8a3b\u89e3\u4ee5\u53ca vagrantup.com \u4e0a\u7684\u6587\u6a94\uff0c\u4ee5\u4e86\u89e3\u66f4\u591a\u95dc\u65bc\u4f7f\u7528 Vagrant \u7684\u8cc7\u8a0a\u3002 ### 4.1 \u5b8c\u6574 Vagrantfile \u7bc4\u4f8b ```ruby # -*- mode: ruby -*- # vi: set ft=ruby : Vagrant.configure(\"2\") do |config| config.vm.box = \"rockylinux/9\" # \u79c1\u6709\u7db2\u8def config.vm.network \"private_network\", ip: \"192.168.126.100\" # \u516c\u7528\u7db2\u8def (\u6a4b\u63a5) config.vm.network \"public_network\", bridge: \"VMware Network Adapter VMnet8\" # VMware Provider \u5c08\u5c6c\u8a2d\u5b9a config.vm.provider \"vmware_desktop\" do |v| v.gui = false v.memory = 2048 v.cpus = 2 end # Shell Provisioner \u7bc4\u4f8b # config.vm.provision \"shell\", inline: <<-SHELL # dnf -y update # dnf -y install htop # SHELL end 5\ufe0f\u20e3 \u555f\u52d5 VM vagrant up --provider=vmware_desktop \u6210\u529f\u5f8c\u4ee3\u8868 Vagrant \u5e6b\u4f60\u5728 VMware Workstation / Fusion \u88e1\u5efa\u7acb\u4e26\u555f\u52d5\u4e00\u53f0\u865b\u64ec\u6a5f\u3002 Vagrant \u5efa\u7acb\u591a\u53f0 VM \u7bc4\u4f8b (\u4f7f\u7528 VMware Provider) \u4ee5\u4e0b\u793a\u7bc4\u5982\u4f55\u5728 Vagrantfile \u4e2d\u5b9a\u7fa9\u591a\u53f0\u865b\u64ec\u6a5f (VM)\uff0c\u4e26\u5206\u5225\u555f\u52d5\u3002 Vagrantfile \u7bc4\u4f8b Vagrant \u5efa\u7acb\u591a\u53f0 VM\uff08VMware Provider\uff09 Vagrant.configure(\"2\") do |config| # \u6307\u5b9a box\uff08\u53ef\u4f9d\u9700\u6c42\u4fee\u6539\uff09 config.vm.box = \"rockylinux/9\" config.vm.define \"vm1\" do |vm1| vm1.vm.hostname = \"vm1\" vm1.vm.network \"private_network\", ip: \"192.168.126.100\" end config.vm.define \"vm2\" do |vm2| vm2.vm.hostname = \"vm2\" vm2.vm.network \"private_network\", ip: \"192.168.126.101\" end # \u555f\u52d5\u7b2c\u4e00\u53f0 vagrant up vm1 --provider=vmware_desktop # \u555f\u52d5\u7b2c\u4e8c\u53f0 vagrant up vm2 --provider=vmware_desktop # \u4e5f\u53ef\u4e00\u6b21\u555f\u52d5\u5168\u90e8 vagrant up --provider=vmware_desktop 6\ufe0f\u20e3 SSH \u9023\u7dda VM vagrant ssh \u82e5 Windows \u6c92\u6709 SSH Client\uff0c\u53ef\u5148\u900f\u904e vagrant ssh-config \u67e5\u8a62\u9023\u7dda\u8cc7\u8a0a\uff0c\u518d\u7528\u5176\u4ed6 SSH \u5de5\u5177 (\u4f8b\u5982 PuTTY) \u9023\u7dda\u3002 \u9810\u8a2d\u5e33\u865f\u5bc6\u78bc\uff1a vagrant / vagrant 7\ufe0f\u20e3 \u5e38\u7528\u64cd\u4f5c\u6307\u4ee4 \u6307\u4ee4 \u529f\u80fd \u5099\u8a3b vagrant status \u67e5\u770b\u76ee\u524d VM \u72c0\u614b \u986f\u793a running / poweroff vagrant ssh \u9032\u5165 VM Windows \u4e0b\u8981\u5b89\u88dd SSH Client \u6216\u7528 vagrant ssh-config \u642d\u914d ssh vagrant halt \u95dc\u6a5f (\u6b63\u5e38 shutdown) \u76f8\u7576\u65bc\u5728 VM \u88e1\u4e0b shutdown -h now vagrant suspend \u66ab\u505c VM (\u985e\u4f3c\u7761\u7720) \u4e0b\u6b21 vagrant resume \u53ef\u4ee5\u5feb\u901f\u6062\u5fa9 vagrant resume \u559a\u9192 VM \u5c0d\u61c9 suspend vagrant reload \u91cd\u555f VM \u4e26\u5957\u7528 Vagrantfile \u4fee\u6539 \u4f8b\u5982\u6539\u4e86\u8a18\u61b6\u9ad4\u6216\u7db2\u8def\u8a2d\u5b9a vagrant destroy \u522a\u9664 VM (\u9023\u540c\u786c\u789f) \u6703\u5b8c\u5168\u6e05\u9664\uff0c\u614e\u7528\uff01","title":"\u904b\u7dad\u77e5\u8b58"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#rhcos-rhel","text":"","title":"RHCOS \u8207 RHEL \u5dee\u7570\u6574\u7406"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#1","text":"RHEL (Red Hat Enterprise Linux) : \u901a\u7528\u578b\u4f5c\u696d\u7cfb\u7d71\uff0c\u9069\u7528\u65bc\u5404\u7a2e\u4f3a\u670d\u5668\u8207\u61c9\u7528\u3002 RHCOS (Red Hat CoreOS) : \u70ba OpenShift/Kubernetes \u8a2d\u8a08\u7684\u5c08\u7528 OS\uff0c\u53ea\u80fd\u4f5c\u70ba Node \u4f7f\u7528\u3002","title":"1. \u5b9a\u4f4d\u8207\u7528\u9014"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#2","text":"RHEL : \u63d0\u4f9b yum/dnf\uff0c\u53ef\u81ea\u7531\u5b89\u88dd\u8207\u4fee\u6539\u3002 RHCOS : \u4e0d\u63d0\u4f9b\u5b8c\u6574\u5957\u4ef6\u7ba1\u7406\uff0c\u900f\u904e MachineConfig Operator (MCO) \u8207 rpm-ostree \u66f4\u65b0\u3002","title":"2. \u5957\u4ef6\u8207\u7ba1\u7406\u65b9\u5f0f"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#3","text":"RHEL : \u50b3\u7d71 patch/update \u6a21\u578b\uff0c\u9700\u7ba1\u7406\u54e1\u6c7a\u5b9a\u3002 RHCOS : \u539f\u5b50\u6027\u66f4\u65b0\uff0c\u7531 OpenShift Operator \u81ea\u52d5\u63a7\u5236\u3002","title":"3. \u7dad\u8b77\u8207\u66f4\u65b0"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#4","text":"RHEL : \u8cc7\u6599\u5eab\u3001\u61c9\u7528\u4f3a\u670d\u5668\u3001\u865b\u64ec\u5316\u3001\u4e00\u822c\u4f3a\u670d\u5668\u3002 RHCOS : \u5c08\u7528\u65bc OpenShift Master/Worker \u7bc0\u9ede\u3002","title":"4. \u4f7f\u7528\u60c5\u5883"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#5","text":"RHEL : \u9ad8\u5ea6\u53ef\u81ea\u8a02\uff0c\u5b89\u5168\u6027\u4f9d\u8cf4\u7ba1\u7406\u54e1\u7dad\u8b77\u3002 RHCOS : \u4e0d\u53ef\u8b8a\u8a2d\u8a08\uff0c\u7bc0\u9ede\u4e00\u81f4\u6027\u9ad8\uff0c\u7531 Operator \u63a7\u5236\u3002","title":"5. \u5b89\u5168\u8207\u4e00\u81f4\u6027"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#_1","text":"\u7279\u6027 RHEL RHCOS \u5b9a\u4f4d \u901a\u7528\u578b OS Kubernetes/OpenShift \u5c08\u7528 OS \u5957\u4ef6\u7ba1\u7406 yum/dnf \u53ef\u81ea\u7531\u5b89\u88dd \u4e0d\u53ef\u624b\u52d5\u5b89\u88dd\uff0c\u900f\u904e MCO \u7ba1\u7406 \u7cfb\u7d71\u5f48\u6027 \u9ad8\uff0c\u81ea\u7531\u4fee\u6539 \u4f4e\uff0c\u5e7e\u4e4e\u552f\u8b80 \u66f4\u65b0\u65b9\u5f0f \u50b3\u7d71 patch/update \u539f\u5b50\u6027 ostree \u66f4\u65b0 \u9069\u7528\u5834\u666f DB\u3001\u61c9\u7528\u4f3a\u670d\u5668\u3001VM\u3001\u4e00\u822c\u4f3a\u670d\u5668 OpenShift Master/Worker \u7bc0\u9ede \u7ba1\u7406\u65b9\u5f0f \u7cfb\u7d71\u7ba1\u7406\u54e1 OpenShift Operator \u81ea\u52d5\u5316 ---","title":"\u7e3d\u7d50\u8868\u683c"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#1-ignition","text":"Ignition \u662f\u5c08\u70ba Immutable Linux \u7cfb\u7d71\uff08\u5982 CoreOS \u5bb6\u65cf\uff09 \u8a2d\u8a08\u7684 \u958b\u6a5f\u521d\u59cb\u5316\u5de5\u5177 \u3002 \u5b83\u5728 \u7b2c\u4e00\u6b21\u958b\u6a5f\uff08first boot\uff09 \u6642\u8b80\u53d6 .ign \u914d\u7f6e\u6a94\uff0c\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c\uff1a \u78c1\u789f\u5206\u5272\u8207\u683c\u5f0f\u5316 \u6a94\u6848\u5beb\u5165\uff08\u4f8b\u5982 ssh key\u3001\u914d\u7f6e\u6a94\uff09 \u4f7f\u7528\u8005\u5efa\u7acb systemd \u670d\u52d9\u8a2d\u5b9a \u7279\u9ede \uff1a \u50c5\u4f5c\u7528\u65bc \u7b2c\u4e00\u6b21\u958b\u6a5f \uff0c\u4e4b\u5f8c\u4e0d\u6703\u518d\u57f7\u884c \u4fdd\u8b49\u7cfb\u7d71\u5f9e\u4e00\u958b\u59cb\u5c31\u9054\u5230 \u4e00\u81f4\u7684\u72c0\u614b \u9069\u5408\u81ea\u52d5\u5316\u3001\u7121\u4eba\u503c\u5b88\u90e8\u7f72\u5927\u898f\u6a21\u53e2\u96c6 \u7c21\u55ae\u7406\u89e3 \uff1a\u5c08\u6ce8\u65bc \u5e95\u5c64\u521d\u59cb\u5316\u8207\u4e0d\u53ef\u8b8a\u7cfb\u7d71\u8a2d\u5b9a \uff0c\u800c\u975e\u5957\u4ef6\u5b89\u88dd\u6216\u65e5\u5f8c\u4fee\u6539\u3002","title":"1. Ignition \u662f\u4ec0\u9ebc\uff1f"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#2-rhcos-ignition-rhel","text":"RHCOS / FCOS (Fedora) \uff1a Immutable OS \uff1a\u7cfb\u7d71\u4e0d\u53ef\u8b8a\uff0c\u6838\u5fc3\u8207\u5957\u4ef6\u7531\u6620\u50cf\u7ba1\u7406\uff0c\u521d\u59cb\u72c0\u614b\u5fc5\u9808\u5728\u7b2c\u4e00\u6b21\u958b\u6a5f\u5c31\u5beb\u597d \u539f\u751f\u652f\u63f4 Ignition \uff1a\u958b\u6a5f\u524d\u8b80\u53d6 .ign \uff0c\u5b8c\u6210\u78c1\u789f\u3001\u4f7f\u7528\u8005\u3001network\u3001systemd \u8a2d\u5b9a RHEL / Rocky Linux / RHCL \uff1a Mutable OS \uff1a\u7cfb\u7d71\u53ef\u81ea\u7531\u4fee\u6539\uff0c\u5957\u4ef6\u548c\u8a2d\u5b9a\u53ef\u96a8\u6642\u8b8a\u66f4 \u4e0d\u652f\u63f4 Ignition \uff1a\u4f7f\u7528 Kickstart \u6216 cloud-init \u9032\u884c\u81ea\u52d5\u5316\u5b89\u88dd \u6838\u5fc3\u5dee\u7570\uff1aRHEL \u7684\u64cd\u4f5c\u5c64\u8207\u6587\u4ef6\u7cfb\u7d71\u67b6\u69cb\u4e0d\u517c\u5bb9 .ign JSON \u914d\u7f6e \u7d50\u8ad6 \uff1aRHCOS/FCOS \u8a2d\u8a08\u5c31\u662f\u70ba\u4e86 \u521d\u59cb\u958b\u6a5f\u5373\u8a2d\u5b9a\u5b8c\u6574\u72c0\u614b \uff0c\u56e0\u6b64\u652f\u6301 Ignition\uff1bRHEL \u662f\u50b3\u7d71\u53ef\u8b8a\u7cfb\u7d71\uff0c\u521d\u59cb\u5b89\u88dd\u5f8c\u518d\u4fee\u6539\u8a2d\u5b9a\uff0c\u7121\u6cd5\u4f7f\u7528 Ignition\u3002","title":"2. \u70ba\u4ec0\u9ebc RHCOS \u53ef\u4ee5\u7528 Ignition\uff0c\u4f46 RHEL \u4e0d\u80fd\uff1f"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#3-immutable-linux","text":"","title":"3. Immutable Linux \u7cfb\u5217\u6574\u7406"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#31-rhcosred-hat-coreos","text":"\u7528\u9014 : \u5c08\u70ba OpenShift Kubernetes \u5e73\u53f0\u8a2d\u8a08 \u7279\u6027 : Immutable OS \u81ea\u52d5\u5316\u66f4\u65b0\uff08OSTree \u6620\u50cf\uff09 \u5167\u5efa\u5bb9\u5668\u5316\uff0c\u9810\u8a2d\u652f\u63f4 Kubernetes Ignition \u652f\u63f4\uff08bootstrap\u3001networking\u3001\u4f7f\u7528\u8005\u3001ssh key\uff09 \u7121\u4eba\u503c\u5b88\u5b89\u88dd","title":"3.1 RHCOS\uff08Red Hat CoreOS\uff09"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#32-fedora-coreos-fcos","text":"\u958b\u767c\u8005 : Red Hat \u793e\u7fa4\u7248\uff08RHCOS \u4e0a\u6e38\uff09 \u7279\u9ede : Immutable OS \u81ea\u52d5\u66f4\u65b0\uff0c\u53ef\u6efe\u52d5\u6216\u66ab\u505c \u5167\u5efa Podman\u3001container tools \u4f7f\u7528 Ignition \u4f5c\u521d\u59cb\u5316\u8a2d\u5b9a \u7528\u9014 : Kubernetes \u7bc0\u9ede \u81ea\u5efa K8s \u6216 OpenShift \u793e\u7fa4\u7248","title":"3.2 Fedora CoreOS (FCOS)"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#33-ubuntu-core","text":"\u958b\u767c\u8005 : Canonical \u7279\u9ede : Snaps \u7ba1\u7406\u61c9\u7528\u8207\u7cfb\u7d71 Immutable \u7cfb\u7d71\u6838\u5fc3 \u5f37\u8abf IoT \u8207\u908a\u7de3\u904b\u7b97 \u7528\u9014 : IoT \u88dd\u7f6e Kubernetes \u7bc0\u9ede\uff08\u9700 MicroK8s \u6216 kubeadm\uff09","title":"3.3 Ubuntu Core"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#34-fedora-silverblue","text":"\u6027\u8cea : Immutable Desktop Linux \u958b\u767c\u8005 : Fedora Project \u793e\u7fa4\uff08Red Hat \u652f\u6301\uff09 \u6838\u5fc3\u6982\u5ff5 : \u4e0d\u53ef\u8b8a\u7cfb\u7d71\uff0c\u6838\u5fc3\u8207\u5957\u4ef6\u56fa\u5b9a \u539f\u5b50\u66f4\u65b0\uff0c\u53ef\u56de\u6efe \u9f13\u52f5\u5bb9\u5668\u5316\u61c9\u7528\uff08Flatpak\uff09 \u5b9a\u4f4d : Silverblue = Immutable Desktop Fedora CoreOS = Immutable Server / K8s \u7bc0\u9ede RHCOS = \u4f01\u696d\u7d1a CoreOS\uff0c\u5c08\u70ba OpenShift","title":"3.4 Fedora Silverblue"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#vagrant-vmware-provider","text":"\u672c\u6587\u5b8c\u6574\u6574\u7406\u4e86 Vagrant \u4f7f\u7528 VMware Provider \u7684\u6d41\u7a0b\uff0c\u5305\u62ec\u74b0\u5883\u78ba\u8a8d\u3001\u5efa\u7acb\u5c08\u6848\u3001Vagrantfile \u914d\u7f6e\u3001\u555f\u52d5 VM\u3001SSH \u9023\u7dda\u8207\u5e38\u7528\u6307\u4ee4\uff0c\u4e26\u4fdd\u7559\u539f\u6587\u8aaa\u660e\u8207\u63d0\u793a\u3002","title":"Vagrant \u6d41\u6d6a\u6f22\u6559\u5b78 (\u4f7f\u7528 VMware Provider)"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#1-vagrant","text":"Vagrant \u662f HashiCorp \u958b\u767c\u7684\u4e00\u500b\u5de5\u5177\uff0c\u7528\u4f86\u5efa\u7acb\u548c\u7ba1\u7406\u865b\u64ec\u6a5f\u74b0\u5883\u3002\u5b83\u53ef\u4ee5\u900f\u904e\u4e0d\u540c\u865b\u64ec\u5316\u63d0\u4f9b\u8005 (VirtualBox\u3001VMware \u7b49) \u5efa\u7acb\u7d71\u4e00\u7684\u958b\u767c\u74b0\u5883\uff0c\u4f7f\u5718\u968a\u958b\u767c\u3001\u6e2c\u8a66\u548c\u90e8\u7f72\u66f4\u4e00\u81f4\u3002\u4e3b\u8981\u7279\u9ede\uff1a \u81ea\u52d5\u5316\u74b0\u5883\u914d\u7f6e \uff1a\u900f\u904e Vagrantfile \u5b9a\u7fa9 VM \u914d\u7f6e\uff0c\u5305\u62ec OS\u3001\u7db2\u8def\u3001CPU\u3001RAM\u3002 \u8de8\u5e73\u53f0 \uff1a\u652f\u63f4 Windows\u3001Linux\u3001macOS\u3002 \u6574\u5408 Provisioner \uff1a\u53ef\u4f7f\u7528 Ansible\u3001Chef\u3001Puppet \u6216 Shell script \u81ea\u52d5\u5b89\u88dd\u8edf\u9ad4\u3002 \u6613\u65bc\u7248\u672c\u63a7\u5236 \uff1aVagrantfile \u53ef\u653e\u5165 git\uff0c\u8b93\u5718\u968a\u5171\u7528\u540c\u4e00\u74b0\u5883\u914d\u7f6e\u3002 \u7528\u9014\u8209\u4f8b\uff1a \u958b\u767c\u8005\u5feb\u901f\u642d\u5efa\u6e2c\u8a66\u74b0\u5883\u3002 \u6e2c\u8a66\u591a OS \u6216\u591a\u7db2\u8def\u914d\u7f6e\u3002 \u81ea\u52d5\u5316\u90e8\u7f72\u8edf\u9ad4\u6216\u670d\u52d9\u3002","title":"1\ufe0f\u20e3 \u4ecb\u7d39 Vagrant \u8207\u7528\u9014"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#2_1","text":"\u5728 PowerShell \u6216 CMD \u8f38\u5165\uff1a vagrant --version \u8aaa\u660e\uff1a \u82e5\u986f\u793a\u7248\u672c\u865f\uff0c\u4f8b\u5982 Vagrant 2.x.x\uff0c\u4ee3\u8868 Vagrant \u5df2\u6210\u529f\u5b89\u88dd\u3002 VMware \u4e5f\u5b89\u88dd\u5b8c\u6210\u5f8c\uff0c\u78ba\u4fdd Vagrant \u80fd\u4f7f\u7528 VMware provider\uff1a vagrant plugin list \u4f60\u61c9\u8a72\u770b\u5230\uff1a vagrant-vmware-desktop \u82e5\u6c92\u6709\uff0c\u8acb\u5148\u5b89\u88dd\u63d2\u4ef6\uff1a vagrant plugin install vagrant-vmware-desktop","title":"2\ufe0f\u20e3 \u78ba\u8a8d\u74b0\u5883"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#21","text":"\u82e5\u555f\u52d5 VM \u6642\u51fa\u73fe\uff1a Vagrant encountered an error while attempting to load the utility service key file. This error can occur if the Vagrant VMware Utility has not yet been installed, or if it was installed incorrectly. ... Path: C:/ProgramData/hashicorp/vagrant-vmware-desktop/certificates/vagrant-utility.client.crt Error: No such file or directory \u610f\u601d\u662f\uff1a \u4f60\u6709\u5b89\u88dd vagrant-vmware-desktop \u63d2\u4ef6\uff0c\u4f46\u7f3a\u5c11 Vagrant VMware Utility \u9019\u500b\u5916\u639b\u7a0b\u5f0f\u9700\u8981\u7684\u300c\u5f8c\u7aef\u670d\u52d9\u300d\u3002 \u89e3\u6c7a\u65b9\u5f0f\uff1a \u5b89\u88dd Vagrant VMware Utility \u5230 HashiCorp \u5b98\u65b9\u4e0b\u8f09\u5de5\u5177\uff1a Vagrant VMware Utility Download \u4e0b\u8f09 Windows \u7248 MSI \u5b89\u88dd\u6a94\uff0c\u57f7\u884c\u5b89\u88dd\u3002","title":"2.1 \u932f\u8aa4\u8a0a\u606f\u89e3\u91cb"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#3-vagrant","text":"\u8f38\u5165\uff1a vagrant init \u8aaa\u660e\uff1a \u9019\u6703\u5efa\u7acb\u4e00\u500b Vagrantfile\u3002 \u6b64\u76ee\u9304\u4e2d\u5df2\u5132\u5b58\u4e00\u500b Vagrantfile \u3002 \u73fe\u5728\uff0c\u60a8\u53ef\u4ee5 vagrant up \u60a8\u7684\u7b2c\u4e00\u500b\u865b\u64ec\u74b0\u5883\u4e86\uff01 \u8acb\u95b1\u8b80 Vagrantfile \u4e2d\u7684\u8a3b\u89e3\u4ee5\u53ca vagrantup.com \u4e0a\u7684\u6587\u6a94\uff0c\u4ee5\u4e86\u89e3\u66f4\u591a\u95dc\u65bc\u4f7f\u7528 Vagrant \u7684\u8cc7\u8a0a\u3002 ### 4.1 \u5b8c\u6574 Vagrantfile \u7bc4\u4f8b ```ruby # -*- mode: ruby -*- # vi: set ft=ruby : Vagrant.configure(\"2\") do |config| config.vm.box = \"rockylinux/9\" # \u79c1\u6709\u7db2\u8def config.vm.network \"private_network\", ip: \"192.168.126.100\" # \u516c\u7528\u7db2\u8def (\u6a4b\u63a5) config.vm.network \"public_network\", bridge: \"VMware Network Adapter VMnet8\" # VMware Provider \u5c08\u5c6c\u8a2d\u5b9a config.vm.provider \"vmware_desktop\" do |v| v.gui = false v.memory = 2048 v.cpus = 2 end # Shell Provisioner \u7bc4\u4f8b # config.vm.provision \"shell\", inline: <<-SHELL # dnf -y update # dnf -y install htop # SHELL end","title":"3\ufe0f\u20e3 \u5efa\u7acb Vagrant \u5c08\u6848\u8cc7\u6599\u593e"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#5-vm","text":"vagrant up --provider=vmware_desktop \u6210\u529f\u5f8c\u4ee3\u8868 Vagrant \u5e6b\u4f60\u5728 VMware Workstation / Fusion \u88e1\u5efa\u7acb\u4e26\u555f\u52d5\u4e00\u53f0\u865b\u64ec\u6a5f\u3002","title":"5\ufe0f\u20e3 \u555f\u52d5 VM"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#vagrant-vm-vmware-provider","text":"\u4ee5\u4e0b\u793a\u7bc4\u5982\u4f55\u5728 Vagrantfile \u4e2d\u5b9a\u7fa9\u591a\u53f0\u865b\u64ec\u6a5f (VM)\uff0c\u4e26\u5206\u5225\u555f\u52d5\u3002","title":"Vagrant \u5efa\u7acb\u591a\u53f0 VM \u7bc4\u4f8b (\u4f7f\u7528 VMware Provider)"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#vagrantfile","text":"","title":"Vagrantfile \u7bc4\u4f8b"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#vagrant-vmvmware-provider","text":"Vagrant.configure(\"2\") do |config| # \u6307\u5b9a box\uff08\u53ef\u4f9d\u9700\u6c42\u4fee\u6539\uff09 config.vm.box = \"rockylinux/9\" config.vm.define \"vm1\" do |vm1| vm1.vm.hostname = \"vm1\" vm1.vm.network \"private_network\", ip: \"192.168.126.100\" end config.vm.define \"vm2\" do |vm2| vm2.vm.hostname = \"vm2\" vm2.vm.network \"private_network\", ip: \"192.168.126.101\" end # \u555f\u52d5\u7b2c\u4e00\u53f0 vagrant up vm1 --provider=vmware_desktop # \u555f\u52d5\u7b2c\u4e8c\u53f0 vagrant up vm2 --provider=vmware_desktop # \u4e5f\u53ef\u4e00\u6b21\u555f\u52d5\u5168\u90e8 vagrant up --provider=vmware_desktop","title":"Vagrant \u5efa\u7acb\u591a\u53f0 VM\uff08VMware Provider\uff09"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#6-ssh-vm","text":"vagrant ssh \u82e5 Windows \u6c92\u6709 SSH Client\uff0c\u53ef\u5148\u900f\u904e vagrant ssh-config \u67e5\u8a62\u9023\u7dda\u8cc7\u8a0a\uff0c\u518d\u7528\u5176\u4ed6 SSH \u5de5\u5177 (\u4f8b\u5982 PuTTY) \u9023\u7dda\u3002 \u9810\u8a2d\u5e33\u865f\u5bc6\u78bc\uff1a vagrant / vagrant","title":"6\ufe0f\u20e3 SSH \u9023\u7dda VM"},{"location":"%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/#7","text":"\u6307\u4ee4 \u529f\u80fd \u5099\u8a3b vagrant status \u67e5\u770b\u76ee\u524d VM \u72c0\u614b \u986f\u793a running / poweroff vagrant ssh \u9032\u5165 VM Windows \u4e0b\u8981\u5b89\u88dd SSH Client \u6216\u7528 vagrant ssh-config \u642d\u914d ssh vagrant halt \u95dc\u6a5f (\u6b63\u5e38 shutdown) \u76f8\u7576\u65bc\u5728 VM \u88e1\u4e0b shutdown -h now vagrant suspend \u66ab\u505c VM (\u985e\u4f3c\u7761\u7720) \u4e0b\u6b21 vagrant resume \u53ef\u4ee5\u5feb\u901f\u6062\u5fa9 vagrant resume \u559a\u9192 VM \u5c0d\u61c9 suspend vagrant reload \u91cd\u555f VM \u4e26\u5957\u7528 Vagrantfile \u4fee\u6539 \u4f8b\u5982\u6539\u4e86\u8a18\u61b6\u9ad4\u6216\u7db2\u8def\u8a2d\u5b9a vagrant destroy \u522a\u9664 VM (\u9023\u540c\u786c\u789f) \u6703\u5b8c\u5168\u6e05\u9664\uff0c\u614e\u7528\uff01","title":"7\ufe0f\u20e3 \u5e38\u7528\u64cd\u4f5c\u6307\u4ee4"}]}