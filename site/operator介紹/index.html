<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>operatorä»‹ç´¹ - Darren</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "operator\u4ecb\u7d39";
        var mkdocs_page_input_path = "operator\u4ecb\u7d39.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="..">
          <img src="../image/favicon.ico" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../about/">About</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../note/">ä½¿ç”¨ MkDocs å»ºç«‹æ–‡ä»¶ç¶²ç«™æ•™å­¸ç­†è¨˜</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AD%98/">Linux å®¹å™¨ç­†è¨˜</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../docker_commands/">Dockerå¸¸ç”¨å‘½ä»¤</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ansible%E7%B0%A1%E4%BB%8B%E5%8F%8A%E7%94%A8%E6%B3%95/">Ansibleç°¡ä»‹åŠç”¨æ³•</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/">é‹ç¶­çŸ¥è­˜</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">operatorä»‹ç´¹</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#operator-framework">ä¸€ã€Operator Framework æ¶æ§‹æ¦‚è§€</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#_1">æ¨¡çµ„èªªæ˜</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#openshift-operator">äºŒã€OpenShift Operator å®‰è£æµç¨‹ï¼ˆå¯¦å‹™é‚è¼¯ï¼‰</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1-catalogsource">â‘  CatalogSourceï¼ˆæ¸…å–®ä¾†æºï¼‰</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2-subscription">â‘¡ Subscriptionï¼ˆä¸‹å–®ï¼‰</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#3-installplan">â‘¢ InstallPlanï¼ˆæ–½å·¥è—åœ–ï¼‰</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#4-clusterserviceversioncsv">â‘£ ClusterServiceVersionï¼ˆCSVï¼Œèªªæ˜æ›¸ï¼‰</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#5-operator-ready">â‘¤ Operator Readyï¼ˆå¯ç”¨ï¼‰</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#_2">ä¸‰ã€ç”Ÿæ´»æ¯”å–»å°ç…§è¡¨</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#_3">å››ã€å®Œæ•´æµç¨‹ç¸½çµ</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#10">äº”ã€10 ç§’è¨˜æ†¶å£è¨£</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#_4">å…­ã€é‡é»è£œå……ï¼ˆæŠ€è¡“å±¤é¢ï¼‰</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#_5">ä¸ƒã€å®Œæ•´æµç¨‹åœ–ï¼ˆé‚è¼¯é—œä¿‚ï¼‰</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ocp%E5%91%BD%E4%BB%A4/">ocpå‘½ä»¤</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ocp-prot%E4%BB%8B%E7%B4%B9/">ocp-protä»‹ç´¹</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../loki_pdb_%E7%B6%AD%E9%81%8B%E6%95%B4%E7%90%86/">loki_pdb_ç¶­é‹æ•´ç†</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../k8så‘½ä»¤.md">k8så‘½ä»¤</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Darren</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">operatorä»‹ç´¹</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="operator-framework-olm-markdown">ğŸ§± Operator Framework æ¶æ§‹èˆ‡ OLM å®‰è£æµç¨‹ï¼ˆå®Œæ•´ Markdown æª”æ¡ˆï¼‰</h1>
<hr />
<h2 id="operator-framework">ä¸€ã€Operator Framework æ¶æ§‹æ¦‚è§€</h2>
<p>Operator Framework æ˜¯ Red Hat èˆ‡ç¤¾ç¾¤å…±åŒç¶­è­·çš„ä¸€å¥—é–‹æºå·¥å…·é›†ï¼Œ<br />
ç›®çš„æ˜¯è®“é–‹ç™¼è€…èƒ½ä»¥ä¸€è‡´æ–¹å¼ <strong>é–‹ç™¼ã€å°è£ã€ç™¼ä½ˆã€å®‰è£èˆ‡ç®¡ç† Operator</strong>ã€‚  </p>
<p>æ•´é«”çµæ§‹å¦‚ä¸‹ï¼š</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Operator Framework        â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ Operator SDK â”‚â†’  â”‚ Operator Imageâ”‚
â”‚  â”‚  å»ºç«‹èˆ‡æ‰“åŒ…   â”‚   â”‚ (bundle.csv) â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                            â”‚
â”‚                            â–¼
â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚ Operator Registry   â”‚
â”‚                 â”‚ (Catalog Image)     â”‚
â”‚                 â”‚ å­˜æ”¾ CSVã€CRD è³‡è¨Š   â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                           â”‚
â”‚                           â–¼
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚ Operator Lifecycle Manager â”‚
â”‚              â”‚ æ§åˆ¶å®‰è£ã€å‡ç´šã€æˆæ¬Šã€ä¾è³´   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                           â”‚
â”‚                           â–¼
â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚     OperatorHub       â”‚
â”‚                 â”‚ Web UI â†’ å®‰è£/æŸ¥è©¢     â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr />
<h3 id="_1">æ¨¡çµ„èªªæ˜</h3>
<table>
<thead>
<tr>
<th>å…ƒä»¶</th>
<th>åŠŸèƒ½èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Operator SDK</strong></td>
<td>æä¾›é–‹ç™¼æ¡†æ¶èˆ‡å·¥å…·ï¼ˆæ”¯æ´ Goã€Ansibleã€Helmï¼‰ï¼Œç”¨ä¾†æ’°å¯« Operator ç¨‹å¼èˆ‡æ‰“åŒ…æˆ Bundle Imageã€‚</td>
</tr>
<tr>
<td><strong>Operator Registry</strong></td>
<td>å°‡å¤šå€‹ Bundle Image å½™æ•´ç‚º Catalog Imageï¼Œä¸¦æä¾›çµ¦å¢é›†ä¸­çš„ OLM æŸ¥è©¢ä½¿ç”¨ã€‚</td>
</tr>
<tr>
<td><strong>Operator Lifecycle Managerï¼ˆOLMï¼‰</strong></td>
<td>æ ¸å¿ƒæ§åˆ¶å™¨ï¼Œè² è²¬ Operator çš„å®‰è£ã€å‡ç´šã€æˆæ¬Šèˆ‡ä¾è³´ç®¡ç†ã€‚</td>
</tr>
<tr>
<td><strong>OperatorHub</strong></td>
<td>Web ä»‹é¢ï¼Œè®“ä½¿ç”¨è€…åœ¨ OCP Console ä¸Šå¯è¦–åŒ–åœ°æœå°‹ã€å®‰è£ Operatorã€‚</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="openshift-operator">äºŒã€OpenShift Operator å®‰è£æµç¨‹ï¼ˆå¯¦å‹™é‚è¼¯ï¼‰</h2>
<p>æ ¸å¿ƒæ¦‚å¿µï¼š<br />
OpenShift ä¸ç›´æ¥å¹«ä½ å®‰è£ Appã€‚<br />
å®ƒé€é <strong>Operatorï¼ˆå°å¹«æ‰‹ï¼‰</strong> å»å¹«ä½ è‡ªå‹•å®‰è£ã€ç›£æ§èˆ‡ç¶­è­· Appã€‚  </p>
<p>æ•´æ¢éˆè·¯æ˜¯ï¼š</p>
<blockquote>
<p>ä½ ï¼ˆç®¡ç†å“¡ï¼‰ â†’ OLMï¼ˆæ§åˆ¶å±¤ï¼‰ â†’ Operatorï¼ˆå°å¹«æ‰‹ï¼‰ â†’ Appï¼ˆæœ€çµ‚æ‡‰ç”¨ï¼‰</p>
</blockquote>
<hr />
<h3 id="1-catalogsource">â‘  CatalogSourceï¼ˆæ¸…å–®ä¾†æºï¼‰</h3>
<p><strong>ä½œç”¨</strong><br />
- æä¾› OLM ä¸€å€‹æŸ¥è©¢ä¾†æºï¼Œè®“å®ƒçŸ¥é“æœ‰å“ªäº›å¯ç”¨çš„ Operatorã€ç‰ˆæœ¬èˆ‡æè¿°è³‡è¨Šã€‚<br />
- CatalogSource æŒ‡å‘ä¸€å€‹ã€ŒCatalog Imageã€ï¼ˆindex imageï¼‰ï¼ŒOCP æœƒåœ¨ <code>openshift-marketplace</code> å•Ÿå‹•ä¸€å€‹ Pod æä¾› gRPC æœå‹™ã€‚</p>
<p><strong>å¯¦å‹™è¨­å®š</strong></p>
<pre><code>harbor.com/darren-lab/olm-redhat-operator-index:v4.12
</code></pre>
<p><strong>çµæœ</strong><br />
- ç³»çµ±å•Ÿå‹•ä¸€å€‹ Podï¼ŒOLM å¯é€éå®ƒæŸ¥è©¢ Operator æ¸…å–®èˆ‡ç‰ˆæœ¬ã€‚  </p>
<p><strong>ä¸€å¥è©±</strong></p>
<blockquote>
<p>CatalogSource = Operator çš„ã€ŒApp å•†åº—ä¼ºæœå™¨ã€ã€‚</p>
</blockquote>
<hr />
<h3 id="2-subscription">â‘¡ Subscriptionï¼ˆä¸‹å–®ï¼‰</h3>
<p><strong>ä½œç”¨</strong><br />
- å‘Šè¨´ OLMï¼šã€Œæˆ‘è¦å“ªå€‹ Operatorã€å¾å“ªå€‹ Catalog å®‰è£ã€è¦ä¸è¦è‡ªå‹•æ›´æ–°ã€‚ã€</p>
<p><strong>å…§å®¹åŒ…å«</strong>
- Operator åç¨±ï¼ˆnameï¼‰<br />
- ä¾†æº Catalogï¼ˆsourceã€sourceNamespaceï¼‰<br />
- é »é“ï¼ˆchannelï¼‰<br />
- å®‰è£æ‰¹å‡†æ¨¡å¼ï¼ˆinstallPlanApproval: Automatic / Manualï¼‰</p>
<p><strong>ç¯„ä¾‹</strong></p>
<pre><code class="language-yaml">apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: vertical-pod-autoscaler
  namespace: vertical-pod-autoscaler
spec:
  channel: stable
  name: vertical-pod-autoscaler
  source: olm-redhat-operator-index
  sourceNamespace: openshift-marketplace
  installPlanApproval: Automatic
</code></pre>
<p><strong>ä¸€å¥è©±</strong></p>
<blockquote>
<p>Subscription = ä½ æŒ‰ä¸‹ã€Œæˆ‘è¦è£é€™å€‹ Operatorã€çš„è¨‚å–®ã€‚</p>
</blockquote>
<hr />
<h3 id="3-installplan">â‘¢ InstallPlanï¼ˆæ–½å·¥è—åœ–ï¼‰</h3>
<p><strong>ä½œç”¨</strong>
- ç•¶ Subscription è¢«å»ºç«‹å¾Œï¼ŒOLM æœƒè‡ªå‹•ç”¢ç”Ÿä¸€å€‹ InstallPlanã€‚<br />
- InstallPlan æ˜¯ä¸€ä»½ã€Œå®‰è£è—åœ–ã€ï¼Œåˆ—å‡ºè¦å»ºç«‹çš„æ‰€æœ‰ç‰©ä»¶ï¼ˆCRDã€RBACã€Deploymentã€CSVï¼‰ã€‚  </p>
<p><strong>è‡ªå‹•èˆ‡æ‰‹å‹•å·®ç•°</strong>
- è‹¥ Subscription è¨­ç‚º <code>Automatic</code> â†’ InstallPlan æœƒè‡ªå‹•æ‰¹å‡†ä¸¦åŸ·è¡Œã€‚<br />
- è‹¥è¨­ç‚º <code>Manual</code> â†’ éœ€è¦æ‰‹å‹• Approveã€‚  </p>
<p><strong>æŸ¥è©¢æ–¹å¼</strong></p>
<pre><code class="language-bash">oc get installplan -n &lt;namespace&gt;
oc describe installplan &lt;installplan-name&gt; -n &lt;namespace&gt;
</code></pre>
<p><strong>ç¯„ä¾‹è¼¸å‡º</strong></p>
<pre><code>Name:             install-vpa-abcde
Namespace:        vertical-pod-autoscaler
Approval:         Automatic
Phase:            Complete
CSV:              verticalpodautoscaler.4.12.x
</code></pre>
<p><strong>ä¸€å¥è©±</strong></p>
<blockquote>
<p>InstallPlan = OLM è‡ªå‹•ç”¢ç”Ÿçš„å®‰è£è…³æœ¬ï¼Œæ±ºå®šè¦è£ä»€éº¼ã€æ€éº¼è£ã€‚</p>
</blockquote>
<hr />
<h3 id="4-clusterserviceversioncsv">â‘£ ClusterServiceVersionï¼ˆCSVï¼Œèªªæ˜æ›¸ï¼‰</h3>
<p><strong>ä½œç”¨</strong>
- å®šç¾©æ­¤ç‰ˆæœ¬ Operator çš„å…¨éƒ¨å…§å®¹ï¼ŒåŒ…æ‹¬ï¼š
  - è¦å•Ÿå‹•å“ªäº› Deploymentï¼ˆPodï¼‰
  - è¦å»ºç«‹å“ªäº› CRDï¼ˆåŠŸèƒ½ï¼‰
  - è¦å“ªäº› RBAC æ¬Šé™
  - Operator çš„ç‰ˆæœ¬è³‡è¨Šèˆ‡æè¿°</p>
<p><strong>CSV ç‹€æ…‹è½‰æ›</strong>
- <code>Pending</code> â†’ <code>Installing</code> â†’ <code>Succeeded</code><br />
  ç•¶ CSV è®Šæˆ <code>Succeeded</code>ï¼Œä»£è¡¨ Operator å·²æˆåŠŸéƒ¨ç½²ä¸¦å•Ÿå‹•ã€‚</p>
<p><strong>ä¸€å¥è©±</strong></p>
<blockquote>
<p>CSV = Operator çš„ã€Œç‰ˆæœ¬èªªæ˜æ›¸ã€ï¼ŒOLM ç…§å®ƒå•Ÿå‹•æœå‹™ã€‚</p>
</blockquote>
<hr />
<h3 id="5-operator-ready">â‘¤ Operator Readyï¼ˆå¯ç”¨ï¼‰</h3>
<p><strong>çµæœ</strong>
- ç•¶ CSV ç‚º <code>Succeeded</code>ï¼ŒOperator å·²å•Ÿå‹•ä¸¦é‹ä½œã€‚<br />
- ç³»çµ±ä¸­æœƒæ–°å¢æ–°çš„ CRDï¼Œå¯å»ºç«‹å°æ‡‰ CR ç‰©ä»¶ä½¿ç”¨åŠŸèƒ½ã€‚</p>
<p><strong>ä¾‹å­</strong></p>
<pre><code>oc get VerticalPodAutoscaler
</code></pre>
<p><strong>ä¸€å¥è©±</strong></p>
<blockquote>
<p>Operator Ready = å°å¹«æ‰‹æ­£å¼ä¸Šç­ï¼Œé–‹å§‹å¹«ä½ ç®¡ç†æ‡‰ç”¨ã€‚</p>
</blockquote>
<hr />
<h2 id="_2">ä¸‰ã€ç”Ÿæ´»æ¯”å–»å°ç…§è¡¨</h2>
<table>
<thead>
<tr>
<th>éšæ®µ</th>
<th>æ¯”å–»</th>
<th>ä»£è¡¨æ„ç¾©</th>
</tr>
</thead>
<tbody>
<tr>
<td>CatalogSource</td>
<td>App å•†åº—æ¸…å–®</td>
<td>å‘Šè¨´ç³»çµ±æœ‰å“ªäº› Operator å¯å®‰è£</td>
</tr>
<tr>
<td>Subscription</td>
<td>ä½ åœ¨å•†åº—æŒ‰ä¸‹ã€Œå®‰è£ã€</td>
<td>æŒ‡å®šè¦å®‰è£å“ªå€‹ Operator</td>
</tr>
<tr>
<td>InstallPlan</td>
<td>èƒŒæ™¯å®‰è£æµç¨‹</td>
<td>åˆ—å‡ºä¸¦åŸ·è¡Œå®‰è£æ­¥é©Ÿ</td>
</tr>
<tr>
<td>CSV</td>
<td>å®‰è£èªªæ˜æ›¸</td>
<td>Operator çš„ç‰ˆæœ¬èˆ‡é‹ä½œè¦æ ¼</td>
</tr>
<tr>
<td>Operator Ready</td>
<td>App å¯ä½¿ç”¨</td>
<td>Operator é‹ä½œä¸­ï¼Œå¯å»ºç«‹ CR ä½¿ç”¨åŠŸèƒ½</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_3">å››ã€å®Œæ•´æµç¨‹ç¸½çµ</h2>
<ol>
<li><strong>CatalogSource</strong>ï¼šæä¾› OLM å¯æŸ¥è©¢çš„ Operator æ¸…å–®ä¾†æºã€‚  </li>
<li><strong>Subscription</strong>ï¼šä½¿ç”¨è€…é¸æ“‡è¦å®‰è£çš„ Operatorï¼Œä¸¦è¨­å®šæ›´æ–°æ–¹å¼ã€‚  </li>
<li><strong>InstallPlan</strong>ï¼šOLM æ ¹æ“š Subscription è‡ªå‹•ç”¢ç”Ÿçš„å®‰è£è¨ˆç•«ã€‚  </li>
<li><strong>CSV</strong>ï¼šæè¿° Operator çš„ç‰ˆæœ¬èˆ‡è¡Œç‚ºï¼ŒOLM ä¾æ­¤å•Ÿå‹•æœå‹™ã€‚  </li>
<li><strong>Operator Ready</strong>ï¼šOperator å•Ÿå‹•å®Œæˆï¼Œå¯æä¾› CRD åŠŸèƒ½ã€‚  </li>
</ol>
<hr />
<h2 id="10">äº”ã€10 ç§’è¨˜æ†¶å£è¨£</h2>
<blockquote>
<p><strong>æ¸…å–® â†’ ä¸‹å–® â†’ æ–½å·¥ â†’ èªªæ˜æ›¸ â†’ å¯ç”¨</strong><br />
ï¼ˆCatalogSource â†’ Subscription â†’ InstallPlan â†’ CSV â†’ Readyï¼‰</p>
</blockquote>
<hr />
<h2 id="_4">å…­ã€é‡é»è£œå……ï¼ˆæŠ€è¡“å±¤é¢ï¼‰</h2>
<table>
<thead>
<tr>
<th>åç¨±</th>
<th>å»ºç«‹è€…</th>
<th>Namespace</th>
<th>æ˜¯å¦æ‰‹å‹•</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td>CatalogSource</td>
<td>ç®¡ç†å“¡</td>
<td>openshift-marketplace</td>
<td>æ‰‹å‹•å»ºç«‹</td>
<td>æä¾› Catalog Image ä¾†æº</td>
</tr>
<tr>
<td>Subscription</td>
<td>ç®¡ç†å“¡</td>
<td>æ‡‰ç”¨ Namespace</td>
<td>æ‰‹å‹•å»ºç«‹</td>
<td>æŒ‡å®šè¦å®‰è£å“ªå€‹ Operator</td>
</tr>
<tr>
<td>InstallPlan</td>
<td>OLM è‡ªå‹•ç”¢ç”Ÿ</td>
<td>åŒ Subscription</td>
<td>è‡ªå‹•æˆ–æ‰‹å‹•æ‰¹å‡†</td>
<td>å¯¦éš›åŸ·è¡Œå®‰è£ä»»å‹™</td>
</tr>
<tr>
<td>CSV</td>
<td>OLM è‡ªå‹•ç”¢ç”Ÿ</td>
<td>åŒ Subscription</td>
<td>è‡ªå‹•</td>
<td>Operator çš„ç‰ˆæœ¬æ§åˆ¶èˆ‡èªªæ˜</td>
</tr>
<tr>
<td>Operator Pod</td>
<td>OLM å»ºç«‹</td>
<td>åŒ Namespace</td>
<td>è‡ªå‹•</td>
<td>çœŸæ­£åŸ·è¡Œ Operator ç¨‹å¼</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_5">ä¸ƒã€å®Œæ•´æµç¨‹åœ–ï¼ˆé‚è¼¯é—œä¿‚ï¼‰</h2>
<pre><code>CatalogSource (index image)
        â”‚
        â–¼
Subscription (ä½ ä¸‹å–®)
        â”‚
        â–¼
InstallPlan (OLM è‡ªå‹•ç”¢ç”Ÿ)
        â”‚
        â–¼
CSV (èªªæ˜æ›¸)
        â”‚
        â–¼
Operator Pod å•Ÿå‹•
        â”‚
        â–¼
App / CR å¯ç”¨
</code></pre>
<hr />
<p><strong>ç¸½çµä¸€å¥è©±ï¼š</strong>  </p>
<blockquote>
<p>ä½ åªéœ€è¦æ‰‹å‹•å»ºç«‹ CatalogSource èˆ‡ Subscriptionï¼Œ
å…¶é¤˜ InstallPlanã€CSVã€Operator Pod çš†ç”± OLM è‡ªå‹•æ¥æ‰‹å®Œæˆå®‰è£èˆ‡å•Ÿå‹•ã€‚</p>
</blockquote>
<hr />
<h1 id="openshift-operator-olm">OpenShift Operator æ ¸å¿ƒæ¦‚å¿µæ‘˜è¦ï¼ˆOLM æœ€ç²¾æº–ç‰ˆï¼‰</h1>
<h2 id="subscriptionsub">Subscriptionï¼ˆSubï¼‰</h2>
<p>ä»£è¡¨ OLM è¦å®‰è£å“ªä¸€å€‹ Operatorã€ä½¿ç”¨å“ªå€‹ Channelã€å¾å“ªå€‹ Catalog å–å¾—ã€‚</p>
<p>æŸ¥è©¢æ‰€æœ‰ Subscriptionï¼š</p>
<pre><code class="language-bash">oc get sub -A
</code></pre>
<hr />
<h2 id="clusterserviceversioncsv">ClusterServiceVersionï¼ˆCSVï¼‰</h2>
<p>ä»£è¡¨ Operator å·²å®‰è£çš„ç‰ˆæœ¬èˆ‡å…¶ Metadataï¼ˆCRDã€RBACã€Deployment è¦æ ¼ç­‰ï¼‰ã€‚</p>
<p>æŸ¥è©¢ CSVï¼ˆé è¨­ namespaceï¼‰ï¼š</p>
<pre><code class="language-bash">oc get csv
</code></pre>
<p>æŸ¥è©¢æ‰€æœ‰ namespaceï¼ˆåŒ…å« OLM æŠ•å½±ï¼‰ï¼š</p>
<pre><code class="language-bash">oc get csv -A
</code></pre>
<hr />
<h2 id="catalogcatalogsource-index-image">Catalogï¼ˆCatalogSource / Index Imageï¼‰</h2>
<p>Operator çš„ç‰ˆæœ¬æ¸…å–®ä¾†æºï¼Œæä¾› Channelã€Bundle èˆ‡ Metadataï¼Œä¸åŒ…å«å¯¦éš›æ˜ åƒæª”ã€‚</p>
<p>æŸ¥è©¢ CatalogSourceï¼š</p>
<pre><code class="language-bash">oc get catalogsource -n openshift-marketplace
</code></pre>
<hr />
<h2 id="harbor">Harborï¼ˆé¡åƒä¾†æºï¼‰</h2>
<p>OLM ä¾ ICSPï¼ˆImageContentSourcePolicyï¼‰æˆ– IDMS è¨­å®šï¼Œå¾ Harbor æ“·å– Operator Bundle æ˜ åƒæª”ã€‚</p>
<p>æŸ¥è©¢ ICSPï¼š</p>
<pre><code class="language-bash">oc get imagecontentsourcepolicy
</code></pre>
<hr />
<h2 id="oc-get-csv-a">ç‚ºä»€éº¼ <code>oc get csv -A</code> æœƒå¾ˆå¤šï¼Ÿ</h2>
<p>å› ç‚º OLM æœƒå°‡ Operator çš„ CSV Metadata æŠ•å½±è‡³æ‰€æœ‰ Namespaceï¼Œ
æ­¤ç‚ºé¡¯ç¤ºç”¨é€”ï¼Œä¸ä»£è¡¨æ¯å€‹ Namespace éƒ½é‡æ–°å®‰è£ Operatorã€‚</p>
<hr />
<h2 id="_6">ä¸€å¥è©±ç¸½çµï¼ˆèƒŒèµ·ä¾†ï¼‰</h2>
<p>Sub æ±ºå®šè¦å®‰è£ä»€éº¼ â†’ Catalog æä¾›ç‰ˆæœ¬ â†’ CSV è¡¨ç¤ºå¯¦éš›å·²è£ç‰ˆæœ¬ â†’
OLM ä¾ ICSP å¾ Harbor æŠ“æ˜ åƒ â†’ <code>csv -A</code> å¤šç‚ºæŠ•å½±ä¸æ˜¯é‡è¤‡å®‰è£ã€‚</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/" class="btn btn-neutral float-left" title="é‹ç¶­çŸ¥è­˜"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../ocp%E5%91%BD%E4%BB%A4/" class="btn btn-neutral float-right" title="ocpå‘½ä»¤">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../%E9%81%8B%E7%B6%AD%E7%9F%A5%E8%AD%98/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../ocp%E5%91%BD%E4%BB%A4/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
